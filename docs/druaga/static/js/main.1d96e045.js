/*! For license information please see main.1d96e045.js.LICENSE.txt */
(()=>{var e={809:function(e,t,n){e.exports=function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function r(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,a=Object.keys,o=Array.isArray;function s(e,t){return"object"!=typeof t||a(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var l=Object.getPrototypeOf,u={}.hasOwnProperty;function c(e,t){return u.call(e,t)}function h(e,t){"function"==typeof t&&(t=t(l(e))),("undefined"==typeof Reflect?a:Reflect.ownKeys)(t).forEach((function(n){d(e,n,t[n])}))}var f=Object.defineProperty;function d(e,t,n,r){f(e,t,s(n&&c(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),d(e.prototype,"constructor",e),{extend:h.bind(null,e.prototype)}}}}var m=Object.getOwnPropertyDescriptor,g=[].slice;function y(e,t,n){return g.call(e,t,n)}function v(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function x(e){i.setImmediate?setImmediate(e):setTimeout(e,0)}function w(e,t){if("string"==typeof t&&c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var a=w(e,t[r]);n.push(a)}return n}var o=t.indexOf(".");if(-1!==o){var s=e[t.substr(0,o)];return null==s?void 0:w(s,t.substr(o+1))}}function E(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)E(e,t[r],n[r])}else{var a,s,l=t.indexOf(".");-1!==l?(a=t.substr(0,l),""===(s=t.substr(l+1))?void 0===n?o(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n:E(l=(l=e[a])&&c(e,a)?l:e[a]={},s,n)):void 0===n?o(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function k(e){var t,n={};for(t in e)c(e,t)&&(n[t]=e[t]);return n}var D=[].concat;function S(e){return D.apply([],e)}var _="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(S([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return i[e]})),P=new Set(_.map((function(e){return i[e]}))),R=null;function T(e){return R=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var n=R.get(t);if(n)return n;if(o(t)){n=[],R.set(t,n);for(var r=0,i=t.length;r<i;++r)n.push(e(t[r]))}else if(P.has(t.constructor))n=t;else{var a,s=l(t);for(a in n=s===Object.prototype?{}:Object.create(s),R.set(t,n),t)c(t,a)&&(n[a]=e(t[a]))}return n}(e),R=null,e}var C={}.toString;function O(e){return C.call(e).slice(8,-1)}var N="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",I="symbol"==typeof N?function(e){var t;return null!=e&&(t=e[N])&&t.apply(e)}:function(){return null};function A(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var L={};function F(e){var t,n,r,i;if(1===arguments.length){if(o(e))return e.slice();if(this===L&&"string"==typeof e)return[e];if(i=I(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var M="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},j=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(le=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),B={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function U(e,t){this.name=e,this.message=t}function K(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function z(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=K(e,t)}function W(e,t){this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=K(e,this.failures)}p(U).from(Error).extend({toString:function(){return this.name+": "+this.message}}),p(z).from(U),p(W).from(U);var H=j.reduce((function(e,t){return e[t]=t+"Error",e}),{}),Y=U,G=j.reduce((function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=B[t]||n,this.inner=null)}return p(r).from(Y),e[t]=r,e}),{});G.Syntax=SyntaxError,G.Type=TypeError,G.Range=RangeError;var X=le.reduce((function(e,t){return e[t+"Error"]=G[t],e}),{}),V=j.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=G[t]),e}),{});function q(){}function $(e){return e}function Q(e,t){return null==e||e===$?t:function(n){return t(e(n))}}function Z(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function J(e,t){return e===q?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Z(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Z(i,this.onerror):i),void 0!==a?a:n}}function ee(e,t){return e===q?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Z(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Z(r,this.onerror):r)}}function te(e,t){return e===q?t:function(n){var r=e.apply(this,arguments);s(n,r);var i=this.onsuccess,a=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Z(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Z(a,this.onerror):a),void 0===r?void 0===n?void 0:n:s(r,n)}}function ne(e,t){return e===q?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function re(e,t){return e===q?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then((function(){return t.apply(r,a)}))}return t.apply(this,arguments)}}V.ModifyError=z,V.DexieError=U,V.BulkError=W;var ie="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ae(e){ie=e}var oe={},se=100,le=(_="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,l(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,l(t),e]}(),_[0]),ue=(j=_[1],_=_[2],j=j&&j.then,le&&le.constructor),ce=!!_,he=function(e,t){be.push([e,t]),de&&(queueMicrotask(Te),de=!1)},fe=!0,de=!0,pe=[],me=[],ge=$,ye={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:q,pgp:!1,env:{},finalize:q},ve=ye,be=[],xe=0,we=[];function Ee(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=ve;if("function"!=typeof e){if(e!==oe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Se(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n((function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Ce();n&&"function"==typeof n.then?e(t,(function(e,t){n instanceof Ee?n._then(e,t):n.then(e,t)})):(t._state=!0,t._value=n,_e(t)),r&&Oe()}}),Se.bind(null,t))}catch(n){Se(t,n)}}(this,e)}var ke={get:function(){var e=ve,t=Be;function n(n,r){var i=this,a=!e.global&&(e!==ve||t!==Be),o=a&&!We(),s=new Ee((function(t,s){Pe(i,new De(qe(n,e,a,o),qe(r,e,a,o),t,s,e))}));return this._consoleTask&&(s._consoleTask=this._consoleTask),s}return n.prototype=oe,n},set:function(e){d(this,"then",e&&e.prototype===oe?ke:{get:function(){return e},set:ke.set})}};function De(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Se(e,t){var n,r;me.push(t),null===e._state&&(n=e._lib&&Ce(),t=ge(t),e._state=!1,e._value=t,r=e,pe.some((function(e){return e._value===r._value}))||pe.push(r),_e(e),n&&Oe())}function _e(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Pe(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===xe&&(++xe,he((function(){0==--xe&&Ne()}),[]))}function Pe(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++xe,he(Re,[n,e,t])}else e._listeners.push(t)}function Re(e,t,n){try{var r,i=t._value;!t._state&&me.length&&(me=[]),r=ie&&t._consoleTask?t._consoleTask.run((function(){return e(i)})):e(i),t._state||-1!==me.indexOf(i)||function(e){for(var t=pe.length;t;)if(pe[--t]._value===e._value)return pe.splice(t,1)}(t),n.resolve(r)}catch(e){n.reject(e)}finally{0==--xe&&Ne(),--n.psd.ref||n.psd.finalize()}}function Te(){Ve(ye,(function(){Ce()&&Oe()}))}function Ce(){var e=fe;return de=fe=!1,e}function Oe(){var e,t,n;do{for(;0<be.length;)for(e=be,be=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<be.length);de=fe=!0}function Ne(){var e=pe;pe=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=we.slice(0),n=t.length;n;)t[--n]()}function Ie(e){return new Ee(oe,!1,e)}function Ae(e,t){var n=ve;return function(){var r=Ce(),i=ve;try{return Ge(n,!0),e.apply(this,arguments)}catch(r){t&&t(r)}finally{Ge(i,!1),r&&Oe()}}}h(Ee.prototype,{then:ke,_then:function(e,t){Pe(this,new De(null,null,e,t,ve))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return(e instanceof t?n:Ie)(e)})):this.then(null,(function(e){return(e&&e.name===t?n:Ie)(e)}))},finally:function(e){return this.then((function(t){return Ee.resolve(e()).then((function(){return t}))}),(function(t){return Ee.resolve(e()).then((function(){return Ie(t)}))}))},timeout:function(e,t){var n=this;return e<1/0?new Ee((function(r,i){var a=setTimeout((function(){return i(new G.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,a))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&d(Ee.prototype,Symbol.toStringTag,"Dexie.Promise"),ye.env=Xe(),h(Ee,{all:function(){var e=F.apply(null,arguments).map(He);return new Ee((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,a){return Ee.resolve(i).then((function(n){e[a]=n,--r||t(e)}),n)}))}))},resolve:function(e){return e instanceof Ee?e:e&&"function"==typeof e.then?new Ee((function(t,n){e.then(t,n)})):new Ee(oe,!0,e)},reject:Ie,race:function(){var e=F.apply(null,arguments).map(He);return new Ee((function(t,n){e.map((function(e){return Ee.resolve(e).then(t,n)}))}))},PSD:{get:function(){return ve},set:function(e){return ve=e}},totalEchoes:{get:function(){return Be}},newPSD:Ke,usePSD:Ve,scheduler:{get:function(){return he},set:function(e){he=e}},rejectionMapper:{get:function(){return ge},set:function(e){ge=e}},follow:function(e,t){return new Ee((function(n,r){return Ke((function(t,n){var r=ve;r.unhandleds=[],r.onunhandled=n,r.finalize=Z((function(){var e,r=this;e=function(){0===r.unhandleds.length?t():n(r.unhandleds[0])},we.push((function t(){e(),we.splice(we.indexOf(t),1)})),++xe,he((function(){0==--xe&&Ne()}),[])}),r.finalize),e()}),t,n,r)}))}}),ue&&(ue.allSettled&&d(Ee,"allSettled",(function(){var e=F.apply(null,arguments).map(He);return new Ee((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return Ee.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),ue.any&&"undefined"!=typeof AggregateError&&d(Ee,"any",(function(){var e=F.apply(null,arguments).map(He);return new Ee((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,a){return Ee.resolve(e).then((function(e){return t(e)}),(function(e){i[a]=e,--r||n(new AggregateError(i))}))}))}))})));var Le={awaits:0,echoes:0,id:0},Fe=0,Me=[],je=0,Be=0,Ue=0;function Ke(e,t,n,r){var i=ve,a=Object.create(i);return a.parent=i,a.ref=0,a.global=!1,a.id=++Ue,ye.env,a.env=ce?{Promise:Ee,PromiseProp:{value:Ee,configurable:!0,writable:!0},all:Ee.all,race:Ee.race,allSettled:Ee.allSettled,any:Ee.any,resolve:Ee.resolve,reject:Ee.reject}:{},t&&s(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Ve(a,e,n,r),0===a.ref&&a.finalize(),r}function ze(){return Le.id||(Le.id=++Fe),++Le.awaits,Le.echoes+=se,Le.id}function We(){return!!Le.awaits&&(0==--Le.awaits&&(Le.id=0),Le.echoes=Le.awaits*se,!0)}function He(e){return Le.echoes&&e&&e.constructor===ue?(ze(),e.then((function(e){return We(),e}),(function(e){return We(),Qe(e)}))):e}function Ye(){var e=Me[Me.length-1];Me.pop(),Ge(e,!1)}function Ge(e,t){var n,r=ve;(t?!Le.echoes||je++&&e===ve:!je||--je&&e===ve)||queueMicrotask(t?function(e){++Be,Le.echoes&&0!=--Le.echoes||(Le.echoes=Le.awaits=Le.id=0),Me.push(ve),Ge(e,!0)}.bind(null,e):Ye),e!==ve&&(ve=e,r===ye&&(ye.env=Xe()),ce&&(n=ye.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(i,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function Xe(){var e=i.Promise;return ce?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ve(e,t,n,r,i){var a=ve;try{return Ge(e,!0),t(n,r,i)}finally{Ge(a,!1)}}function qe(e,t,n,r){return"function"!=typeof e?e:function(){var i=ve;n&&ze(),Ge(t,!0);try{return e.apply(this,arguments)}finally{Ge(i,!1),r&&queueMicrotask(We)}}}function $e(e){Promise===ue&&0===Le.echoes?0===je?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+j).indexOf("[native code]")&&(ze=We=q);var Qe=Ee.reject,Ze=String.fromCharCode(65535),Je="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",et="String expected.",tt=[],nt="__dbnames",rt="readonly",it="readwrite";function at(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ot={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function st(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=T(t))[e],t}}function lt(){throw G.Type()}function ut(e,t){try{var n=ct(e),r=ct(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}(ht(e),ht(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var o=ut(e[a],t[a]);if(0!==o)return o}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function ct(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=O(e))?"binary":e}function ht(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ft=(dt.prototype._trans=function(e,t,n){var r=this._tx||ve.trans,i=this.name,a=ie&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function o(e,n,r){if(!r.schema[i])throw new G.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var s=Ce();try{var l=r&&r.db._novip===this.db._novip?r===ve.trans?r._promise(e,o,n):Ke((function(){return r._promise(e,o,n)}),{trans:r,transless:ve.transless||ve}):function t(n,r,i,a){if(n.idbdb&&(n._state.openComplete||ve.letThrough||n._vip)){var o=n._createTransaction(r,i,n._dbSchema);try{o.create(),n._state.PR1398_maxLoop=3}catch(e){return e.name===H.InvalidState&&n.isOpen()&&0<--n._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then((function(){return t(n,r,i,a)}))):Qe(e)}return o._promise(r,(function(e,t){return Ke((function(){return ve.trans=o,a(e,t,o)}))})).then((function(e){if("readwrite"===r)try{o.idbtrans.commit()}catch(e){}return"readonly"===r?e:o._completion.then((function(){return e}))}))}if(n._state.openComplete)return Qe(new G.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return Qe(new G.DatabaseClosed);n.open().catch(q)}return n._state.dbReadyPromise.then((function(){return t(n,r,i,a)}))}(this.db,e,[this.name],o);return a&&(l._consoleTask=a,l=l.catch((function(e){return console.trace(e),Qe(e)}))),l}finally{s&&Oe()}},dt.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Qe(new G.Type("Invalid argument to Table.get()")):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},dt.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(o(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=a(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){if(e.compound&&t.every((function(t){return 0<=e.keyPath.indexOf(t)}))){for(var n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1})).sort((function(e,t){return e.keyPath.length-t.keyPath.length}))[0];if(n&&this.db._maxKey!==Ze){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map((function(t){return e[t]})))}!n&&ie&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var i=this.schema.idxByName,s=this.db._deps.indexedDB;function l(e,t){return 0===s.cmp(e,t)}var u=t.reduce((function(t,n){var r=t[0],a=t[1],s=(t=i[n],e[n]);return[r||t,r||!t?at(a,t&&t.multi?function(e){return e=w(e,n),o(e)&&e.some((function(e){return l(s,e)}))}:function(e){return l(s,w(e,n))}):a]}),[null,null]);return r=u[0],u=u[1],r?this.where(r.name).equals(e[r.keyPath]).filter(u):n?this.filter(u):this.where(t).equals("")},dt.prototype.filter=function(e){return this.toCollection().and(e)},dt.prototype.count=function(e){return this.toCollection().count(e)},dt.prototype.offset=function(e){return this.toCollection().offset(e)},dt.prototype.limit=function(e){return this.toCollection().limit(e)},dt.prototype.each=function(e){return this.toCollection().each(e)},dt.prototype.toArray=function(e){return this.toCollection().toArray(e)},dt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},dt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,o(e)?"[".concat(e.join("+"),"]"):e))},dt.prototype.reverse=function(){return this.toCollection().reverse()},dt.prototype.mapToClass=function(t){var n,r=this.db,i=this.name;function a(){return null!==n&&n.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof lt&&(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(a,n=t),Object.defineProperty(a.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),a.prototype.table=function(){return i},t=a);for(var o=new Set,s=t.prototype;s;s=l(s))Object.getOwnPropertyNames(s).forEach((function(e){return o.add(e)}));function u(e){if(!e)return e;var n,r=Object.create(t.prototype);for(n in e)if(!o.has(n))try{r[n]=e[n]}catch(e){}return r}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook("reading",u),t},dt.prototype.defineClass=function(){return this.mapToClass((function(e){s(this,e)}))},dt.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,o=e;return a&&i&&(o=st(a)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[o]})})).then((function(e){return e.numFailures?Ee.reject(e.failures[0]):e.lastResult})).then((function(t){if(a)try{E(e,a,t)}catch(t){}return t}))},dt.prototype.update=function(e,t){return"object"!=typeof e||o(e)?this.where(":id").equals(e).modify(t):void 0===(e=w(e,this.schema.primKey.keyPath))?Qe(new G.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},dt.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,o=e;return a&&i&&(o=st(a)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[o],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?Ee.reject(e.failures[0]):e.lastResult})).then((function(t){if(a)try{E(e,a,t)}catch(t){}return t}))},dt.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Ee.reject(e.failures[0]):void 0}))},dt.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:ot})})).then((function(e){return e.numFailures?Ee.reject(e.failures[0]):void 0}))},dt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},dt.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=(s=r.schema.primKey).auto;if((s=s.keyPath)&&i)throw new G.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var o=e.length,s=s&&n?e.map(st(s)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:s,wantResults:a}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult;if(e=e.failures,0===t)return a?n:i;throw new W("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(o," operations failed"),e)}))}))},dt.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=(s=r.schema.primKey).auto;if((s=s.keyPath)&&i)throw new G.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var o=e.length,s=s&&n?e.map(st(s)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:s,wantResults:a}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult;if(e=e.failures,0===t)return a?n:i;throw new W("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(o," operations failed"),e)}))}))},dt.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map((function(e){return e.key})),i=e.map((function(e){return e.changes})),a=[];return this._trans("readwrite",(function(o){return n.getMany({trans:o,keys:r,cache:"clone"}).then((function(s){var l=[],u=[];e.forEach((function(e,n){var r=e.key,i=e.changes,o=s[n];if(o){for(var c=0,h=Object.keys(i);c<h.length;c++){var f=h[c],d=i[f];if(f===t.schema.primKey.keyPath){if(0!==ut(d,r))throw new G.Constraint("Cannot update primary key in bulkUpdate()")}else E(o,f,d)}a.push(n),l.push(r),u.push(o)}}));var c=l.length;return n.mutate({trans:o,type:"put",keys:l,values:u,updates:{keys:r,changeSpecs:i}}).then((function(e){var n=e.numFailures,r=e.failures;if(0===n)return c;for(var i=0,o=Object.keys(r);i<o.length;i++){var s,l=o[i],u=a[Number(l)];null!=u&&(s=r[l],delete r[l],r[u]=s)}throw new W("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(c," operations failed"),r)}))}))}))},dt.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult;if(e=e.failures,0===r)return i;throw new W("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),e)}))},dt);function dt(){}function pt(e){function t(t,r){if(r){for(var i=arguments.length,a=new Array(i-1);--i;)a[i-1]=arguments[i];return n[t].subscribe.apply(null,a),e}if("string"==typeof t)return n[t]}var n={};t.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return t;function s(e,r,i){if("object"!=typeof e){var l;r=r||ne;var u={subscribers:[],fire:i=i||q,subscribe:function(e){-1===u.subscribers.indexOf(e)&&(u.subscribers.push(e),u.fire=r(u.fire,e))},unsubscribe:function(e){u.subscribers=u.subscribers.filter((function(t){return t!==e})),u.fire=u.subscribers.reduce(r,i)}};return n[e]=t[e]=u}a(l=e).forEach((function(e){var t=l[e];if(o(t))s(e,l[e][0],l[e][1]);else{if("asap"!==t)throw new G.InvalidArgument("Invalid event config");var n=s(e,$,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){x((function(){e.apply(null,t)}))}))}))}}))}}function mt(e,t){return p(t).from({prototype:e}),t}function gt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function yt(e,t){e.filter=at(e.filter,t)}function vt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return at(r(),t())}:t,e.justLimit=n&&!r}function bt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new G.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function xt(e,t,n){var r=bt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function wt(e,t,n,r){var i=e.replayFilter?at(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},o=function(e,n,r){var o,s;i&&!i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))||("[object ArrayBuffer]"===(s=""+(o=n.primaryKey))&&(s=""+new Uint8Array(o)),c(a,s)||(a[s]=!0,t(e,n,r)))};return Promise.all([e.or._iterate(o,n),Et(xt(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Et(xt(e,r,n),at(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Et(e,t,n,r){var i=Ae(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=q}),(function(t){e.fail(t),n=q}))||i(e.value,e,(function(e){return n=e})),n()}))}))}_=Symbol();var kt=(Dt.prototype.execute=function(e){var t=null===(t=this.replacePrefix)||void 0===t?void 0:t[0];return t&&"string"==typeof e&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},Dt);function Dt(e){Object.assign(this,e)}var St=(_t.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Qe.bind(null,n.error)):n.table._trans("readonly",e).then(t)},_t.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Qe.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},_t.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=at(t.algorithm,e)},_t.prototype._iterate=function(e,t){return wt(this._ctx,e,t,this._ctx.table.core)},_t.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&s(n,e),t._ctx=n,t},_t.prototype.raw=function(){return this._ctx.valueMapper=null,this},_t.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return wt(t,e,n,t.table.core)}))},_t.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(gt(n,!0))return r.count({trans:e,query:{index:bt(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return wt(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},_t.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function a(e,t){return t?a(e[n[t]],t-1):e[r]}var o="next"===this._ctx.dir?1:-1;function s(e,t){return(e=a(e,i))<(t=a(t,i))?-o:t<e?o:0}return this.toArray((function(e){return e.sort(s)})).then(t)},_t.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&gt(n,!0)&&0<n.limit){var r=n.valueMapper,i=bt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){return e=e.result,r?e.map(r):e}))}var a=[];return wt(n,(function(e){return a.push(e)}),e,n.table.core).then((function(){return a}))}),e)},_t.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,gt(t)?vt(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?--t:n((function(){e.advance(t),t=0})),!1)}})):vt(t,(function(){var t=e;return function(){return--t<0}}))),this},_t.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),vt(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),0<=t}}),!0),this},_t.prototype.until=function(e,t){return yt(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},_t.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},_t.prototype.last=function(e){return this.reverse().first(e)},_t.prototype.filter=function(e){var t;return yt(this._ctx,(function(t){return e(t.value)})),(t=this._ctx).isMatch=at(t.isMatch,e),this},_t.prototype.and=function(e){return this.filter(e)},_t.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},_t.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},_t.prototype.desc=function(){return this.reverse()},_t.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},_t.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},_t.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},_t.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},_t.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&gt(t,!0)&&0<t.limit)return this._read((function(e){var n=bt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},_t.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},_t.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},_t.prototype.lastKey=function(e){return this.reverse().firstKey(e)},_t.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return yt(this._ctx,(function(e){var n=e.primaryKey.toString();return e=c(t,n),t[n]=!0,!e})),this},_t.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var i,o,s;function l(e,t){var n=t.failures;t=t.numFailures,m+=e-t;for(var r=0,i=a(n);r<i.length;r++){var o=i[r];p.push(n[o])}}s="function"==typeof e?e:(i=a(e),o=i.length,function(t){for(var n=!1,r=0;r<o;++r){var a=i[r],s=e[a],l=w(t,a);s instanceof kt?(E(t,a,s.execute(l)),n=!0):l!==s&&(E(t,a,s),n=!0)}return n});var u=n.table.core,c=u.schema.primaryKey,h=c.outbound,f=c.extractKey,d=t.db._options.modifyChunkSize||200,p=[],m=0,g=[];return t.clone().primaryKeys().then((function(t){function i(a){var o=Math.min(d,t.length-a);return u.getMany({trans:r,keys:t.slice(a,a+o),cache:"immutable"}).then((function(c){for(var p=[],m=[],g=h?[]:null,y=[],v=0;v<o;++v){var b=c[v],x={value:T(b),primKey:t[a+v]};!1!==s.call(x,x.value,x)&&(null==x.value?y.push(t[a+v]):h||0===ut(f(b),f(x.value))?(m.push(x.value),h&&g.push(t[a+v])):(y.push(t[a+v]),p.push(x.value)))}var w=gt(n)&&n.limit===1/0&&("function"!=typeof e||e===Pt)&&{index:n.index,range:n.range};return Promise.resolve(0<p.length&&u.mutate({trans:r,type:"add",values:p}).then((function(e){for(var t in e.failures)y.splice(parseInt(t),1);l(p.length,e)}))).then((function(){return(0<m.length||w&&"object"==typeof e)&&u.mutate({trans:r,type:"put",keys:g,values:m,criteria:w,changeSpec:"function"!=typeof e&&e}).then((function(e){return l(m.length,e)}))})).then((function(){return(0<y.length||w&&e===Pt)&&u.mutate({trans:r,type:"delete",keys:y,criteria:w}).then((function(e){return l(y.length,e)}))})).then((function(){return t.length>a+o&&i(a+d)}))}))}return i(0).then((function(){if(0<p.length)throw new z("Error modifying one or more objects",p,m,g);return t.length}))}))}))},_t.prototype.delete=function(){var e=this._ctx,t=e.range;return gt(e)&&(e.isPrimKey||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures;if(e.lastResult,e.results,e=e.numFailures)throw new z("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-e);return t-e}))}))})):this.modify(Pt)},_t);function _t(){}var Pt=function(e,t){return t.value=null};function Rt(e,t){return e<t?-1:e===t?0:1}function Tt(e,t){return t<e?-1:e===t?0:1}function Ct(e,t,n){return(e=e instanceof Lt?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function Ot(e){return new e.Collection(e,(function(){return At("")})).limit(0)}function Nt(e,t,n,r){var i,a,o,s,l,u,c,h=n.length;if(!n.every((function(e){return"string"==typeof e})))return Ct(e,et);function f(e){i="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},a="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},o="next"===e?Rt:Tt;var t=n.map((function(e){return{lower:a(e),upper:i(e)}})).sort((function(e,t){return o(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),c="next"===(u=e)?"":r}f("next"),(e=new e.Collection(e,(function(){return It(s[0],l[h-1]+r)})))._ondirectionchange=function(e){f(e)};var d=0;return e._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var f=a(i);if(t(f,l,d))return!0;for(var p=null,m=d;m<h;++m){var g=function(e,t,n,r,i,a){for(var o=Math.min(e.length,r.length),s=-1,l=0;l<o;++l){var u=t[l];if(u!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):0<=s?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[l],u)<0&&(s=l)}return o<r.length&&"next"===a?e+n.substr(e.length):o<e.length&&"prev"===a?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}(i,f,s[m],l[m],o,u);null===g&&null===p?d=m+1:(null===p||0<o(p,g))&&(p=g)}return n(null!==p?function(){e.continue(p+c)}:r),!1})),e}function It(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function At(e){return{type:1,lower:e,upper:e}}var Lt=(Object.defineProperty(Ft.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ft.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Ot(this):new this.Collection(this,(function(){return It(e,t,!n,!r)}))}catch(e){return Ct(this,Je)}},Ft.prototype.equals=function(e){return null==e?Ct(this,Je):new this.Collection(this,(function(){return At(e)}))},Ft.prototype.above=function(e){return null==e?Ct(this,Je):new this.Collection(this,(function(){return It(e,void 0,!0)}))},Ft.prototype.aboveOrEqual=function(e){return null==e?Ct(this,Je):new this.Collection(this,(function(){return It(e,void 0,!1)}))},Ft.prototype.below=function(e){return null==e?Ct(this,Je):new this.Collection(this,(function(){return It(void 0,e,!1,!0)}))},Ft.prototype.belowOrEqual=function(e){return null==e?Ct(this,Je):new this.Collection(this,(function(){return It(void 0,e)}))},Ft.prototype.startsWith=function(e){return"string"!=typeof e?Ct(this,et):this.between(e,e+Ze,!0,!0)},Ft.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Nt(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Ze)},Ft.prototype.equalsIgnoreCase=function(e){return Nt(this,(function(e,t){return e===t[0]}),[e],"")},Ft.prototype.anyOfIgnoreCase=function(){var e=F.apply(L,arguments);return 0===e.length?Ot(this):Nt(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},Ft.prototype.startsWithAnyOfIgnoreCase=function(){var e=F.apply(L,arguments);return 0===e.length?Ot(this):Nt(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Ze)},Ft.prototype.anyOf=function(){var e=this,t=F.apply(L,arguments),n=this._cmp;try{t.sort(n)}catch(r){return Ct(this,Je)}if(0===t.length)return Ot(this);var r=new this.Collection(this,(function(){return It(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,a){for(var o=e.key;0<n(o,t[i]);)if(++i===t.length)return r(a),!1;return 0===n(o,t[i])||(r((function(){e.continue(t[i])})),!1)})),r},Ft.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ft.prototype.noneOf=function(){var e=F.apply(L,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Ct(this,Je)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Ft.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,a=this._descending,o=this._min,s=this._max;if(0===e.length)return Ot(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return Ct(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",G.InvalidArgument);var l,u=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers,h=i;function f(e,t){return h(e[0],t[0])}try{(l=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var a=e[n];if(r(t[0],a[1])<0&&0<r(t[1],a[0])){a[0]=o(a[0],t[0]),a[1]=s(a[1],t[1]);break}}return n===i&&e.push(t),e}),[])).sort(f)}catch(e){return Ct(this,Je)}var d=0,p=c?function(e){return 0<i(e,l[d][1])}:function(e){return 0<=i(e,l[d][1])},m=u?function(e){return 0<a(e,l[d][0])}:function(e){return 0<=a(e,l[d][0])},g=p;return(e=new this.Collection(this,(function(){return It(l[0][0],l[l.length-1][1],!u,!c)})))._ondirectionchange=function(e){h="next"===e?(g=p,i):(g=m,a),l.sort(f)},e._addAlgorithm((function(e,t,r){for(var a,o=e.key;g(o);)if(++d===l.length)return t(r),!1;return!p(a=o)&&!m(a)||(0===n._cmp(o,l[d][1])||0===n._cmp(o,l[d][0])||t((function(){h===i?e.continue(l[d][0]):e.continue(l[d][1])})),!1)})),e},Ft.prototype.startsWithAnyOf=function(){var e=F.apply(L,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?Ot(this):this.inAnyRange(e.map((function(e){return[e,e+Ze]}))):Ct(this,"startsWithAnyOf() only works with strings")},Ft);function Ft(){}function Mt(e){return Ae((function(t){return jt(t),e(t.target.error),!1}))}function jt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Bt="storagemutated",Ut="x-storagemutated-1",Kt=pt(null,Bt),zt=(Wt.prototype._lock=function(){return b(!ve.global),++this._reculock,1!==this._reculock||ve.global||(ve.lockOwnerFor=this),this},Wt.prototype._unlock=function(){if(b(!ve.global),0==--this._reculock)for(ve.global||(ve.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ve(e[1],e[0])}catch(e){}}return this},Wt.prototype._locked=function(){return this._reculock&&ve.lockOwnerFor!==this},Wt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new G.DatabaseClosed(r);case"MissingAPIError":throw new G.MissingAPI(r.message,r);default:throw new G.OpenFailed(r)}if(!this.active)throw new G.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ae((function(n){jt(n),t._reject(e.error)})),e.onabort=Ae((function(n){jt(n),t.active&&t._reject(new G.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=Ae((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Kt.storagemutated.fire(e.mutatedParts)})),this},Wt.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Qe(new G.ReadOnly("Transaction is readonly"));if(!this.active)return Qe(new G.TransactionInactive);if(this._locked())return new Ee((function(i,a){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,a)},ve])}));if(n)return Ke((function(){var e=new Ee((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new Ee((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},Wt.prototype._root=function(){return this.parent?this.parent._root():this},Wt.prototype.waitFor=function(e){var t,n=this._root(),r=Ee.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then((function(){return r})):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}());var i=n._waitingFor;return new Ee((function(e,t){r.then((function(t){return n._waitingQueue.push(Ae(e.bind(null,t)))}),(function(e){return n._waitingQueue.push(Ae(t.bind(null,e)))})).finally((function(){n._waitingFor===i&&(n._waitingFor=null)}))}))},Wt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new G.Abort))},Wt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(c(t,e))return t[e];var n=this.schema[e];if(!n)throw new G.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},Wt);function Wt(){}function Ht(e,t,n,r,i,a,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Yt(t)}}function Yt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Gt(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(e){return[e.name,e]},n.reduce((function(e,t,n){return(n=r(t,n))&&(e[n[0]]=n[1]),e}),{}))};var r}var Xt=function(e){try{return e.only([[]]),Xt=function(){return[[]]},[[]]}catch(e){return Xt=function(){return Ze},Ze}};function Vt(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return w(e,t)}:function(t){return w(t,e)};var t}function qt(e){return[].slice.call(e)}var $t=0;function Qt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Zt(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen;return e=e.upperOpen,void 0===n?void 0===r?null:t.upperBound(r,!!e):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!e)}function i(e){var t,n=e.name;return{name:n,schema:e,mutate:function(e){var t=e.trans,i=e.type,a=e.keys,o=e.values,s=e.range;return new Promise((function(e,l){e=Ae(e);var u=t.objectStore(n),c=null==u.keyPath,h="put"===i||"add"===i;if(!h&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var f,d=(a||o||{length:1}).length;if(a&&o&&a.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===d)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function p(e){++y,jt(e)}var m=[],g=[],y=0;if("deleteRange"===i){if(4===s.type)return e({numFailures:y,failures:g,results:[],lastResult:void 0});3===s.type?m.push(f=u.clear()):m.push(f=u.delete(r(s)))}else{var v=(c=h?c?[o,a]:[o,null]:[a,null])[0],b=c[1];if(h)for(var x=0;x<d;++x)m.push(f=b&&void 0!==b[x]?u[i](v[x],b[x]):u[i](v[x])),f.onerror=p;else for(x=0;x<d;++x)m.push(f=u[i](v[x])),f.onerror=p}function w(t){t=t.target.result,m.forEach((function(e,t){return null!=e.error&&(g[t]=e.error)})),e({numFailures:y,failures:g,results:"delete"===i?a:m.map((function(e){return e.result})),lastResult:t})}f.onerror=function(e){p(e),w(e)},f.onsuccess=w}))},getMany:function(e){var t=e.trans,r=e.keys;return new Promise((function(e,i){e=Ae(e);for(var a,o=t.objectStore(n),s=r.length,l=new Array(s),u=0,c=0,h=function(t){t=t.target,l[t._pos]=t.result,++c===u&&e(l)},f=Mt(i),d=0;d<s;++d)null!=r[d]&&((a=o.get(r[d]))._pos=d,a.onsuccess=h,a.onerror=f,++u);0===u&&e(l)}))},get:function(e){var t=e.trans,r=e.key;return new Promise((function(e,i){e=Ae(e);var a=t.objectStore(n).get(r);a.onsuccess=function(t){return e(t.target.result)},a.onerror=Mt(i)}))},query:(t=c,function(e){return new Promise((function(i,a){i=Ae(i);var o,s,l,u=e.trans,c=e.values,h=e.limit,f=e.query,d=h===1/0?void 0:h,p=f.index;if(f=f.range,u=u.objectStore(n),p=p.isPrimaryKey?u:u.index(p.name),f=r(f),0===h)return i({result:[]});t?((d=c?p.getAll(f,d):p.getAllKeys(f,d)).onsuccess=function(e){return i({result:e.target.result})},d.onerror=Mt(a)):(o=0,s=!c&&"openKeyCursor"in p?p.openKeyCursor(f):p.openCursor(f),l=[],s.onsuccess=function(e){var t=s.result;return t?(l.push(c?t.value:t.primaryKey),++o===h?i({result:l}):void t.continue()):i({result:l})},s.onerror=Mt(a))}))}),openCursor:function(e){var t=e.trans,i=e.values,a=e.query,o=e.reverse,s=e.unique;return new Promise((function(e,l){e=Ae(e);var u=a.index,c=a.range,h=t.objectStore(n),f=(h=u.isPrimaryKey?h:h.index(u.name),u=o?s?"prevunique":"prev":s?"nextunique":"next",!i&&"openKeyCursor"in h?h.openKeyCursor(r(c),u):h.openCursor(r(c),u));f.onerror=Mt(l),f.onsuccess=Ae((function(n){var r,i,a,o,s=f.result;s?(s.___id=++$t,s.done=!1,r=s.continue.bind(s),i=(i=s.continuePrimaryKey)&&i.bind(s),a=s.advance.bind(s),o=function(){throw new Error("Cursor not stopped")},s.trans=t,s.stop=s.continue=s.continuePrimaryKey=s.advance=function(){throw new Error("Cursor not started")},s.fail=Ae(l),s.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},s.start=function(e){function t(){if(f.result)try{e()}catch(e){s.fail(e)}else s.done=!0,s.start=function(){throw new Error("Cursor behind last entry")},s.stop()}var n=new Promise((function(e,t){e=Ae(e),f.onerror=Mt(t),s.fail=t,s.stop=function(t){s.stop=s.continue=s.continuePrimaryKey=s.advance=o,e(t)}}));return f.onsuccess=Ae((function(e){f.onsuccess=t,t()})),s.continue=r,s.continuePrimaryKey=i,s.advance=a,t(),n},e(s)):e(null)}),l)}))},count:function(e){var t=e.query,i=e.trans,a=t.index,o=t.range;return new Promise((function(e,t){var s=i.objectStore(n),l=a.isPrimaryKey?s:s.index(a.name);(l=(s=r(o))?l.count(s):l.count()).onsuccess=Ae((function(t){return e(t.target.result)})),l.onerror=Mt(t)}))}}}var a,s,l,u=(s=n,l=qt((a=e).objectStoreNames),{schema:{name:a.name,tables:l.map((function(e){return s.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=o(t),i={};return n={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Vt(t)},indexes:qt(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry;return e=e.keyPath,r={name:t,compound:o(e),keyPath:e,unique:n,multiEntry:r,extractKey:Vt(e)},i[Qt(e)]=r})),getIndexByKeyPath:function(e){return i[Qt(e)]}},i[":id"]=n.primaryKey,null!=t&&(i[Qt(t)]=n.primaryKey),n}))},hasGetAll:0<l.length&&"getAll"in s.objectStore(l[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),c=(n=u.schema,u.hasGetAll),h=(u=n.tables.map(i),{});return u.forEach((function(e){return h[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!h[e])throw new Error("Table '".concat(e,"' not found"));return h[e]},MIN_KEY:-1/0,MAX_KEY:Xt(t),schema:n}}function Jt(e,n,r,i){var a=r.IDBKeyRange;return r.indexedDB,{dbcore:(i=Zt(n,a,i),e.dbcore.reduce((function(e,n){return n=n.create,t(t({},e),n(e))}),i))}}function en(e,t){var n=t.db;t=Jt(e._middlewares,n,e._deps,t),e.core=t.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function tn(e,t,n,r){n.forEach((function(n){var i=r[n];t.forEach((function(t){var r=function e(t,n){return m(t,n)||(t=l(t))&&e(t,n)}(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?d(t,n,{get:function(){return this.table(n)},set:function(e){f(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))}))}))}function nn(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function rn(e,t){return e._cfg.version-t._cfg.version}function an(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=Gt("$meta",dn("")[0],[]),e._storeNames.push("$meta"));var o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var s=o._reject.bind(o),l=ve.transless||ve;Ke((function(){return ve.trans=o,ve.transless=l,0!==t?(en(e,n),u=t,((r=o).storeNames.includes("$meta")?r.table("$meta").get("version").then((function(e){return null!=e?e:u})):Ee.resolve(u)).then((function(t){return i=t,s=o,l=n,u=[],t=(r=e)._versions,c=r._dbSchema=hn(0,r.idbdb,l),0!==(t=t.filter((function(e){return e._cfg.version>=i}))).length?(t.forEach((function(e){u.push((function(){var t=c,n=e._cfg.dbschema;fn(r,t,l),fn(r,n,l),c=r._dbSchema=n;var o=sn(t,n);o.add.forEach((function(e){ln(l,e[0],e[1].primKey,e[1].indexes)})),o.change.forEach((function(e){if(e.recreate)throw new G.Upgrade("Not yet support for changing primary key");var t=l.objectStore(e.name);e.add.forEach((function(e){return cn(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),cn(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var u=e._cfg.contentUpgrade;if(u&&e._cfg.version>i){en(r,l),s._memoizedTables={};var h=k(n);o.del.forEach((function(e){h[e]=t[e]})),nn(r,[r.Transaction.prototype]),tn(r,[r.Transaction.prototype],a(h),h),s.schema=h;var f,d=M(u);return d&&ze(),o=Ee.follow((function(){var e;(f=u(s))&&d&&(e=We.bind(null,null),f.then(e,e))})),f&&"function"==typeof f.then?Ee.resolve(f):o.then((function(){return f}))}})),u.push((function(t){var n,i,a=e._cfg.dbschema;n=a,i=t,[].slice.call(i.db.objectStoreNames).forEach((function(e){return null==n[e]&&i.db.deleteObjectStore(e)})),nn(r,[r.Transaction.prototype]),tn(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),s.schema=r._dbSchema})),u.push((function(t){r.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(r.idbdb.version/10)===e._cfg.version?(r.idbdb.deleteObjectStore("$meta"),delete r._dbSchema.$meta,r._storeNames=r._storeNames.filter((function(e){return"$meta"!==e}))):t.objectStore("$meta").put(e._cfg.version,"version"))}))})),function e(){return u.length?Ee.resolve(u.shift()(s.idbtrans)).then(e):Ee.resolve()}().then((function(){un(c,l)}))):Ee.resolve();var r,i,s,l,u,c})).catch(s)):(a(i).forEach((function(e){ln(n,e,i[e].primKey,i[e].indexes)})),en(e,n),void Ee.follow((function(){return e.on.populate.fire(o)})).catch(s));var r,u}))}function on(e,t){un(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=hn(0,e.idbdb,t);fn(e,e._dbSchema,t);for(var r=0,i=sn(n,e._dbSchema).change;r<i.length;r++){var a=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=t.objectStore(e.name);e.add.forEach((function(t){ie&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),cn(n,t)}))}(i[r]);if("object"==typeof a)return a.value}}function sn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],a=t[n];if(i){var o={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)o.recreate=!0,r.change.push(o);else{var s=i.idxByName,l=a.idxByName,u=void 0;for(u in s)l[u]||o.del.push(u);for(u in l){var c=s[u],h=l[u];c?c.src!==h.src&&o.change.push(h):o.add.push(h)}(0<o.del.length||0<o.add.length||0<o.change.length)&&r.change.push(o)}}else r.add.push([n,a])}return r}function ln(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return cn(i,e)})),i}function un(e,t){a(e).forEach((function(n){t.db.objectStoreNames.contains(n)||(ie&&console.debug("Dexie: Creating missing table",n),ln(t,n,e[n].primKey,e[n].indexes))}))}function cn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function hn(e,t,n){var r={};return y(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=Ht(Yt(s=t.keyPath),s||"",!0,!1,!!t.autoIncrement,s&&"string"!=typeof s,!0),a=[],o=0;o<t.indexNames.length;++o){var s=(l=t.index(t.indexNames[o])).keyPath,l=Ht(l.name,s,!!l.unique,!!l.multiEntry,!1,s&&"string"!=typeof s,!1);a.push(l)}r[e]=Gt(e,i,a)})),r}function fn(e,t,n){for(var r=n.db.objectStoreNames,a=0;a<r.length;++a){var o=r[a],s=n.objectStore(o);e._hasGetAll="getAll"in s;for(var l=0;l<s.indexNames.length;++l){var u=s.indexNames[l],c=s.index(u).keyPath,h="string"==typeof c?c:"["+y(c).join("+")+"]";!t[o]||(c=t[o].idxByName[h])&&(c.name=u,delete t[o].idxByName[h],t[o].idxByName[u]=c)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function dn(e){return e.split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Ht(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),o(r),0===t)}))}var pn=(mn.prototype._parseStoresSpec=function(e,t){a(e).forEach((function(n){if(null!==e[n]){var r=dn(e[n]),i=r.shift();if(i.unique=!0,i.multi)throw new G.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new G.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new G.Schema("Index must have a name and cannot be an empty string")})),t[n]=Gt(n,i,r)}}))},mn.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e,e=t._versions;var n={},r={};return e.forEach((function(e){s(n,e._cfg.storesSource),r=e._cfg.dbschema={},e._parseStoresSpec(n,r)})),t._dbSchema=r,nn(t,[t._allTables,t,t.Transaction.prototype]),tn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],a(r),r),t._storeNames=a(r),this},mn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=re(this._cfg.contentUpgrade||q,e),this},mn);function mn(){}function gn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new tr(nt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function yn(e){return e&&"function"==typeof e.databases}function vn(e){return Ke((function(){return ve.letThrough=!0,e()}))}function bn(e){return!("from"in e)}var xn=function(e,t){if(!this){var n=new xn;return e&&"d"in e&&s(n,e),n}s(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function wn(e,t,n){var r=ut(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(bn(e))return s(e,{from:t,to:n,d:1});var i=e.l;if(r=e.r,ut(n,e.from)<0)return i?wn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Sn(e);if(0<ut(t,e.to))return r?wn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Sn(e);ut(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<ut(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&En(e,i),r&&n&&En(e,r)}}function En(e,t){bn(t)||function e(t,n){var r=n.from,i=n.to,a=n.l;n=n.r,wn(t,r,i),a&&e(t,a),n&&e(t,n)}(e,t)}function kn(e,t){var n=Dn(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=Dn(e),o=a.next(i.from),s=o.value;!r.done&&!o.done;){if(ut(s.from,i.to)<=0&&0<=ut(s.to,i.from))return!0;ut(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(o=a.next(i.from)).value}return!1}function Dn(e){var t=bn(e)?null:{s:0,n:e};return{next:function(e){for(var n=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&ut(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||ut(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Sn(e){var n,r,i=((null===(n=e.r)||void 0===n?void 0:n.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),a=1<i?"r":i<-1?"l":"";a&&(n="r"==a?"l":"r",r=t({},e),i=e[a],e.from=i.from,e.to=i.to,e[a]=i[a],r[a]=i[n],(e[n]=r).d=_n(r)),e.d=_n(e)}function _n(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Pn(e,t){return a(t).forEach((function(n){e[n]?En(e[n],t[n]):e[n]=function e(t){var n,r,i={};for(n in t)c(t,n)&&(r=t[n],i[n]=!r||"object"!=typeof r||P.has(r.constructor)?r:e(r));return i}(t[n])})),e}function Rn(e,t){return e.all||t.all||Object.keys(e).some((function(n){return t[n]&&kn(t[n],e[n])}))}h(xn.prototype,((j={add:function(e){return En(this,e),this},addKey:function(e){return wn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return wn(t,e,e)})),this}})[N]=function(){return Dn(this)},j));var Tn={},Cn={},On=!1;function Nn(e){Pn(Cn,e),On||(On=!0,setTimeout((function(){On=!1,In(Cn,!(Cn={}))}),0))}function In(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(Tn);r<i.length;r++)An(o=i[r],e,n,t);else for(var a in e){var o,s=/^idb\:\/\/(.*)\/(.*)\//.exec(a);s&&(a=s[1],s=s[2],(o=Tn["idb://".concat(a,"/").concat(s)])&&An(o,e,n,t))}n.forEach((function(e){return e()}))}function An(e,t,n,r){for(var i=[],a=0,o=Object.entries(e.queries.query);a<o.length;a++){for(var s=o[a],l=s[0],u=[],c=0,h=s[1];c<h.length;c++){var f=h[c];Rn(t,f.obsSet)?f.subscribers.forEach((function(e){return n.add(e)})):r&&u.push(f)}r&&i.push([l,u])}if(r)for(var d=0,p=i;d<p.length;d++){var m=p[d];l=m[0],u=m[1],e.queries.query[l]=u}}function Ln(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?Qe(t.dbOpenError):e}));t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),o=!1;function s(){if(t.openCanceller!==r)throw new G.DatabaseClosed("db.open() was cancelled")}function l(){return new Ee((function(r,u){if(s(),!n)throw new G.MissingAPI;var c=e.name,d=t.autoSchema||!i?n.open(c):n.open(c,i);if(!d)throw new G.MissingAPI;d.onerror=Mt(u),d.onblocked=Ae(e._fireOnBlocked),d.onupgradeneeded=Ae((function(r){var i;h=d.transaction,t.autoSchema&&!e._options.allowEmptyDB?(d.onerror=jt,h.abort(),d.result.close(),(i=n.deleteDatabase(c)).onsuccess=i.onerror=Ae((function(){u(new G.NoSuchDatabase("Database ".concat(c," doesnt exist")))}))):(h.onerror=Mt(u),r=r.oldVersion>Math.pow(2,62)?0:r.oldVersion,f=r<1,e.idbdb=d.result,o&&on(e,h),an(e,r/10,h,u))}),u),d.onsuccess=Ae((function(){h=null;var n,s,u,p,m,g=e.idbdb=d.result,v=y(g.objectStoreNames);if(0<v.length)try{var b=g.transaction(1===(p=v).length?p[0]:p,"readonly");if(t.autoSchema)s=g,u=b,(n=e).verno=s.version/10,u=n._dbSchema=hn(0,s,u),n._storeNames=y(s.objectStoreNames,0),tn(n,[n._allTables],a(u),u);else if(fn(e,e._dbSchema,b),((m=sn(hn(0,(m=e).idbdb,b),m._dbSchema)).add.length||m.change.some((function(e){return e.add.length||e.change.length})))&&!o)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),g.close(),i=g.version+1,o=!0,r(l());en(e,b)}catch(n){}tt.push(e),g.onversionchange=Ae((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),g.onclose=Ae((function(t){e.on("close").fire(t)})),f&&(m=e._deps,b=c,g=m.indexedDB,m=m.IDBKeyRange,yn(g)||b===nt||gn(g,m).put({name:b}).catch(q)),r()}),u)})).catch((function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),l();break;case"VersionError":if(0<i)return i=0,l()}return Ee.reject(e)}))}var u,c=t.dbReadyResolve,h=null,f=!1;return Ee.race([r,("undefined"==typeof navigator?Ee.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(e){function t(){return indexedDB.databases().finally(e)}u=setInterval(t,100),t()})).finally((function(){return clearInterval(u)})):Promise.resolve()).then(l)]).then((function(){return s(),t.onReadyBeingFired=[],Ee.resolve(vn((function(){return e.on.ready.fire(e.vip)}))).then((function n(){if(0<t.onReadyBeingFired.length){var r=t.onReadyBeingFired.reduce(re,q);return t.onReadyBeingFired=[],Ee.resolve(vn((function(){return r(e.vip)}))).then(n)}}))})).finally((function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)})).catch((function(n){t.dbOpenError=n;try{h&&h.abort()}catch(n){}return r===t.openCanceller&&e._close(),Qe(n)})).finally((function(){t.openComplete=!0,c()})).then((function(){var t;return f&&(t={},e.tables.forEach((function(n){n.schema.indexes.forEach((function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new xn(-1/0,[[[]]]))})),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new xn(-1/0,[[[]]])})),Kt(Bt).fire(t),In(t,!0)),e}))}function Fn(e){function t(t){return e.next(t)}var n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t);return t=i.value,i.done?t:t&&"function"==typeof t.then?t.then(n,r):o(t)?Promise.all(t).then(n,r):n(t)}}return i(t)()}function Mn(e,t,n){for(var r=o(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var jn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(n){var r=e.table(n),i=r.schema,a={},o=[];function s(e,n,r){var i=Qt(e),l=a[i]=a[i]||[],u=null==e?0:"string"==typeof e?1:e.length,c=0<n;return c=t(t({},r),{name:c?"".concat(i,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:c,keyTail:n,keyLength:u,extractKey:Vt(e),unique:!c&&r.unique}),l.push(c),c.isPrimaryKey||o.push(c),1<u&&s(2===u?e[0]:e.slice(0,u-1),n+1,r),l.sort((function(e,t){return e.keyTail-t.keyTail})),c}n=s(i.primaryKey.keyPath,0,i.primaryKey),a[":id"]=[n];for(var l=0,u=i.indexes;l<u.length;l++){var c=u[l];s(c.keyPath,0,c)}function h(n){var r,i=n.query.index;return i.isVirtual?t(t({},n),{query:{index:i.lowLevelIndex,range:(r=n.query.range,i=i.keyTail,{type:1===r.type?2:r.type,lower:Mn(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Mn(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):n}return t(t({},r),{schema:t(t({},i),{primaryKey:n,indexes:o,getIndexByKeyPath:function(e){return(e=a[Qt(e)])&&e[0]}}),count:function(e){return r.count(h(e))},query:function(e){return r.query(h(e))},openCursor:function(t){var n=t.query.index,i=n.keyTail,a=n.isVirtual,o=n.keyLength;return a?r.openCursor(h(t)).then((function(e){return e&&s(e)})):r.openCursor(t);function s(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Mn(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,o).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Mn(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===o?e[0]:e.slice(0,o)}},value:{get:function(){return n.value}}})}}})}})}};function Bn(e,t,n,r){return n=n||{},r=r||"",a(e).forEach((function(i){var a,o,s;c(t,i)?(a=e[i],o=t[i],"object"==typeof a&&"object"==typeof o&&a&&o?(s=O(a))!==O(o)?n[r+i]=t[i]:"Object"===s?Bn(a,o,n,r+i+"."):a!==o&&(n[r+i]=t[i]):a!==o&&(n[r+i]=t[i])):n[r+i]=void 0})),a(t).forEach((function(i){c(e,i)||(n[r+i]=t[i])})),n}function Un(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Kn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(n){var i=e.table(n),a=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var o=ve.trans,s=o.table(n).hook,l=s.deleting,u=s.creating,h=s.updating;switch(e.type){case"add":if(u.fire===q)break;return o._promise("readwrite",(function(){return f(e)}),!0);case"put":if(u.fire===q&&h.fire===q)break;return o._promise("readwrite",(function(){return f(e)}),!0);case"delete":if(l.fire===q)break;return o._promise("readwrite",(function(){return f(e)}),!0);case"deleteRange":if(l.fire===q)break;return o._promise("readwrite",(function(){return function e(n,r,o){return i.query({trans:n,values:!1,query:{index:a,range:r},limit:o}).then((function(i){var a=i.result;return f({type:"delete",keys:a,trans:n}).then((function(i){return 0<i.numFailures?Promise.reject(i.failures[0]):a.length<o?{failures:[],numFailures:0,lastResult:void 0}:e(n,t(t({},r),{lower:a[a.length-1],lowerOpen:!0}),o)}))}))}(e.trans,e.range,1e4)}),!0)}return i.mutate(e);function f(e){var n,o,s,f=ve.trans,d=e.keys||Un(a,e);if(!d)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:d}):t({},e)).type&&(e.values=r([],e.values,!0)),e.keys&&(e.keys=r([],e.keys,!0)),n=i,s=d,("add"===(o=e).type?Promise.resolve([]):n.getMany({trans:o.trans,keys:s,cache:"immutable"})).then((function(t){var n=d.map((function(n,r){var i,o,s,d=t[r],p={onerror:null,onsuccess:null};return"delete"===e.type?l.fire.call(p,n,d,f):"add"===e.type||void 0===d?(i=u.fire.call(p,n,e.values[r],f),null==n&&null!=i&&(e.keys[r]=n=i,a.outbound||E(e.values[r],a.keyPath,n))):(i=Bn(d,e.values[r]),(o=h.fire.call(p,i,n,d,f))&&(s=e.values[r],Object.keys(o).forEach((function(e){c(s,e)?s[e]=o[e]:E(s,e,o[e])})))),p}));return i.mutate(e).then((function(r){for(var i=r.failures,a=r.results,o=r.numFailures,s=(r=r.lastResult,0);s<d.length;++s){var l=(a||d)[s],u=n[s];null==l?u.onerror&&u.onerror(i[s]):u.onsuccess&&u.onsuccess("put"===e.type&&t[s]?e.values[s]:l)}return{failures:i,results:a,numFailures:o,lastResult:r}})).catch((function(e){return n.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}}})}})}};function zn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)0===ut(t.keys[i],e[a])&&(r.push(n?T(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch(e){return null}}var Wn={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var r=e.table(n);return t(t({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=zn(e.keys,e.trans._cache,"clone"===e.cache);return t?Ee.resolve(t):r.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?T(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function Hn(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Yn(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Gn={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,r=new xn(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,n,r){if(ve.subscr&&"readonly"!==n)throw new G.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ve.querier));return e.transaction(t,n,r)},table:function(i){var s=e.table(i),l=s.schema,u=l.primaryKey,c=l.indexes,h=u.extractKey,f=u.outbound,d=u.autoIncrement&&c.filter((function(e){return e.compound&&e.keyPath.includes(u.keyPath)})),p=t(t({},s),{mutate:function(e){function t(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),p[e]||(p[e]=new xn)}var a,c,h,f=e.trans,p=e.mutatedParts||(e.mutatedParts={}),m=t(""),g=t(":dels"),y=e.type,v="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[Un(u,e).filter((function(e){return e})),e.values]:[],b=v[0],x=v[1];return v=e.trans._cache,o(b)?(m.addKeys(b),(v="delete"===y||b.length===x.length?zn(b,v):null)||g.addKeys(b),(v||x)&&(a=t,c=v,h=x,l.indexes.forEach((function(e){var t=a(e.name||"");function n(t){return null!=t?e.extractKey(t):null}function r(n){return e.multiEntry&&o(n)?n.forEach((function(e){return t.addKey(e)})):t.addKey(n)}(c||h).forEach((function(e,t){var i=c&&n(c[t]);0!==ut(i,t=h&&n(h[t]))&&(null!=i&&r(i),null!=t&&r(t))}))})))):b?(x={from:b.lower,to:b.upper},g.add(x),m.add(x)):(m.add(r),g.add(r),l.indexes.forEach((function(e){return t(e.name).add(r)}))),s.mutate(e).then((function(n){return!b||"add"!==e.type&&"put"!==e.type||(m.addKeys(n.results),d&&d.forEach((function(r){var i=e.values.map((function(e){return r.extractKey(e)})),a=r.keyPath.findIndex((function(e){return e===u.keyPath}));n.results.forEach((function(e){return i[a]=e})),t(r.name).addKeys(i)}))),f.mutatedParts=Pn(f.mutatedParts||{},p),n}))}}),m=(c=function(t){t=(n=t.query).index;var n=n.range;return[t,new xn(null!==(t=n.lower)&&void 0!==t?t:e.MIN_KEY,null!==(n=n.upper)&&void 0!==n?n:e.MAX_KEY)]},{get:function(e){return[u,new xn(e.key)]},getMany:function(e){return[u,(new xn).addKeys(e.keys)]},count:c,query:c,openCursor:c});return a(m).forEach((function(e){p[e]=function(a){var o=!!(p=ve.subscr),l=Hn(ve,s)&&Yn(e,a)?a.obsSet={}:p;if(o){var u=function(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),l[e]||(l[e]=new xn)},c=u(""),d=u(":dels"),p=(o=(p=m[e](a))[0],p[1]);if(("query"===e&&o.isPrimaryKey&&!a.values?d:u(o.name||"")).add(p),!o.isPrimaryKey){if("count"!==e){var g="query"===e&&f&&a.values&&s.query(t(t({},a),{values:!1}));return s[e].apply(this,arguments).then((function(t){if("query"===e){if(f&&a.values)return g.then((function(e){return e=e.result,c.addKeys(e),t}));var n=a.values?t.result.map(h):t.result;(a.values?c:d).addKeys(n)}else if("openCursor"===e){var r=t,i=a.values;return r&&Object.create(r,{key:{get:function(){return d.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return d.addKey(e),e}},value:{get:function(){return i&&c.addKey(r.primaryKey),r.value}}})}return t}))}d.add(r)}}return s[e].apply(this,arguments)}})),p}})}};function Xn(e,n,r){if(0===r.numFailures)return n;if("deleteRange"===n.type)return null;var i=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===i?null:(n=t({},n),o(n.keys)&&(n.keys=n.keys.filter((function(e,t){return!(t in r.failures)}))),"values"in n&&o(n.values)&&(n.values=n.values.filter((function(e,t){return!(t in r.failures)}))),n)}function Vn(e,t){return n=e,(void 0===(r=t).lower||(r.lowerOpen?0<ut(n,r.lower):0<=ut(n,r.lower)))&&(void 0===t.upper||(t.upperOpen?ut(e,t.upper)<0:ut(e,t.upper)<=0));var n,r}function qn(e,t,n,r,i,a){if(!n||0===n.length)return e;var s=t.query.index,l=s.multiEntry,u=t.query.range,c=r.schema.primaryKey.extractKey,h=s.extractKey,f=(s.lowLevelIndex||s).extractKey;return n=n.reduce((function(e,n){var r=e,i="add"===n.type||"put"===n.type?n.values.filter((function(e){return e=h(e),l&&o(e)?e.some((function(e){return Vn(e,u)})):Vn(e,u)})).map((function(e){return e=T(e),a&&Object.freeze(e),e})):[];switch(n.type){case"add":r=e.concat(t.values?i:i.map((function(e){return c(e)})));break;case"put":var s=(new xn).addKeys(n.values.map((function(e){return c(e)})));r=e.filter((function(e){return e=t.values?c(e):e,!kn(new xn(e),s)})).concat(t.values?i:i.map((function(e){return c(e)})));break;case"delete":var f=(new xn).addKeys(n.keys);r=e.filter((function(e){return e=t.values?c(e):e,!kn(new xn(e),f)}));break;case"deleteRange":var d=n.range;r=e.filter((function(e){return!Vn(c(e),d)}))}return r}),e),n===e?e:(n.sort((function(e,t){return ut(f(e),f(t))||ut(c(e),c(t))})),t.limit&&t.limit<1/0&&(n.length>t.limit?n.length=t.limit:e.length===t.limit&&n.length<t.limit&&(i.dirty=!0)),a?Object.freeze(n):n)}function $n(e,t){return 0===ut(e.lower,t.lower)&&0===ut(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Qn(e,t){return function(e,t,n,r){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=ut(e,t))){if(n&&r)return 0;if(n)return 1;if(r)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,n,r){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=ut(e,t))){if(n&&r)return 0;if(n)return-1;if(r)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Zn(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",(function(){var r,i;e.subscribers.delete(n),0===e.subscribers.size&&(r=e,i=t,setTimeout((function(){0===r.subscribers.size&&A(i,r)}),3e3))}))}var Jn={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return t(t({},e),{transaction:function(t,r,i){var a,o,s=e.transaction(t,r,i);return"readwrite"===r&&(o=(a=new AbortController).signal,i=function(i){return function(){if(a.abort(),"readwrite"===r){for(var o=new Set,l=0,u=t;l<u.length;l++){var c=u[l],h=Tn["idb://".concat(n,"/").concat(c)];if(h){var f=e.table(c),d=h.optimisticOps.filter((function(e){return e.trans===s}));if(s._explicit&&i&&s.mutatedParts)for(var p=0,m=Object.values(h.queries.query);p<m.length;p++)for(var g=0,y=(x=m[p]).slice();g<y.length;g++)Rn((w=y[g]).obsSet,s.mutatedParts)&&(A(x,w),w.subscribers.forEach((function(e){return o.add(e)})));else if(0<d.length){h.optimisticOps=h.optimisticOps.filter((function(e){return e.trans!==s}));for(var v=0,b=Object.values(h.queries.query);v<b.length;v++)for(var x,w,E,k=0,D=(x=b[v]).slice();k<D.length;k++)null!=(w=D[k]).res&&s.mutatedParts&&(i&&!w.dirty?(E=Object.isFrozen(w.res),E=qn(w.res,w.req,d,f,w,E),w.dirty?(A(x,w),w.subscribers.forEach((function(e){return o.add(e)}))):E!==w.res&&(w.res=E,w.promise=Ee.resolve({result:E}))):(w.dirty&&A(x,w),w.subscribers.forEach((function(e){return o.add(e)}))))}}}o.forEach((function(e){return e()}))}}},s.addEventListener("abort",i(!1),{signal:o}),s.addEventListener("error",i(!1),{signal:o}),s.addEventListener("complete",i(!0),{signal:o})),s},table:function(r){var i=e.table(r),a=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var o=ve.trans;if(a.outbound||"disabled"===o.db._options.cache||o.explicit)return i.mutate(e);var s=Tn["idb://".concat(n,"/").concat(r)];return s?(o=i.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||Un(a,e).some((function(e){return null==e})))?(s.optimisticOps.push(e),e.mutatedParts&&Nn(e.mutatedParts),o.then((function(t){0<t.numFailures&&(A(s.optimisticOps,e),(t=Xn(0,e,t))&&s.optimisticOps.push(t),e.mutatedParts&&Nn(e.mutatedParts))})),o.catch((function(){A(s.optimisticOps,e),e.mutatedParts&&Nn(e.mutatedParts)}))):o.then((function(n){var r=Xn(0,t(t({},e),{values:e.values.map((function(e,r){var i;return E(e=null!==(i=a.keyPath)&&void 0!==i&&i.includes(".")?T(e):t({},e),a.keyPath,n.results[r]),e}))}),n);s.optimisticOps.push(r),queueMicrotask((function(){return e.mutatedParts&&Nn(e.mutatedParts)}))})),o):i.mutate(e)},query:function(e){if(!Hn(ve,i)||!Yn("query",e))return i.query(e);var t="immutable"===(null===(s=ve.trans)||void 0===s?void 0:s.db._options.cache),a=(u=ve).requery,o=u.signal,s=function(e,t,n,r){var i=Tn["idb://".concat(e,"/").concat(t)];if(!i)return[];if(!(t=i.queries[n]))return[null,!1,i,null];var a=t[(r.query?r.query.index.name:null)||""];if(!a)return[null,!1,i,null];switch(n){case"query":var o=a.find((function(e){return e.req.limit===r.limit&&e.req.values===r.values&&$n(e.req.query.range,r.query.range)}));return o?[o,!0,i,a]:[a.find((function(e){return("limit"in e.req?e.req.limit:1/0)>=r.limit&&(!r.values||e.req.values)&&Qn(e.req.query.range,r.query.range)})),!1,i,a];case"count":return o=a.find((function(e){return $n(e.req.query.range,r.query.range)})),[o,!!o,i,a]}}(n,r,"query",e),l=s[0],u=s[1],c=s[2],h=s[3];return l&&u?l.obsSet=e.obsSet:(u=i.query(e).then((function(e){var n=e.result;if(l&&(l.res=n),t){for(var r=0,i=n.length;r<i;++r)Object.freeze(n[r]);Object.freeze(n)}else e.result=T(n);return e})).catch((function(e){return h&&l&&A(h,l),Promise.reject(e)})),l={obsSet:e.obsSet,promise:u,subscribers:new Set,type:"query",req:e,dirty:!1},h?h.push(l):(h=[l],(c=c||(Tn["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=h)),Zn(l,h,a,o),l.promise.then((function(n){return{result:qn(n.result,e,null==c?void 0:c.optimisticOps,i,l,t)}}))}})}})}};function er(e,t){return new Proxy(e,{get:function(e,n,r){return"db"===n?t:Reflect.get(e,n,r)}})}var tr=(nr.prototype.version=function(e){if(isNaN(e)||e<.1)throw new G.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new G.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(rn),n.stores({}),this._state.autoSchema=!1,n)},nr.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||ve.letThrough||this._vip)?e():new Ee((function(e,n){if(t._state.openComplete)return n(new G.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void n(new G.DatabaseClosed);t.open().catch(q)}t._state.dbReadyPromise.then(e,n)})).then(e)},nr.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:n,level:null==r?10:r,name:i}),e.sort((function(e,t){return e.level-t.level})),this},nr.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},nr.prototype.open=function(){var e=this;return Ve(ye,(function(){return Ln(e)}))},nr.prototype._close=function(){var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Ee((function(t){e.dbReadyResolve=t})),e.openCanceller=new Ee((function(t,n){e.cancelOpen=n})))},nr.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new G.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new G.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},nr.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new Ee((function(i,a){function o(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Ae((function(){var e,n,r;e=t._deps,n=t.name,r=e.indexedDB,e=e.IDBKeyRange,yn(r)||n===nt||gn(r,e).delete(n).catch(q),i()})),n.onerror=Mt(a),n.onblocked=t._fireOnBlocked}if(n)throw new G.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()}))},nr.prototype.backendDB=function(){return this.idbdb},nr.prototype.isOpen=function(){return null!==this.idbdb},nr.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},nr.prototype.hasFailed=function(){return null!==this._state.dbOpenError},nr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(nr.prototype,"tables",{get:function(){var e=this;return a(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!1,configurable:!0}),nr.prototype.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new G.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,S(i),n]}.apply(this,arguments);return this._transaction.apply(this,e)},nr.prototype._transaction=function(e,t,n){var r=this,i=ve.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var a,o,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(o=t.map((function(e){if("string"!=typeof(e=e instanceof r.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e})),"r"==e||e===rt)a=rt;else{if("rw"!=e&&e!=it)throw new G.InvalidArgument("Invalid transaction mode: "+e);a=it}if(i){if(i.mode===rt&&a===it){if(!s)throw new G.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!s)throw new G.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),s&&i&&!i.active&&(i=null)}}catch(n){return i?i._promise(null,(function(e,t){t(n)})):Qe(n)}var l=function e(t,n,r,i,a){return Ee.resolve().then((function(){var o=ve.transless||ve,s=t._createTransaction(n,r,t._dbSchema,i);if(s.explicit=!0,o={trans:s,transless:o},i)s.idbtrans=i.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(o){return o.name===H.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then((function(){return e(t,n,r,null,a)}))):Qe(o)}var l,u=M(a);return u&&ze(),o=Ee.follow((function(){var e;(l=a.call(s,s))&&(u?(e=We.bind(null,null),l.then(e,e)):"function"==typeof l.next&&"function"==typeof l.throw&&(l=Fn(l)))}),o),(l&&"function"==typeof l.then?Ee.resolve(l).then((function(e){return s.active?e:Qe(new G.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):o.then((function(){return l}))).then((function(e){return i&&s._resolve(),s._completion.then((function(){return e}))})).catch((function(e){return s._reject(e),Qe(e)}))}))}.bind(null,this,a,o,i,n);return i?i._promise(a,l,"lock"):ve.trans?Ve(ve.transless,(function(){return r._whenReady(l)})):this._whenReady(l)},nr.prototype.table=function(e){if(!c(this._allTables,e))throw new G.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},nr);function nr(e,n){var r=this;this._middlewares={},this.verno=0;var i=nr.dependencies;this._options=n=t({addons:nr.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},i=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a,o,s,l,u,c={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:q,dbReadyPromise:null,cancelOpen:q,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};c.dbReadyPromise=new Ee((function(e){c.dbReadyResolve=e})),c.openCanceller=new Ee((function(e,t){c.cancelOpen=t})),this._state=c,this.name=e,this.on=pt(this,"populate","blocked","versionchange","close",{ready:[re,q]}),this.on.ready.subscribe=v(this.on.ready.subscribe,(function(e){return function(t,n){nr.vip((function(){var i,a=r._state;a.openComplete?(a.dbOpenError||Ee.resolve().then(t),n&&e(t)):a.onReadyBeingFired?(a.onReadyBeingFired.push(t),n&&e(t)):(e(t),i=r,n||e((function e(){i.on.ready.unsubscribe(t),i.on.ready.unsubscribe(e)})))}))}})),this.Collection=(a=this,mt(St.prototype,(function(e,t){this.db=a;var n=ot,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx;e=(t=i.table).hook.reading.fire,this._ctx={table:t,index:i.index,isPrimKey:!i.index||t.schema.primKey.keyPath&&i.index===t.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:e!==$?e:null}}))),this.Table=(o=this,mt(ft.prototype,(function(e,t,n){this.db=o,this._tx=n,this.name=e,this.schema=t,this.hook=o._allTables[e]?o._allTables[e].hook:pt(null,{creating:[J,q],reading:[Q,$],updating:[te,q],deleting:[ee,q]})}))),this.Transaction=(s=this,mt(zt.prototype,(function(e,t,n,r,i){var a=this;this.db=s,this.mode=e,this.storeNames=t,this.schema=n,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=pt(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ee((function(e,t){a._resolve=e,a._reject=t})),this._completion.then((function(){a.active=!1,a.on.complete.fire()}),(function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),Qe(e)}))}))),this.Version=(l=this,mt(pn.prototype,(function(e){this.db=l,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))),this.WhereClause=(u=this,mt(Lt.prototype,(function(e,t,n){if(this.db=u,this._ctx={table:e,index:":id"===t?null:t,or:n},this._cmp=this._ascending=ut,this._descending=function(e,t){return ut(t,e)},this._max=function(e,t){return 0<ut(e,t)?e:t},this._min=function(e,t){return ut(e,t)<0?e:t},this._IDBKeyRange=u._deps.IDBKeyRange,!this._IDBKeyRange)throw new G.MissingAPI}))),this.on("versionchange",(function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))})),this._maxKey=Xt(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),tt.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Wn),this.use(Jn),this.use(Gn),this.use(jn),this.use(Kn);var h=new Proxy(this,{get:function(e,t,n){if("_vip"===t)return!0;if("table"===t)return function(e){return er(r.table(e),h)};var i=Reflect.get(e,t,n);return i instanceof ft?er(i,h):"tables"===t?i.map((function(e){return er(e,h)})):"_createTransaction"===t?function(){return er(i.apply(this,arguments),h)}:i}});this.vip=h,i.forEach((function(e){return e(r)}))}j="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var rr,ir=(ar.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},ar.prototype[j]=function(){return this},ar);function ar(e){this._subscribe=e}try{rr={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(_){rr={indexedDB:null,IDBKeyRange:null}}function or(e){var t,n=!1,r=new ir((function(r){var i,a=M(e),o=!1,s={},l={},u={get closed(){return o},unsubscribe:function(){o||(o=!0,i&&i.abort(),h&&Kt.storagemutated.unsubscribe(d))}};r.start&&r.start(u);var h=!1,f=function(){return $e(p)},d=function(e){Pn(s,e),Rn(l,s)&&f()},p=function(){var u,p,m;!o&&rr.indexedDB&&(s={},u={},i&&i.abort(),i=new AbortController,m=function(t){var n=Ce();try{a&&ze();var r=Ke(e,t);return r=a?r.finally(We):r}finally{n&&Oe()}}(p={subscr:u,signal:i.signal,requery:f,querier:e,trans:null}),Promise.resolve(m).then((function(e){n=!0,t=e,o||p.signal.aborted||(s={},function(e){for(var t in e)if(c(e,t))return;return 1}(l=u)||h||(Kt(Bt,d),h=!0),$e((function(){return!o&&r.next&&r.next(e)})))}),(function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||o||$e((function(){o||r.error&&r.error(e)}))})))};return setTimeout(f,0),u}));return r.hasValue=function(){return n},r.getValue=function(){return t},r}var sr=tr;function lr(e){var t=cr;try{cr=!0,Kt.storagemutated.fire(e),In(e,!0)}finally{cr=t}}h(sr,t(t({},V),{delete:function(e){return new sr(e,{addons:[]}).delete()},exists:function(e){return new sr(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return n=(t=sr.dependencies).indexedDB,t=t.IDBKeyRange,(yn(n)?Promise.resolve(n.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==nt}))})):gn(n,t).toCollection().primaryKeys()).then(e)}catch(e){return Qe(new G.MissingAPI)}var t,n},defineClass:function(){return function(e){s(this,e)}},ignoreTransaction:function(e){return ve.trans?Ve(ve.transless,e):e()},vip:vn,async:function(e){return function(){try{var t=Fn(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Ee.resolve(t)}catch(t){return Qe(t)}}},spawn:function(e,t,n){try{var r=Fn(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Ee.resolve(r)}catch(e){return Qe(e)}},currentTransaction:{get:function(){return ve.trans||null}},waitFor:function(e,t){return t=Ee.resolve("function"==typeof e?sr.ignoreTransaction(e):e).timeout(t||6e4),ve.trans?ve.trans.waitFor(t):t},Promise:Ee,debug:{get:function(){return ie},set:function(e){ae(e)}},derive:p,extend:s,props:h,override:v,Events:pt,on:Kt,liveQuery:or,extendObservabilitySet:Pn,getByKeyPath:w,setByKeyPath:E,delByKeyPath:function(e,t){"string"==typeof t?E(e,t,void 0):"length"in t&&[].map.call(t,(function(t){E(e,t,void 0)}))},shallowClone:k,deepClone:T,getObjectDiff:Bn,cmp:ut,asap:x,minKey:-1/0,addons:[],connections:tt,errnames:H,dependencies:rr,cache:Tn,semVer:"4.0.4",version:"4.0.4".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),sr.maxKey=Xt(sr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Kt(Bt,(function(e){cr||(e=new CustomEvent(Ut,{detail:e}),cr=!0,dispatchEvent(e),cr=!1)})),addEventListener(Ut,(function(e){e=e.detail,cr||lr(e)})));var ur,cr=!1,hr=function(){};return"undefined"!=typeof BroadcastChannel&&((hr=function(){(ur=new BroadcastChannel(Ut)).onmessage=function(e){return e.data&&lr(e.data)}})(),"function"==typeof ur.unref&&ur.unref(),Kt(Bt,(function(e){cr||ur.postMessage(e)}))),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",(function(e){if(!tr.disableBfCache&&e.persisted){ie&&console.debug("Dexie: handling persisted pagehide"),null!=ur&&ur.close();for(var t=0,n=tt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}})),addEventListener("pageshow",(function(e){!tr.disableBfCache&&e.persisted&&(ie&&console.debug("Dexie: handling persisted pageshow"),hr(),lr({all:new xn(-1/0,[[]])}))}))),Ee.rejectionMapper=function(e,t){return!e||e instanceof U||e instanceof TypeError||e instanceof SyntaxError||!e.name||!X[e.name]?e:(t=new X[e.name](t||e.message,e),"stack"in e&&d(t,"stack",{get:function(){return this.inner.stack}}),t)},ae(ie),t(tr,Object.freeze({__proto__:null,Dexie:tr,liveQuery:or,Entity:lt,cmp:ut,PropModSymbol:_,PropModification:kt,replacePrefix:function(e,t){return new kt({replacePrefix:[e,t]})},default:tr,RangeSet:xn,mergeRanges:En,rangesOverlap:kn}),{default:tr}),tr}()},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),E=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),P=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var F,M=Object.assign;function j(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function K(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case E:return"Portal";case S:return"Profiler";case D:return"StrictMode";case T:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function V(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){Q(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&V(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,ke=null,De=null;function Se(e){if(e=bi(e)){if("function"!==typeof Ee)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),Ee(e.stateNode,e.type,t))}}function _e(e){ke?De?De.push(e):De=[e]:ke=e}function Pe(){if(ke){var e=ke,t=De;if(De=ke=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Re(e,t){return e(t)}function Te(){}var Ce=!1;function Oe(e,t,n){if(Ce)return e(t,n);Ce=!0;try{return Re(e,t,n)}finally{Ce=!1,(null!==ke||null!==De)&&(Te(),Pe())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ie=!1;if(c)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(ce){Ie=!1}function Le(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Fe=!1,Me=null,je=!1,Be=null,Ue={onError:function(e){Fe=!0,Me=e}};function Ke(e,t,n,r,i,a,o,s,l){Fe=!1,Me=null,Le.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(a(188))}function Ye(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,Ve=i.unstable_cancelCallback,qe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Qe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Et,kt,Dt,St,_t=!1,Pt=[],Rt=null,Tt=null,Ct=null,Ot=new Map,Nt=new Map,It=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Ft(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void St(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Bt(e,t,n){jt(e)&&n.delete(t)}function Ut(){_t=!1,null!==Rt&&jt(Rt)&&(Rt=null),null!==Tt&&jt(Tt)&&(Tt=null),null!==Ct&&jt(Ct)&&(Ct=null),Ot.forEach(Bt),Nt.forEach(Bt)}function Kt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Kt(t,e)}if(0<Pt.length){Kt(Pt[0],e);for(var n=1;n<Pt.length;n++){var r=Pt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Rt&&Kt(Rt,e),null!==Tt&&Kt(Tt,e),null!==Ct&&Kt(Ct,e),Ot.forEach(t),Nt.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Mt(n),null===n.blockedOn&&It.shift()}var Wt=x.ReactCurrentBatchConfig,Ht=!0;function Yt(e,t,n,r){var i=bt,a=Wt.transition;Wt.transition=null;try{bt=1,Xt(e,t,n,r)}finally{bt=i,Wt.transition=a}}function Gt(e,t,n,r){var i=bt,a=Wt.transition;Wt.transition=null;try{bt=4,Xt(e,t,n,r)}finally{bt=i,Wt.transition=a}}function Xt(e,t,n,r){if(Ht){var i=qt(e,t,n,r);if(null===i)Hr(e,t,r,Vt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Rt=Ft(Rt,e,t,n,r,i),!0;case"dragenter":return Tt=Ft(Tt,e,t,n,r,i),!0;case"mouseover":return Ct=Ft(Ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ot.set(a,Ft(Ot.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Nt.set(a,Ft(Nt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<At.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&wt(a),null===(a=qt(e,t,n,r))&&Hr(e,t,r,Vt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Vt=null;function qt(e,t,n,r){if(Vt=null,null!==(e=vi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),hn=M({},un,{view:0,detail:0}),fn=an(hn),dn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),mn=an(M({},dn,{dataTransfer:0})),gn=an(M({},hn,{relatedTarget:0})),yn=an(M({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(vn),xn=an(M({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Sn(){return Dn}var _n=M({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=an(_n),Rn=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Cn=an(M({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=an(On),In=[9,13,27,32],An=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Fn=c&&"TextEvent"in window&&!Ln,Mn=c&&(!An||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Yn(e,t,n,r){_e(r),0<(t=Gr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Xn=null;function Vn(e){jr(e,0)}function qn(e){if(X(xi(e)))return e}function $n(e,t){if("change"===e)return t}var Qn=!1;if(c){var Zn;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Zn=Jn}else Zn=!1;Qn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Xn=Gn=null)}function nr(e){if("value"===e.propertyName&&qn(Xn)){var t=[];Yn(t,Xn,e,we(e)),Oe(Vn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Xn)}function ar(e,t){if("click"===e)return qn(t)}function or(e,t){if("input"===e||"change"===e)return qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=V();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=V((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==V(r)||("selectionStart"in(r=gr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Dr={};function Sr(e){if(kr[e])return kr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Dr)return kr[e]=n[t];return e}c&&(Dr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var _r=Sr("animationend"),Pr=Sr("animationiteration"),Rr=Sr("animationstart"),Tr=Sr("transitionend"),Cr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Cr.set(e,t),l(t,[e])}for(var Ir=0;Ir<Or.length;Ir++){var Ar=Or[Ir];Nr(Ar.toLowerCase(),"on"+(Ar[0].toUpperCase()+Ar.slice(1)))}Nr(_r,"onAnimationEnd"),Nr(Pr,"onAnimationIteration"),Nr(Rr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Tr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(Ke.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var c=Me;Fe=!1,Me=null,je||(je=!0,Be=c)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Mr(i,s,u),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Mr(i,s,u),a=l}}}if(je)throw e=Be,je=!1,Be=null,e}function Br(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Kr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Kr]){e[Kr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Kr]||(t[Kr]=!0,Ur("selectionchange",!1,t))}}function Wr(e,t,n,r){switch($t(t)){case 1:var i=Yt;break;case 4:i=Gt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=vi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Oe((function(){var r=a,i=we(n),o=[];e:{var s=Cr.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Pn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case _r:case Pr:case Rr:l=yn;break;case Tr:l=Cn;break;case"scroll":l=fn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Rn}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var m=(d=p).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==f&&(null!=(m=Ne(p,f))&&c.push(Yr(p,m,d)))),h)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(u=n.relatedTarget||n.fromElement)||!vi(u)&&!u[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?vi(u):null)&&(u!==(h=ze(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Rn,m="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==l?s:xi(l),d=null==u?s:xi(u),(s=new c(m,p+"leave",l,n,i)).target=h,s.relatedTarget=d,m=null,vi(i)===r&&((c=new c(f,p+"enter",u,n,i)).target=d,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(f=u,p=0,d=c=l;d;d=Xr(d))p++;for(d=0,m=f;m;m=Xr(m))d++;for(;0<p-d;)c=Xr(c),p--;for(;0<d-p;)f=Xr(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Xr(c),f=Xr(f)}c=null}else c=null;null!==l&&Vr(o,s,l,c,!1),null!==u&&null!==h&&Vr(o,h,u,c,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=$n;else if(Hn(s))if(Qn)g=or;else{g=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?Yn(o,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?xi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,i)}var v;if(An)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(v=en()):(Zt="value"in(Qt=i)?Qt.value:Qt.textContent,zn=!0)),0<(y=Gr(r,b)).length&&(b=new xn(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Kn(n))&&(b.data=v))),(v=Fn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(Bn=!0,jn);case"textInput":return(e=t.data)===jn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!An&&Un(e,t)?(e=en(),Jt=Zt=Qt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}jr(o,t)}))}function Yr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ne(e,n))&&r.unshift(Yr(e,a,i)),null!=(a=Ne(e,t))&&r.push(Yr(e,a,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Ne(n,a))&&o.unshift(Yr(n,l,s)):i||null!=(l=Ne(n,a))&&o.push(Yr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(qr,"\n").replace($r,"")}function Zr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[fi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var Ei=[],ki=-1;function Di(e){return{current:e}}function Si(e){0>ki||(e.current=Ei[ki],Ei[ki]=null,ki--)}function _i(e,t){ki++,Ei[ki]=e.current,e.current=t}var Pi={},Ri=Di(Pi),Ti=Di(!1),Ci=Pi;function Oi(e,t){var n=e.type.contextTypes;if(!n)return Pi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ii(){Si(Ti),Si(Ri)}function Ai(e,t,n){if(Ri.current!==Pi)throw Error(a(168));_i(Ri,t),_i(Ti,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,W(e)||"Unknown",i));return M({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pi,Ci=Ri.current,_i(Ri,e),_i(Ti,Ti.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ci),r.__reactInternalMemoizedMergedChildContext=e,Si(Ti),Si(Ri),_i(Ri,e)):Si(Ti),_i(Ti,n)}var ji=null,Bi=!1,Ui=!1;function Ki(e){null===ji?ji=[e]:ji.push(e)}function zi(){if(!Ui&&null!==ji){Ui=!0;var e=0,t=bt;try{var n=ji;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Bi=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Xe(Je,zi),i}finally{bt=t,Ui=!1}}return null}var Wi=[],Hi=0,Yi=null,Gi=0,Xi=[],Vi=0,qi=null,$i=1,Qi="";function Zi(e,t){Wi[Hi++]=Gi,Wi[Hi++]=Yi,Yi=e,Gi=t}function Ji(e,t,n){Xi[Vi++]=$i,Xi[Vi++]=Qi,Xi[Vi++]=qi,qi=e;var r=$i;e=Qi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Qi=a+e}else $i=1<<a|n<<i|r,Qi=e}function ea(e){null!==e.return&&(Zi(e,1),Ji(e,1,0))}function ta(e){for(;e===Yi;)Yi=Wi[--Hi],Wi[Hi]=null,Gi=Wi[--Hi],Wi[Hi]=null;for(;e===qi;)qi=Xi[--Vi],Xi[Vi]=null,Qi=Xi[--Vi],Xi[Vi]=null,$i=Xi[--Vi],Xi[Vi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Ou(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qi?{id:$i,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ou(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ui(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ui(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ui(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ui(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var ma=x.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ya(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Iu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===N&&va(a)===t.type)?((r=i(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=Au(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ju(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Au(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case E:return(t=ju(t,e.mode,n)).return=e,t;case N:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lu(t,e.mode,n,null)).return=e,t;ya(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case E:return n.key===i?c(e,t,n,r):null;case N:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);ya(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);ya(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,h=a,m=a=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=d(i,h,s[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===s.length)return n(i,h),ia&&Zi(i,m),u;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],l))&&(a=o(h,a,m),null===c?u=h:c.sibling=h,c=h);return ia&&Zi(i,m),u}for(h=r(i,h);m<s.length;m++)null!==(g=p(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),ia&&Zi(i,m),u}function g(i,s,l,u){var c=L(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var h=c=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=d(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,g),null===h?c=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),ia&&Zi(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=f(i,v.value,u))&&(s=o(v,s,g),null===h?c=v:h.sibling=v,h=v);return ia&&Zi(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),ia&&Zi(i,g),c}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===k){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===N&&va(u)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=ga(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===k?((a=Lu(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Au(o.type,o.key,o.props,null,r.mode,l)).ref=ga(r,a,o),l.return=r,r=l)}return s(r);case E:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=ju(o,r.mode,l)).return=r,r=a}return s(r);case N:return e(r,a,(c=o._init)(o._payload),l)}if(te(o))return m(r,a,o,l);if(L(o))return g(r,a,o,l);ya(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mu(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var xa=ba(!0),wa=ba(!1),Ea=Di(null),ka=null,Da=null,Sa=null;function _a(){Sa=Da=ka=null}function Pa(e){var t=Ea.current;Si(Ea),e._currentValue=t}function Ra(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t){ka=e,Sa=Da=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ca(e){var t=e._currentValue;if(Sa!==e)if(e={context:e,memoizedValue:t,next:null},null===Da){if(null===ka)throw Error(a(308));Da=e,ka.dependencies={lanes:0,firstContext:e}}else Da=Da.next=e;return t}var Oa=null;function Na(e){null===Oa?Oa=[e]:Oa.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Na(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var La=!1;function Fa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ja(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ba(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Rl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Na(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function Ua(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ka(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function za(e,t,n,r){var i=e.updateQueue;La=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var h=i.baseState;for(o=0,c=u=l=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(f=t,d=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=m.payload)?p.call(d,h,f):p)||void 0===f)break e;h=M({},h,f);break e;case 2:La=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=d,l=h):c=c.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function Wa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ha={},Ya=Di(Ha),Ga=Di(Ha),Xa=Di(Ha);function Va(e){if(e===Ha)throw Error(a(174));return e}function qa(e,t){switch(_i(Xa,t),_i(Ga,e),_i(Ya,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Ya),_i(Ya,t)}function $a(){Si(Ya),Si(Ga),Si(Xa)}function Qa(e){Va(Xa.current);var t=Va(Ya.current),n=le(t,e.type);t!==n&&(_i(Ga,e),_i(Ya,n))}function Za(e){Ga.current===e&&(Si(Ya),Si(Ga))}var Ja=Di(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=x.ReactCurrentDispatcher,io=x.ReactCurrentBatchConfig,ao=0,oo=null,so=null,lo=null,uo=!1,co=!1,ho=0,fo=0;function po(){throw Error(a(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(ao=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Jo:es,e=n(r,i),co){o=0;do{if(co=!1,ho=0,25<=o)throw Error(a(301));o+=1,lo=so=null,t.updateQueue=null,ro.current=ts,e=n(r,i)}while(co)}if(ro.current=Zo,t=null!==so&&null!==so.next,ao=0,lo=so=oo=null,uo=!1,t)throw Error(a(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function xo(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var h=c.lane;if((ao&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=f,s=r):u=u.next=f,oo.lanes|=h,Fl|=h}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ko(){}function Do(e,t){var n=oo,r=bo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Fo(Po.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Oo(9,_o.bind(null,n,r,i,t),void 0,null),null===Tl)throw Error(a(349));0!==(30&ao)||So(n,t,i)}return i}function So(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _o(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&To(e)}function Po(e,t,n){return n((function(){Ro(t)&&To(e)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function To(e){var t=Aa(e,1);null!==t&&nu(t,e,1,-1)}function Co(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=Vo.bind(null,oo,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function No(){return bo().memoizedState}function Io(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function Ao(e,t,n,r){var i=bo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Oo(t,n,a,r))}oo.flags|=e,i.memoizedState=Oo(1|t,n,a,r)}function Lo(e,t){return Io(8390656,8,e,t)}function Fo(e,t){return Ao(2048,8,e,t)}function Mo(e,t){return Ao(4,2,e,t)}function jo(e,t){return Ao(4,4,e,t)}function Bo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ao(4,4,Bo.bind(null,t,e),n)}function Ko(){}function zo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&ao)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),oo.lanes|=n,Fl|=n,e.baseState=!0),t)}function Yo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{bt=n,io.transition=r}}function Go(){return bo().memoizedState}function Xo(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qo(e))$o(t,n);else if(null!==(n=Ia(e,t,n,r))){nu(n,e,r,eu()),Qo(n,t,r)}}function Vo(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qo(e))$o(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,Na(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ia(e,t,i,r))&&(nu(n,e,r,i=eu()),Qo(n,t,r))}}function qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function $o(e,t){co=uo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Zo={readContext:Ca,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Jo={readContext:Ca,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Ca,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Io(4194308,4,Bo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Io(4194308,4,e,t)},useInsertionEffect:function(e,t){return Io(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Xo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Co,useDebugValue:Ko,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Co(!1),t=e[0];return e=Yo.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Tl)throw Error(a(349));0!==(30&ao)||So(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Po.bind(null,r,o,e),[e]),r.flags|=2048,Oo(9,_o.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Tl.identifierPrefix;if(ia){var n=Qi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ca,useCallback:zo,useContext:Ca,useEffect:Fo,useImperativeHandle:Uo,useInsertionEffect:Mo,useLayoutEffect:jo,useMemo:Wo,useReducer:wo,useRef:No,useState:function(){return wo(xo)},useDebugValue:Ko,useDeferredValue:function(e){return Ho(bo(),so.memoizedState,e)},useTransition:function(){return[wo(xo)[0],bo().memoizedState]},useMutableSource:ko,useSyncExternalStore:Do,useId:Go,unstable_isNewReconciler:!1},ts={readContext:Ca,useCallback:zo,useContext:Ca,useEffect:Fo,useImperativeHandle:Uo,useInsertionEffect:Mo,useLayoutEffect:jo,useMemo:Wo,useReducer:Eo,useRef:No,useState:function(){return Eo(xo)},useDebugValue:Ko,useDeferredValue:function(e){var t=bo();return null===so?t.memoizedState=e:Ho(t,so.memoizedState,e)},useTransition:function(){return[Eo(xo)[0],bo().memoizedState]},useMutableSource:ko,useSyncExternalStore:Do,useId:Go,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=ja(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ba(e,a,i))&&(nu(t,e,i,r),Ua(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=ja(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ba(e,a,i))&&(nu(t,e,i,r),Ua(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=ja(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ba(e,i,r))&&(nu(t,e,r,n),Ua(t,e,r))}};function as(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function os(e,t,n){var r=!1,i=Pi,a=t.contextType;return"object"===typeof a&&null!==a?a=Ca(a):(i=Ni(t)?Ci:Ri.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):Pi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ca(a):(a=Ni(t)?Ci:Ri.current,i.context=Oi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rs(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),za(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function us(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function cs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ds(e,t,n){(n=ja(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Yl=r),hs(0,t)},n}function ps(e,t,n){(n=ja(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Su.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ja(-1,1)).tag=2,Ba(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vs=x.ReactCurrentOwner,bs=!1;function xs(e,t,n,r){t.child=null===e?wa(t,null,n,r):xa(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return Ta(t,i),r=go(e,t,n,r,a,i),n=yo(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Es(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Nu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Au(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ks(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Iu(a,r)).ref=t.ref,e.return=t,t.child=e}function ks(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return _s(e,t,n,r,i)}function Ds(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i(Il,Nl),Nl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_i(Il,Nl),Nl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,_i(Il,Nl),Nl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_i(Il,Nl),Nl|=r;return xs(e,t,i,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _s(e,t,n,r,i){var a=Ni(n)?Ci:Ri.current;return a=Oi(t,a),Ta(t,i),n=go(e,t,n,r,a,i),r=yo(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Ps(e,t,n,r,i){if(Ni(n)){var a=!0;Fi(t)}else a=!1;if(Ta(t,i),null===t.stateNode)Ws(e,t),os(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ca(u):u=Oi(t,u=Ni(n)?Ci:Ri.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&ss(t,o,r,u),La=!1;var f=t.memoizedState;o.state=f,za(t,r,o,i),l=t.memoizedState,s!==r||f!==l||Ti.current||La?("function"===typeof c&&(rs(t,n,c,r),l=t.memoizedState),(s=La||as(t,n,s,r,f,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ma(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ns(t.type,s),o.props=u,h=t.pendingProps,f=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ca(l):l=Oi(t,l=Ni(n)?Ci:Ri.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==l)&&ss(t,o,r,l),La=!1,f=t.memoizedState,o.state=f,za(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ti.current||La?("function"===typeof d&&(rs(t,n,d,r),p=t.memoizedState),(u=La||as(t,n,u,r,f,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Rs(e,t,n,r,a,i)}function Rs(e,t,n,r,i,a){Ss(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Hs(e,t,a);r=t.stateNode,vs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=xa(t,e.child,null,a),t.child=xa(t,null,s,a)):xs(e,t,s,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Ts(e){var t=e.stateNode;t.pendingContext?Ai(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ai(0,t.context,!1),qa(e,t.containerInfo)}function Cs(e,t,n,r,i){return da(),pa(i),t.flags|=256,xs(e,t,n,r),t.child}var Os,Ns,Is,As,Ls={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ms(e,t,n){var r,i=t.pendingProps,o=Ja.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),_i(Ja,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Fu(l,i,0,null),e=Lu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ls,e):js(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=cs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fu({mode:"visible",children:r.children},i,0,null),(o=Lu(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&xa(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Bs(e,t,s,r=cs(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Tl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),nu(r,e,i,-1))}return mu(),Bs(e,t,s,r=cs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Pu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ui(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Xi[Vi++]=$i,Xi[Vi++]=Qi,Xi[Vi++]=qi,$i=e.id,Qi=e.overflow,qi=t),t=js(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Iu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Iu(r,s):(s=Lu(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Fs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Iu(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function js(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&pa(r),xa(t,e.child,null,n),(e=js(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ra(e.return,t,n)}function Ks(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=Ja.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(Ja,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ks(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ks(t,!0,n,null,a);break;case"together":Ks(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Iu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Iu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ys(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Ni(t.type)&&Ii(),Gs(t),null;case 3:return r=t.stateNode,$a(),Si(Ti),Si(Ri),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ou(aa),aa=null))),Ns(e,t),Gs(t),null;case 5:Za(t);var i=Va(Xa.current);if(n=t.type,null!==e&&null!=t.stateNode)Is(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=Va(Ya.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":$(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ie(r,o),Br("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":G(r),J(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fi]=t,e[di]=r,Os(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":$(e,r),i=q(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(o in ve(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Br("scroll",e):null!=c&&b(e,o,c,l))}switch(n){case"input":G(e),J(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)As(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Va(Xa.current),Va(Ya.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Gs(t),null;case 13:if(Si(Ja),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==aa&&(ou(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Ja.current)?0===Al&&(Al=3):mu())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return $a(),Ns(e,t),null===e&&zr(t.stateNode.containerInfo),Gs(t),null;case 10:return Pa(t.type._context),Gs(t),null;case 19:if(Si(Ja),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ys(o,!1);else{if(0!==Al||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ys(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(Ja,1&Ja.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>zl&&(t.flags|=128,r=!0,Ys(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ys(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Gs(t),null}else 2*Qe()-o.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ys(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=Ja.current,_i(Ja,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nl)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Vs(e,t){switch(ta(t),t.tag){case 1:return Ni(t.type)&&Ii(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $a(),Si(Ti),Si(Ri),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(Si(Ja),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(Ja),null;case 4:return $a(),null;case 10:return Pa(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ns=function(){},Is=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Va(Ya.current);var a,o=null;switch(n){case"input":i=q(e,i),r=q(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Br("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},As=function(e,t,n,r){n!==r&&(t.flags|=4)};var qs=!1,$s=!1,Qs="function"===typeof WeakSet?WeakSet:Set,Zs=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Du(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Du(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)dl(e,t,n),n=n.sibling}function dl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:$s||Js(n,t);case 6:var r=cl,i=hl;cl=null,fl(e,t,n),hl=i,null!==(cl=r)&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=hl,cl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),cl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&el(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!$s&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Du(n,t,s)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,fl(e,t,n),$s=r):fl(e,t,n);break;default:fl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=Ru.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===cl)throw Error(a(160));dl(o,s,i),cl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Du(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Du(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Du(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(g){Du(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(i,o),be(l,s);var c=be(l,o);for(s=0;s<u.length;s+=2){var h=u[s],f=u[s+1];"style"===h?ge(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):b(i,h,f,c)}switch(l){case"input":Z(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(g){Du(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Du(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Du(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Kl=Qe())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($s=(c=$s)||h,ml(t,e),$s=c):ml(t,e),yl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Zs=e,h=e.child;null!==h;){for(f=Zs=h;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:nl(4,d,d.return);break;case 1:Js(d,d.return);var m=d.stateNode;if("function"===typeof m.componentWillUnmount){r=d,n=d.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Du(r,n,g)}}break;case 5:Js(d,d.return);break;case 22:if(null!==d.memoizedState){wl(f);continue}}null!==p?(p.return=d,Zs=p):wl(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=f.stateNode,s=void 0!==(u=f.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(g){Du(e,e.return,g)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){Du(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),ul(e,sl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(a(161))}}catch(s){Du(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Zs=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||qs;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||$s;s=qs;var u=$s;if(qs=o,($s=l)&&!u)for(Zs=i;null!==Zs;)l=(o=Zs).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Zs=l):El(i);for(;null!==a;)Zs=a,bl(a,t,n),a=a.sibling;Zs=i,qs=s,$s=u}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):xl(e)}}function xl(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Wa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wa(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&zt(f)}}}break;default:throw Error(a(163))}$s||512&t.flags&&il(t)}catch(d){Du(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function wl(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function El(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Du(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Du(t,i,l)}}var a=t.return;try{il(t)}catch(l){Du(t,a,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Du(t,o,l)}}}catch(l){Du(t,t.return,l)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var kl,Dl=Math.ceil,Sl=x.ReactCurrentDispatcher,_l=x.ReactCurrentOwner,Pl=x.ReactCurrentBatchConfig,Rl=0,Tl=null,Cl=null,Ol=0,Nl=0,Il=Di(0),Al=0,Ll=null,Fl=0,Ml=0,jl=0,Bl=null,Ul=null,Kl=0,zl=1/0,Wl=null,Hl=!1,Yl=null,Gl=null,Xl=!1,Vl=null,ql=0,$l=0,Ql=null,Zl=-1,Jl=0;function eu(){return 0!==(6&Rl)?Qe():-1!==Zl?Zl:Zl=Qe()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Rl)&&0!==Ol?Ol&-Ol:null!==ma.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nu(e,t,n,r){if(50<$l)throw $l=0,Ql=null,Error(a(185));yt(e,n,r),0!==(2&Rl)&&e===Tl||(e===Tl&&(0===(2&Rl)&&(Ml|=n),4===Al&&su(e,Ol)),ru(e,r),1===n&&0===Rl&&0===(1&t.mode)&&(zl=Qe()+500,Bi&&zi()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Tl?Ol:0);if(0===r)null!==n&&Ve(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ve(n),1===t)0===e.tag?function(e){Bi=!0,Ki(e)}(lu.bind(null,e)):Ki(lu.bind(null,e)),oi((function(){0===(6&Rl)&&zi()})),n=null;else{switch(xt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tu(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Zl=-1,Jl=0,0!==(6&Rl))throw Error(a(327));var n=e.callbackNode;if(Eu()&&e.callbackNode!==n)return null;var r=ft(e,e===Tl?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=Rl;Rl|=2;var o=pu();for(Tl===e&&Ol===t||(Wl=null,zl=Qe()+500,fu(e,t));;)try{vu();break}catch(l){du(e,l)}_a(),Sl.current=o,Rl=i,null!==Cl?t=0:(Tl=null,Ol=0,t=Al)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=au(e,i))),1===t)throw n=Ll,fu(e,0),su(e,r),ru(e,Qe()),n;if(6===t)su(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,r))&&(0!==(o=pt(e))&&(r=o,t=au(e,o))),1===t))throw n=Ll,fu(e,0),su(e,r),ru(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wu(e,Ul,Wl);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=Kl+500-Qe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wu.bind(null,e,Ul,Wl),t);break}wu(e,Ul,Wl);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dl(r/1960))-r)){e.timeoutHandle=ri(wu.bind(null,e,Ul,Wl),r);break}wu(e,Ul,Wl);break;default:throw Error(a(329))}}}return ru(e,Qe()),e.callbackNode===n?iu.bind(null,e):null}function au(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=Ul,Ul=n,null!==t&&ou(t)),e}function ou(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function su(e,t){for(t&=~jl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&Rl))throw Error(a(327));Eu();var t=ft(e,0);if(0===(1&t))return ru(e,Qe()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Ll,fu(e,0),su(e,t),ru(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,Ul,Wl),ru(e,Qe()),null}function uu(e,t){var n=Rl;Rl|=1;try{return e(t)}finally{0===(Rl=n)&&(zl=Qe()+500,Bi&&zi())}}function cu(e){null!==Vl&&0===Vl.tag&&0===(6&Rl)&&Eu();var t=Rl;Rl|=1;var n=Pl.transition,r=bt;try{if(Pl.transition=null,bt=1,e)return e()}finally{bt=r,Pl.transition=n,0===(6&(Rl=t))&&zi()}}function hu(){Nl=Il.current,Si(Il)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Cl)for(n=Cl.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ii();break;case 3:$a(),Si(Ti),Si(Ri),no();break;case 5:Za(r);break;case 4:$a();break;case 13:case 19:Si(Ja);break;case 10:Pa(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Tl=e,Cl=e=Iu(e.current,null),Ol=Nl=t,Al=0,Ll=null,jl=Ml=Fl=0,Ul=Bl=null,null!==Oa){for(t=0;t<Oa.length;t++)if(null!==(r=(n=Oa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Oa=null}return e}function du(e,t){for(;;){var n=Cl;try{if(_a(),ro.current=Zo,uo){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}uo=!1}if(ao=0,lo=so=oo=null,co=!1,ho=0,_l.current=null,null===n||null===n.return){Al=1,Ll=t,Cl=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Ol,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&ms(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ms(o,c,t),mu();break e}u=Error(a(426))}else if(ia&&1&l.mode){var y=gs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,t),pa(us(u,l));break e}}o=u=us(u,l),4!==Al&&(Al=2),null===Bl?Bl=[o]:Bl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ka(o,ds(0,u,t));break e;case 1:l=u;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ka(o,ps(o,l,t));break e}}o=o.return}while(null!==o)}xu(n)}catch(x){t=x,Cl===n&&null!==n&&(Cl=n=n.return);continue}break}}function pu(){var e=Sl.current;return Sl.current=Zo,null===e?Zo:e}function mu(){0!==Al&&3!==Al&&2!==Al||(Al=4),null===Tl||0===(268435455&Fl)&&0===(268435455&Ml)||su(Tl,Ol)}function gu(e,t){var n=Rl;Rl|=2;var r=pu();for(Tl===e&&Ol===t||(Wl=null,fu(e,t));;)try{yu();break}catch(i){du(e,i)}if(_a(),Rl=n,Sl.current=r,null!==Cl)throw Error(a(261));return Tl=null,Ol=0,Al}function yu(){for(;null!==Cl;)bu(Cl)}function vu(){for(;null!==Cl&&!qe();)bu(Cl)}function bu(e){var t=kl(e.alternate,e,Nl);e.memoizedProps=e.pendingProps,null===t?xu(e):Cl=t,_l.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Nl)))return void(Cl=n)}else{if(null!==(n=Vs(n,t)))return n.flags&=32767,void(Cl=n);if(null===e)return Al=6,void(Cl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Cl=t);Cl=t=e}while(null!==t);0===Al&&(Al=5)}function wu(e,t,n){var r=bt,i=Pl.transition;try{Pl.transition=null,bt=1,function(e,t,n,r){do{Eu()}while(null!==Vl);if(0!==(6&Rl))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Tl&&(Cl=Tl=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Tu(tt,(function(){return Eu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Pl.transition,Pl.transition=null;var s=bt;bt=1;var l=Rl;Rl|=4,_l.current=null,function(e,t){if(ei=Ht,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,l=-1,u=-1,c=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(l=s+i),f!==o||0!==r&&3!==f.nodeType||(u=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++c===i&&(l=s),d===o&&++h===r&&(u=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(w){Du(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,vl(n,e,i),$e(),Rl=l,bt=s,Pl.transition=o}else e.current=n;if(Xl&&(Xl=!1,Vl=e,ql=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Yl,Yl=null,e;0!==(1&ql)&&0!==e.tag&&Eu(),o=e.pendingLanes,0!==(1&o)?e===Ql?$l++:($l=0,Ql=e):$l=0,zi()}(e,t,n,r)}finally{Pl.transition=i,bt=r}return null}function Eu(){if(null!==Vl){var e=xt(ql),t=Pl.transition,n=bt;try{if(Pl.transition=null,bt=16>e?16:e,null===Vl)var r=!1;else{if(e=Vl,Vl=null,ql=0,0!==(6&Rl))throw Error(a(331));var i=Rl;for(Rl|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Zs=c;null!==Zs;){var h=Zs;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var f=h.child;if(null!==f)f.return=h,Zs=f;else for(;null!==Zs;){var d=(h=Zs).sibling,p=h.return;if(al(h),h===c){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Zs=v;break e}Zs=o.return}}var b=e.current;for(Zs=b;null!==Zs;){var x=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Zs=x;else e:for(s=b;null!==Zs;){if(0!==(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(E){Du(l,l.return,E)}if(l===s){Zs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zs=w;break e}Zs=l.return}}if(Rl=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{bt=n,Pl.transition=t}}return!1}function ku(e,t,n){e=Ba(e,t=ds(0,t=us(n,t),1),1),t=eu(),null!==e&&(yt(e,1,t),ru(e,t))}function Du(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Ba(t,e=ps(t,e=us(n,e),1),1),e=eu(),null!==t&&(yt(t,1,e),ru(t,e));break}}t=t.return}}function Su(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Ol&n)===n&&(4===Al||3===Al&&(130023424&Ol)===Ol&&500>Qe()-Kl?fu(e,0):jl|=n),ru(e,t)}function _u(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Aa(e,t))&&(yt(e,t,n),ru(e,n))}function Pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_u(e,n)}function Ru(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),_u(e,n)}function Tu(e,t){return Xe(e,t)}function Cu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ou(e,t,n,r){return new Cu(e,t,n,r)}function Nu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Iu(e,t){var n=e.alternate;return null===n?((n=Ou(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Au(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Nu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Lu(n.children,i,o,t);case D:s=8,i|=8;break;case S:return(e=Ou(12,n,t,2|i)).elementType=S,e.lanes=o,e;case T:return(e=Ou(13,n,t,i)).elementType=T,e.lanes=o,e;case C:return(e=Ou(19,n,t,i)).elementType=C,e.lanes=o,e;case I:return Fu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:s=10;break e;case P:s=9;break e;case R:s=11;break e;case O:s=14;break e;case N:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ou(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lu(e,t,n,r){return(e=Ou(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Ou(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Mu(e,t,n){return(e=Ou(6,e,null,t)).lanes=n,e}function ju(e,t,n){return(t=Ou(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uu(e,t,n,r,i,a,o,s,l){return e=new Bu(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ou(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fa(a),e}function Ku(e){if(!e)return Pi;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ni(n))return Li(e,n,t)}return t}function zu(e,t,n,r,i,a,o,s,l){return(e=Uu(n,r,!0,e,0,a,0,s,l)).context=Ku(null),n=e.current,(a=ja(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,Ba(n,a,i),e.current.lanes=i,yt(e,i,r),ru(e,r),e}function Wu(e,t,n,r){var i=t.current,a=eu(),o=tu(i);return n=Ku(n),null===t.context?t.context=n:t.pendingContext=n,(t=ja(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ba(i,t,o))&&(nu(e,i,o,a),Ua(e,i,o)),o}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gu(e,t){Yu(e,t),(e=e.alternate)&&Yu(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ts(t),da();break;case 5:Qa(t);break;case 1:Ni(t.type)&&Fi(t);break;case 4:qa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(Ea,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(Ja,1&Ja.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ms(e,t,n):(_i(Ja,1&Ja.current),null!==(e=Hs(e,t,n))?e.sibling:null);_i(Ja,1&Ja.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(Ja,Ja.current),r)break;return null;case 22:case 23:return t.lanes=0,Ds(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Ji(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Oi(t,Ri.current);Ta(t,n),i=go(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(o=!0,Fi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fa(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=Rs(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Nu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===R)return 11;if(e===O)return 14}return 2}(r),e=ns(r,e),i){case 0:t=_s(null,t,r,e,n);break e;case 1:t=Ps(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=Es(null,t,r,ns(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ps(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Ts(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ma(e,t),za(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Cs(e,t,r,n,i=us(Error(a(423)),t));break e}if(r!==i){t=Cs(e,t,r,n,i=us(Error(a(424)),t));break e}for(ra=ui(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Hs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return Qa(t),null===e&&ua(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ss(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Ms(e,t,n);case 4:return qa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xa(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,_i(Ea,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ti.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=ja(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ra(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ra(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ta(t,n),r=r(i=Ca(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),Es(e,t,r,i=ns(r.type,i),n);case 15:return ks(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Ws(e,t),t.tag=1,Ni(r)?(e=!0,Fi(t)):e=!1,Ta(t,n),os(t,r,i),ls(t,r,i,n),Rs(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Ds(e,t,n)}throw Error(a(156,t.tag))};var Xu="function"===typeof reportError?reportError:function(e){console.error(e)};function Vu(e){this._internalRoot=e}function qu(e){this._internalRoot=e}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function Ju(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Hu(o);s.call(e)}}Wu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hu(o);a.call(e)}}var o=zu(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),cu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hu(l);s.call(e)}}var l=Uu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),cu((function(){Wu(t,l,n,r)})),l}(n,t,e,i,r);return Hu(o)}qu.prototype.render=Vu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wu(e,t,null,null)},qu.prototype.unmount=Vu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Wu(null,e,null,null)})),t[pi]=null}},qu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Dt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ru(t,Qe()),0===(6&Rl)&&(zl=Qe()+500,zi()))}break;case 13:cu((function(){var t=Aa(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Gu(e,1)}},Et=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)nu(t,e,134217728,eu());Gu(e,134217728)}},kt=function(e){if(13===e.tag){var t=tu(e),n=Aa(e,t);if(null!==n)nu(n,e,t,eu());Gu(e,t)}},Dt=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));X(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Re=uu,Te=cu;var ec={usingClientEntryPoint:!1,Events:[bi,xi,wi,_e,Pe,uu]},tc={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ye(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),at=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$u(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$u(e))throw Error(a(299));var n=!1,r="",i=Xu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Vu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ye(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Qu(t))throw Error(a(200));return Ju(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$u(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Xu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=zu(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new qu(t)},t.render=function(e,t,n){if(!Qu(t))throw Error(a(200));return Ju(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(a(40));return!!e._reactRootContainer&&(cu((function(){Ju(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Ju(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,E=Object.prototype.hasOwnProperty,k={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!D.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:k.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+R(l,0):a,w(o)?(i="",null!=e&&(i=e.replace(P,"$&/")+"/"),T(o,t,i,"",(function(e){return e}))):null!=o&&(_(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(P,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",w(e))for(var u=0;u<e.length;u++){var c=a+R(s=e[u],u);l+=T(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=T(s=s.value,t,i,c=a+R(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},I={transition:null},A={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:I,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)E.call(t,u)&&!D.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,f=null,d=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,x(e),!m)if(null!==r(u))m=!0,I(E);else{var t=r(c);null!==t&&A(w,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(_),_=-1),p=!0;var a=d;try{for(x(n),f=r(u);null!==f&&(!(f.expirationTime>n)||e&&!T());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(u)&&i(u),x(n)}else i(u);f=r(u)}if(null!==f)var l=!0;else{var h=r(c);null!==h&&A(w,h.startTime-n),l=!1}return l}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,D=!1,S=null,_=-1,P=5,R=-1;function T(){return!(t.unstable_now()-R<P)}function C(){if(null!==S){var e=t.unstable_now();R=e;var n=!0;try{n=S(!0,e)}finally{n?k():(D=!1,S=null)}}else D=!1}if("function"===typeof b)k=function(){b(C)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,N=O.port2;O.port1.onmessage=C,k=function(){N.postMessage(null)}}else k=function(){y(C,0)};function I(e){S=e,D||(D=!0,k())}function A(e,n){_=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,I(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(g?(v(_),_=-1):g=!0,A(w,a-o))):(e.sortIndex=s,n(u,e),m||p||(m=!0,I(E))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},440:e=>{"use strict";var t=function(){};e.exports=t},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,a(n)))}return e}function a(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".3109547c.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="druaga:";n.l=(r,i,a,o)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=(t,n)=>{s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/public/druaga/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,a,o=r[0],s=r[1],l=r[2],u=0;if(o.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkdruaga=self.webpackChunkdruaga||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(43),t=n(391),r=n(139),i=n.n(r),a=n(579);const o=["xxl","xl","lg","md","sm","xs"],s="xs",l=e.createContext({prefixes:{},breakpoints:o,minBreakpoint:s}),{Consumer:u,Provider:c}=l;function h(t,n){const{prefixes:r}=(0,e.useContext)(l);return t||r[n]||n}function f(){const{breakpoints:t}=(0,e.useContext)(l);return t}function d(){const{minBreakpoint:t}=(0,e.useContext)(l);return t}const p=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,striped:o,bordered:s,borderless:l,hover:u,size:c,variant:f,responsive:d,...p}=e;const m=h(n,"table"),g=i()(r,m,f&&"".concat(m,"-").concat(f),c&&"".concat(m,"-").concat(c),o&&"".concat(m,"-").concat("string"===typeof o?"striped-".concat(o):"striped"),s&&"".concat(m,"-bordered"),l&&"".concat(m,"-borderless"),u&&"".concat(m,"-hover")),y=(0,a.jsx)("table",{...p,className:g,ref:t});if(d){let e="".concat(m,"-responsive");return"string"===typeof d&&(e="".concat(e,"-").concat(d)),(0,a.jsx)("div",{className:e,children:y})}return y})),m=p,g=["as","disabled"];function y(e){let{tagName:t,disabled:n,href:r,target:i,rel:a,role:o,onClick:s,tabIndex:l=0,type:u}=e;t||(t=null!=r||null!=i||null!=a?"a":"button");const c={tagName:t};if("button"===t)return[{type:u||"button",disabled:n},c];const h=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==s||s(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:l,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:h,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),h(e))}},c]}const v=e.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,g);const[o,{tagName:s}]=y(Object.assign({tagName:n,disabled:r},i));return(0,a.jsx)(s,Object.assign({},i,o,{ref:t}))}));v.displayName="Button";const b=e.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:o="primary",size:s,active:l=!1,disabled:u=!1,className:c,...f}=e;const d=h(r,"btn"),[p,{tagName:m}]=y({tagName:n,disabled:u,...f}),g=m;return(0,a.jsx)(g,{...p,...f,ref:t,disabled:u,className:i()(c,d,l&&"active",o&&"".concat(d,"-").concat(o),s&&"".concat(d,"-").concat(s),f.href&&u&&"disabled")})}));b.displayName="Button";const x=b;var w=n(173),E=n.n(w);const k={type:E().string,tooltip:E().bool,as:E().elementType},D=e.forwardRef(((e,t)=>{let{as:n="div",className:r,type:o="valid",tooltip:s=!1,...l}=e;return(0,a.jsx)(n,{...l,ref:t,className:i()(r,"".concat(o,"-").concat(s?"tooltip":"feedback"))})}));D.displayName="Feedback",D.propTypes=k;const S=D,_=e.createContext({}),P=e.forwardRef(((t,n)=>{let{id:r,bsPrefix:o,className:s,type:l="checkbox",isValid:u=!1,isInvalid:c=!1,as:f="input",...d}=t;const{controlId:p}=(0,e.useContext)(_);return o=h(o,"form-check-input"),(0,a.jsx)(f,{...d,ref:n,type:l,id:r||p,className:i()(s,o,u&&"is-valid",c&&"is-invalid")})}));P.displayName="FormCheckInput";const R=P,T=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:o,htmlFor:s,...l}=t;const{controlId:u}=(0,e.useContext)(_);return r=h(r,"form-check-label"),(0,a.jsx)("label",{...l,ref:n,htmlFor:s||u,className:i()(o,r)})}));T.displayName="FormCheckLabel";const C=T;const O=e.forwardRef(((t,n)=>{let{id:r,bsPrefix:o,bsSwitchPrefix:s,inline:l=!1,reverse:u=!1,disabled:c=!1,isValid:f=!1,isInvalid:d=!1,feedbackTooltip:p=!1,feedback:m,feedbackType:g,className:y,style:v,title:b="",type:x="checkbox",label:w,children:E,as:k="input",...D}=t;o=h(o,"form-check"),s=h(s,"form-switch");const{controlId:P}=(0,e.useContext)(_),T=(0,e.useMemo)((()=>({controlId:r||P})),[P,r]),O=!E&&null!=w&&!1!==w||function(t,n){return e.Children.toArray(t).some((t=>e.isValidElement(t)&&t.type===n))}(E,C),N=(0,a.jsx)(R,{...D,type:"switch"===x?"checkbox":x,ref:n,isValid:f,isInvalid:d,disabled:c,as:k});return(0,a.jsx)(_.Provider,{value:T,children:(0,a.jsx)("div",{style:v,className:i()(y,O&&o,l&&"".concat(o,"-inline"),u&&"".concat(o,"-reverse"),"switch"===x&&s),children:E||(0,a.jsxs)(a.Fragment,{children:[N,O&&(0,a.jsx)(C,{title:b,children:w}),m&&(0,a.jsx)(S,{type:g,tooltip:p,children:m})]})})})}));O.displayName="FormCheck";const N=Object.assign(O,{Input:R,Label:C});n(440);const I=e.forwardRef(((t,n)=>{let{bsPrefix:r,type:o,size:s,htmlSize:l,id:u,className:c,isValid:f=!1,isInvalid:d=!1,plaintext:p,readOnly:m,as:g="input",...y}=t;const{controlId:v}=(0,e.useContext)(_);return r=h(r,"form-control"),(0,a.jsx)(g,{...y,type:o,size:l,ref:n,readOnly:m,id:u||v,className:i()(c,p?"".concat(r,"-plaintext"):r,s&&"".concat(r,"-").concat(s),"color"===o&&"".concat(r,"-color"),f&&"is-valid",d&&"is-invalid")})}));I.displayName="FormControl";const A=Object.assign(I,{Feedback:S}),L=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:o="div",...s}=e;return r=h(r,"form-floating"),(0,a.jsx)(o,{ref:t,className:i()(n,r),...s})}));L.displayName="FormFloating";const F=L,M=e.forwardRef(((t,n)=>{let{controlId:r,as:i="div",...o}=t;const s=(0,e.useMemo)((()=>({controlId:r})),[r]);return(0,a.jsx)(_.Provider,{value:s,children:(0,a.jsx)(i,{...o,ref:n})})}));M.displayName="FormGroup";const j=M;const B=e.forwardRef(((e,t)=>{const[{className:n,...r},{as:o="div",bsPrefix:s,spans:l}]=function(e){let{as:t,bsPrefix:n,className:r,...a}=e;n=h(n,"col");const o=f(),s=d(),l=[],u=[];return o.forEach((e=>{const t=a[e];let r,i,o;delete a[e],"object"===typeof t&&null!=t?({span:r,offset:i,order:o}=t):r=t;const c=e!==s?"-".concat(e):"";r&&l.push(!0===r?"".concat(n).concat(c):"".concat(n).concat(c,"-").concat(r)),null!=o&&u.push("order".concat(c,"-").concat(o)),null!=i&&u.push("offset".concat(c,"-").concat(i))})),[{...a,className:i()(r,...l,...u)},{as:t,bsPrefix:n,spans:l}]}(e);return(0,a.jsx)(o,{...r,ref:t,className:i()(n,!l.length&&s)})}));B.displayName="Col";const U=B,K=e.forwardRef(((t,n)=>{let{as:r="label",bsPrefix:o,column:s=!1,visuallyHidden:l=!1,className:u,htmlFor:c,...f}=t;const{controlId:d}=(0,e.useContext)(_);o=h(o,"form-label");let p="col-form-label";"string"===typeof s&&(p="".concat(p," ").concat(p,"-").concat(s));const m=i()(u,o,l&&"visually-hidden",s&&p);return c=c||d,s?(0,a.jsx)(U,{ref:n,as:"label",className:m,htmlFor:c,...f}):(0,a.jsx)(r,{ref:n,className:m,htmlFor:c,...f})}));K.displayName="FormLabel";const z=K,W=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:o,id:s,...l}=t;const{controlId:u}=(0,e.useContext)(_);return r=h(r,"form-range"),(0,a.jsx)("input",{...l,type:"range",ref:n,className:i()(o,r),id:s||u})}));W.displayName="FormRange";const H=W,Y=e.forwardRef(((t,n)=>{let{bsPrefix:r,size:o,htmlSize:s,className:l,isValid:u=!1,isInvalid:c=!1,id:f,...d}=t;const{controlId:p}=(0,e.useContext)(_);return r=h(r,"form-select"),(0,a.jsx)("select",{...d,size:s,ref:n,className:i()(l,r,o&&"".concat(r,"-").concat(o),u&&"is-valid",c&&"is-invalid"),id:f||p})}));Y.displayName="FormSelect";const G=Y,X=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:o="small",muted:s,...l}=e;return n=h(n,"form-text"),(0,a.jsx)(o,{...l,ref:t,className:i()(r,n,s&&"text-muted")})}));X.displayName="FormText";const V=X,q=e.forwardRef(((e,t)=>(0,a.jsx)(N,{...e,ref:t,type:"switch"})));q.displayName="Switch";const $=Object.assign(q,{Input:N.Input,Label:N.Label}),Q=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:o,controlId:s,label:l,...u}=e;return n=h(n,"form-floating"),(0,a.jsxs)(j,{ref:t,className:i()(r,n),controlId:s,...u,children:[o,(0,a.jsx)("label",{htmlFor:s,children:l})]})}));Q.displayName="FloatingLabel";const Z=Q,J={_ref:E().any,validated:E().bool,as:E().elementType},ee=e.forwardRef(((e,t)=>{let{className:n,validated:r,as:o="form",...s}=e;return(0,a.jsx)(o,{...s,ref:t,className:i()(n,r&&"was-validated")})}));ee.displayName="Form",ee.propTypes=J;const te=Object.assign(ee,{Group:j,Control:A,Floating:F,Check:N,Switch:$,Label:z,Text:V,Range:H,Select:G,FloatingLabel:Z}),ne=!("undefined"===typeof window||!window.document||!window.document.createElement);var re=!1,ie=!1;try{var ae={get passive(){return re=!0},get once(){return ie=re=!0}};ne&&(window.addEventListener("test",ae,ae),window.removeEventListener("test",ae,!0))}catch($l){}const oe=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!ie){var i=r.once,a=r.capture,o=n;!ie&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,re?r:a)}e.addEventListener(t,n,r)};function se(e){return e&&e.ownerDocument||document}const le=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var ue;function ce(e){if((!ue&&0!==ue||e)&&ne){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),ue=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return ue}const he=function(t){const n=(0,e.useRef)(t);return(0,e.useEffect)((()=>{n.current=t}),[t]),n};function fe(t){const n=he(t);return(0,e.useCallback)((function(){return n.current&&n.current(...arguments)}),[n])}const de=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const pe=function(t,n){return(0,e.useMemo)((()=>function(e,t){const n=de(e),r=de(t);return e=>{n&&n(e),r&&r(e)}}(t,n)),[t,n])};function me(t){const n=function(t){const n=(0,e.useRef)(t);return n.current=t,n}(t);(0,e.useEffect)((()=>()=>n.current()),[])}function ge(e,t){return function(e){var t=se(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var ye=/([A-Z])/g;var ve=/^ms-/;function be(e){return function(e){return e.replace(ye,"-$1").toLowerCase()}(e).replace(ve,"-ms-")}var xe=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const we=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(be(t))||ge(e).getPropertyValue(be(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!xe.test(e))}(i)?n+=be(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(be(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};const Ee=function(e,t,n,r){return oe(e,t,n,r),function(){le(e,t,n,r)}};function ke(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=Ee(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function De(e,t,n,r){null==n&&(n=function(e){var t=we(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=ke(e,n,r),a=Ee(e,"transitionend",t);return function(){i(),a()}}function Se(e){void 0===e&&(e=se());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch($l){return e.body}}function _e(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}var Pe=n(950);const Re=(Te="modal-open","".concat("data-rr-ui-").concat(Te));var Te;const Ce=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(we(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(Re,""),we(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(Re),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},Oe=(0,e.createContext)(ne?window:void 0);Oe.Provider;function Ne(){return(0,e.useContext)(Oe)}const Ie=(e,t)=>ne?null==e?(t||se()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const Ae="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,Le="undefined"!==typeof document||Ae?e.useLayoutEffect:e.useEffect;const Fe=function(t){let{children:n,in:r,onExited:i,mountOnEnter:a,unmountOnExit:o}=t;const s=(0,e.useRef)(null),l=(0,e.useRef)(r),u=fe(i);(0,e.useEffect)((()=>{r?l.current=!0:u(s.current)}),[r,u]);const c=pe(s,n.ref),h=(0,e.cloneElement)(n,{ref:c});return r?h:o||!l.current&&a?null:h},Me=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function je(t){let{onEnter:n,onEntering:r,onEntered:i,onExit:a,onExiting:o,onExited:s,addEndListener:l,children:u}=t,c=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,Me);const h=(0,e.useRef)(null),f=pe(h,"function"===typeof u?null:u.ref),d=e=>t=>{e&&h.current&&e(h.current,t)},p=(0,e.useCallback)(d(n),[n]),m=(0,e.useCallback)(d(r),[r]),g=(0,e.useCallback)(d(i),[i]),y=(0,e.useCallback)(d(a),[a]),v=(0,e.useCallback)(d(o),[o]),b=(0,e.useCallback)(d(s),[s]),x=(0,e.useCallback)(d(l),[l]);return Object.assign({},c,{nodeRef:h},n&&{onEnter:p},r&&{onEntering:m},i&&{onEntered:g},a&&{onExit:y},o&&{onExiting:v},s&&{onExited:b},l&&{addEndListener:x},{children:"function"===typeof u?(e,t)=>u(e,Object.assign({},t,{ref:f})):(0,e.cloneElement)(u,{ref:f})})}const Be=["component"];const Ue=e.forwardRef(((e,t)=>{let{component:n}=e;const r=je(function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Be));return(0,a.jsx)(n,Object.assign({ref:t},r))}));function Ke(t){let{children:n,in:r,onExited:i,onEntered:a,transition:o}=t;const[s,l]=(0,e.useState)(!r);r&&s&&l(!1);const u=function(t){let{in:n,onTransition:r}=t;const i=(0,e.useRef)(null),a=(0,e.useRef)(!0),o=fe(r);return Le((()=>{if(!i.current)return;let e=!1;return o({in:n,element:i.current,initial:a.current,isStale:()=>e}),()=>{e=!0}}),[n,o]),Le((()=>(a.current=!1,()=>{a.current=!0})),[]),i}({in:!!r,onTransition:e=>{Promise.resolve(o(e)).then((()=>{e.isStale()||(e.in?null==a||a(e.element,e.initial):(l(!0),null==i||i(e.element)))}),(t=>{throw e.in||l(!0),t}))}}),c=pe(u,n.ref);return s&&!r?null:(0,e.cloneElement)(n,{ref:c})}function ze(e,t,n){return e?(0,a.jsx)(Ue,Object.assign({},n,{component:e})):t?(0,a.jsx)(Ke,Object.assign({},n,{transition:t})):(0,a.jsx)(Fe,Object.assign({},n))}const We=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let He;function Ye(t){const n=Ne(),r=t||function(e){return He||(He=new Ce({ownerDocument:null==e?void 0:e.document})),He}(n),i=(0,e.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>r.add(i.current),remove:()=>r.remove(i.current),isTopModal:()=>r.isTopModal(i.current),setDialogRef:(0,e.useCallback)((e=>{i.current.dialog=e}),[]),setBackdropRef:(0,e.useCallback)((e=>{i.current.backdrop=e}),[])})}const Ge=(0,e.forwardRef)(((t,n)=>{let{show:r=!1,role:i="dialog",className:o,style:s,children:l,backdrop:u=!0,keyboard:c=!0,onBackdropClick:h,onEscapeKeyDown:f,transition:d,runTransition:p,backdropTransition:m,runBackdropTransition:g,autoFocus:y=!0,enforceFocus:v=!0,restoreFocus:b=!0,restoreFocusOptions:x,renderDialog:w,renderBackdrop:E=(e=>(0,a.jsx)("div",Object.assign({},e))),manager:k,container:D,onShow:S,onHide:_=(()=>{}),onExit:P,onExited:R,onExiting:T,onEnter:C,onEntering:O,onEntered:N}=t,I=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,We);const A=Ne(),L=function(t,n){const r=Ne(),[i,a]=(0,e.useState)((()=>Ie(t,null==r?void 0:r.document)));if(!i){const e=Ie(t);e&&a(e)}return(0,e.useEffect)((()=>{n&&i&&n(i)}),[n,i]),(0,e.useEffect)((()=>{const e=Ie(t);e!==i&&a(e)}),[t,i]),i}(D),F=Ye(k),M=function(){const t=(0,e.useRef)(!0),n=(0,e.useRef)((()=>t.current));return(0,e.useEffect)((()=>(t.current=!0,()=>{t.current=!1})),[]),n.current}(),j=function(t){const n=(0,e.useRef)(null);return(0,e.useEffect)((()=>{n.current=t})),n.current}(r),[B,U]=(0,e.useState)(!r),K=(0,e.useRef)(null);(0,e.useImperativeHandle)(n,(()=>F),[F]),ne&&!j&&r&&(K.current=Se(null==A?void 0:A.document)),r&&B&&U(!1);const z=fe((()=>{if(F.add(),V.current=Ee(document,"keydown",G),X.current=Ee(document,"focus",(()=>setTimeout(H)),!0),S&&S(),y){var e,t;const n=Se(null!=(e=null==(t=F.dialog)?void 0:t.ownerDocument)?e:null==A?void 0:A.document);F.dialog&&n&&!_e(F.dialog,n)&&(K.current=n,F.dialog.focus())}})),W=fe((()=>{var e;(F.remove(),null==V.current||V.current(),null==X.current||X.current(),b)&&(null==(e=K.current)||null==e.focus||e.focus(x),K.current=null)}));(0,e.useEffect)((()=>{r&&L&&z()}),[r,L,z]),(0,e.useEffect)((()=>{B&&W()}),[B,W]),me((()=>{W()}));const H=fe((()=>{if(!v||!M()||!F.isTopModal())return;const e=Se(null==A?void 0:A.document);F.dialog&&e&&!_e(F.dialog,e)&&F.dialog.focus()})),Y=fe((e=>{e.target===e.currentTarget&&(null==h||h(e),!0===u&&_())})),G=fe((e=>{c&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&F.isTopModal()&&(null==f||f(e),e.defaultPrevented||_())})),X=(0,e.useRef)(),V=(0,e.useRef)();if(!L)return null;const q=Object.assign({role:i,ref:F.setDialogRef,"aria-modal":"dialog"===i||void 0},I,{style:s,className:o,tabIndex:-1});let $=w?w(q):(0,a.jsx)("div",Object.assign({},q,{children:e.cloneElement(l,{role:"document"})}));$=ze(d,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!r,onExit:P,onExiting:T,onExited:function(){U(!0),null==R||R(...arguments)},onEnter:C,onEntering:O,onEntered:N,children:$});let Q=null;return u&&(Q=E({ref:F.setBackdropRef,onClick:Y}),Q=ze(m,g,{in:!!r,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Q})),(0,a.jsx)(a.Fragment,{children:Pe.createPortal((0,a.jsxs)(a.Fragment,{children:[Q,$]}),L)})}));Ge.displayName="Modal";const Xe=Object.assign(Ge,{Manager:Ce});var Ve=Function.prototype.bind.call(Function.prototype.call,[].slice);function qe(e,t){return Ve(e.querySelectorAll(t))}function $e(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const Qe=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ze=".sticky-top",Je=".navbar-toggler";class et extends Ce{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,we(t,{[e]:"".concat(parseFloat(we(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],we(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";qe(t,Qe).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth))),qe(t,Ze).forEach((t=>this.adjustAndStore(a,t,-e.scrollBarWidth))),qe(t,Je).forEach((t=>this.adjustAndStore(a,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=$e(n.className,r):n.setAttribute("class",$e(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";qe(t,Qe).forEach((e=>this.restore(i,e))),qe(t,Ze).forEach((e=>this.restore(a,e))),qe(t,Je).forEach((e=>this.restore(a,e)))}}let tt;function nt(e,t){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nt(e,t)}const rt=!1,it=e.createContext(null);var at="unmounted",ot="exited",st="entering",lt="entered",ut="exiting",ct=function(t){var n,r;function i(e,n){var r;r=t.call(this,e,n)||this;var i,a=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?a?(i=ot,r.appearStatus=st):i=lt:i=e.unmountOnExit||e.mountOnEnter?at:ot,r.state={status:i},r.nextCallback=null,r}r=t,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,nt(n,r),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===at?{status:ot}:null};var a=i.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==st&&n!==lt&&(t=st):n!==st&&n!==lt||(t=ut)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===st){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Pe.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ot&&this.setState({status:at})},a.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[Pe.findDOMNode(this),r],a=i[0],o=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||rt?this.safeSetState({status:lt},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:st},(function(){t.props.onEntering(a,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:lt},(function(){t.props.onEntered(a,o)}))}))})))},a.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Pe.findDOMNode(this);t&&!rt?(this.props.onExit(r),this.safeSetState({status:ut},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:ot},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:ot},(function(){e.props.onExited(r)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Pe.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},a.render=function(){var t=this.state.status;if(t===at)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(it.Provider,{value:null},"function"===typeof r?r(t,i):e.cloneElement(e.Children.only(r),i))},i}(e.Component);function ht(){}ct.contextType=it,ct.propTypes={},ct.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ht,onEntering:ht,onEntered:ht,onExit:ht,onExiting:ht,onExited:ht},ct.UNMOUNTED=at,ct.EXITED=ot,ct.ENTERING=st,ct.ENTERED=lt,ct.EXITING=ut;const ft=ct;function dt(e,t){const n=we(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function pt(e,t){const n=dt(e,"transitionDuration"),r=dt(e,"transitionDelay"),i=De(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}const mt=e.forwardRef(((t,n)=>{let{onEnter:r,onEntering:i,onEntered:o,onExit:s,onExiting:l,onExited:u,addEndListener:c,children:h,childRef:f,...d}=t;const p=(0,e.useRef)(null),m=pe(p,f),g=e=>{var t;m((t=e)&&"setState"in t?Pe.findDOMNode(t):null!=t?t:null)},y=e=>t=>{e&&p.current&&e(p.current,t)},v=(0,e.useCallback)(y(r),[r]),b=(0,e.useCallback)(y(i),[i]),x=(0,e.useCallback)(y(o),[o]),w=(0,e.useCallback)(y(s),[s]),E=(0,e.useCallback)(y(l),[l]),k=(0,e.useCallback)(y(u),[u]),D=(0,e.useCallback)(y(c),[c]);return(0,a.jsx)(ft,{ref:n,...d,onEnter:v,onEntered:x,onEntering:b,onExit:w,onExited:k,onExiting:E,addEndListener:D,nodeRef:p,children:"function"===typeof h?(e,t)=>h(e,{...t,ref:g}):e.cloneElement(h,{ref:g})})})),gt=mt,yt={[st]:"show",[lt]:"show"},vt=e.forwardRef(((t,n)=>{let{className:r,children:o,transitionClasses:s={},onEnter:l,...u}=t;const c={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...u},h=(0,e.useCallback)(((e,t)=>{!function(e){e.offsetHeight}(e),null==l||l(e,t)}),[l]);return(0,a.jsx)(gt,{ref:n,addEndListener:pt,...c,onEnter:h,childRef:o.ref,children:(t,n)=>e.cloneElement(o,{...n,className:i()("fade",r,o.props.className,yt[t],s[t])})})}));vt.displayName="Fade";const bt=vt,xt=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:o="div",...s}=e;return r=h(r,"modal-body"),(0,a.jsx)(o,{ref:t,className:i()(n,r),...s})}));xt.displayName="ModalBody";const wt=xt,Et=e.createContext({onHide(){}}),kt=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,contentClassName:o,centered:s,size:l,fullscreen:u,children:c,scrollable:f,...d}=e;n=h(n,"modal");const p="".concat(n,"-dialog"),m="string"===typeof u?"".concat(n,"-fullscreen-").concat(u):"".concat(n,"-fullscreen");return(0,a.jsx)("div",{...d,ref:t,className:i()(p,r,l&&"".concat(n,"-").concat(l),s&&"".concat(p,"-centered"),f&&"".concat(p,"-scrollable"),u&&m),children:(0,a.jsx)("div",{className:i()("".concat(n,"-content"),o),children:c})})}));kt.displayName="ModalDialog";const Dt=kt,St=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:o="div",...s}=e;return r=h(r,"modal-footer"),(0,a.jsx)(o,{ref:t,className:i()(n,r),...s})}));St.displayName="ModalFooter";const _t=St,Pt={"aria-label":E().string,onClick:E().func,variant:E().oneOf(["white"])},Rt=e.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":o="Close",...s}=e;return(0,a.jsx)("button",{ref:t,type:"button",className:i()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":o,...s})}));Rt.displayName="CloseButton",Rt.propTypes=Pt;const Tt=Rt,Ct=e.forwardRef(((t,n)=>{let{closeLabel:r="Close",closeVariant:i,closeButton:o=!1,onHide:s,children:l,...u}=t;const c=(0,e.useContext)(Et),h=fe((()=>{null==c||c.onHide(),null==s||s()}));return(0,a.jsxs)("div",{ref:n,...u,children:[l,o&&(0,a.jsx)(Tt,{"aria-label":r,variant:i,onClick:h})]})})),Ot=Ct,Nt=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:o="Close",closeButton:s=!1,...l}=e;return n=h(n,"modal-header"),(0,a.jsx)(Ot,{ref:t,...l,className:i()(r,n),closeLabel:o,closeButton:s})}));Nt.displayName="ModalHeader";const It=Nt,At=(Lt="h4",e.forwardRef(((e,t)=>(0,a.jsx)("div",{...e,ref:t,className:i()(e.className,Lt)}))));var Lt;const Ft=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:o=At,...s}=e;return r=h(r,"modal-title"),(0,a.jsx)(o,{ref:t,className:i()(n,r),...s})}));Ft.displayName="ModalTitle";const Mt=Ft;function jt(e){return(0,a.jsx)(bt,{...e,timeout:null})}function Bt(e){return(0,a.jsx)(bt,{...e,timeout:null})}const Ut=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:o,style:s,dialogClassName:u,contentClassName:c,children:f,dialogAs:d=Dt,"data-bs-theme":p,"aria-labelledby":m,"aria-describedby":g,"aria-label":y,show:v=!1,animation:b=!0,backdrop:x=!0,keyboard:w=!0,onEscapeKeyDown:E,onShow:k,onHide:D,container:S,autoFocus:_=!0,enforceFocus:P=!0,restoreFocus:R=!0,restoreFocusOptions:T,onEntered:C,onExit:O,onExiting:N,onEnter:I,onEntering:A,onExited:L,backdropClassName:F,manager:M,...j}=t;const[B,U]=(0,e.useState)({}),[K,z]=(0,e.useState)(!1),W=(0,e.useRef)(!1),H=(0,e.useRef)(!1),Y=(0,e.useRef)(null),[G,X]=(0,e.useState)(null),V=pe(n,X),q=fe(D),$=function(){const{dir:t}=(0,e.useContext)(l);return"rtl"===t}();r=h(r,"modal");const Q=(0,e.useMemo)((()=>({onHide:q})),[q]);function Z(){return M||function(e){return tt||(tt=new et(e)),tt}({isRTL:$})}function J(e){if(!ne)return;const t=Z().getScrollbarWidth()>0,n=e.scrollHeight>se(e).documentElement.clientHeight;U({paddingRight:t&&!n?ce():void 0,paddingLeft:!t&&n?ce():void 0})}const ee=fe((()=>{G&&J(G.dialog)}));me((()=>{le(window,"resize",ee),null==Y.current||Y.current()}));const te=()=>{W.current=!0},re=e=>{W.current&&G&&e.target===G.dialog&&(H.current=!0),W.current=!1},ie=()=>{z(!0),Y.current=De(G.dialog,(()=>{z(!1)}))},ae=e=>{"static"!==x?H.current||e.target!==e.currentTarget?H.current=!1:null==D||D():(e=>{e.target===e.currentTarget&&ie()})(e)},ue=(0,e.useCallback)((e=>(0,a.jsx)("div",{...e,className:i()("".concat(r,"-backdrop"),F,!b&&"show")})),[b,F,r]),he={...s,...B};he.display="block";return(0,a.jsx)(Et.Provider,{value:Q,children:(0,a.jsx)(Xe,{show:v,ref:V,backdrop:x,container:S,keyboard:!0,autoFocus:_,enforceFocus:P,restoreFocus:R,restoreFocusOptions:T,onEscapeKeyDown:e=>{w?null==E||E(e):(e.preventDefault(),"static"===x&&ie())},onShow:k,onHide:D,onEnter:(e,t)=>{e&&J(e),null==I||I(e,t)},onEntering:(e,t)=>{null==A||A(e,t),oe(window,"resize",ee)},onEntered:C,onExit:e=>{null==Y.current||Y.current(),null==O||O(e)},onExiting:N,onExited:e=>{e&&(e.style.display=""),null==L||L(e),le(window,"resize",ee)},manager:Z(),transition:b?jt:void 0,backdropTransition:b?Bt:void 0,renderBackdrop:ue,renderDialog:e=>(0,a.jsx)("div",{role:"dialog",...e,style:he,className:i()(o,r,K&&"".concat(r,"-static"),!b&&"show"),onClick:x?ae:void 0,onMouseUp:re,"data-bs-theme":p,"aria-label":y,"aria-labelledby":m,"aria-describedby":g,children:(0,a.jsx)(d,{...j,onMouseDown:te,className:u,contentClassName:c,children:f})})})})}));Ut.displayName="Modal";const Kt=Object.assign(Ut,{Body:wt,Header:It,Title:Mt,Footer:_t,Dialog:Dt,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),zt=e.forwardRef(((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:o="div",className:s,...l}=e;const u=h(n,"container"),c="string"===typeof r?"-".concat(r):"-fluid";return(0,a.jsx)(o,{ref:t,...l,className:i()(s,r?"".concat(u).concat(c):u)})}));zt.displayName="Container";const Wt=zt,Ht=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:o="div",...s}=e;const l=h(n,"row"),u=f(),c=d(),p="".concat(l,"-cols"),m=[];return u.forEach((e=>{const t=s[e];let n;delete s[e],null!=t&&"object"===typeof t?({cols:n}=t):n=t;const r=e!==c?"-".concat(e):"";null!=n&&m.push("".concat(p).concat(r,"-").concat(n))})),(0,a.jsx)(o,{ref:t,...s,className:i()(r,l,...m)})}));Ht.displayName="Row";const Yt=Ht;var Gt=["color","size","title","className"];function Xt(){return Xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xt.apply(this,arguments)}function Vt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var qt=(0,e.forwardRef)((function(t,n){var r=t.color,i=t.size,a=t.title,o=t.className,s=Vt(t,Gt);return e.createElement("svg",Xt({ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:r,className:["bi","bi-arrow-up",o].filter(Boolean).join(" ")},s),a?e.createElement("title",null,a):null,e.createElement("path",{fillRule:"evenodd",d:"M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5"}))}));qt.propTypes={color:E().string,size:E().oneOfType([E().string,E().number]),title:E().string,className:E().string},qt.defaultProps={color:"currentColor",size:"1em",title:null,className:""};const $t=qt;var Qt=["color","size","title","className"];function Zt(){return Zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zt.apply(this,arguments)}function Jt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var en=(0,e.forwardRef)((function(t,n){var r=t.color,i=t.size,a=t.title,o=t.className,s=Jt(t,Qt);return e.createElement("svg",Zt({ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:r,className:["bi","bi-arrow-left",o].filter(Boolean).join(" ")},s),a?e.createElement("title",null,a):null,e.createElement("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"}))}));en.propTypes={color:E().string,size:E().oneOfType([E().string,E().number]),title:E().string,className:E().string},en.defaultProps={color:"currentColor",size:"1em",title:null,className:""};const tn=en;var nn=["color","size","title","className"];function rn(){return rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rn.apply(this,arguments)}function an(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var on=(0,e.forwardRef)((function(t,n){var r=t.color,i=t.size,a=t.title,o=t.className,s=an(t,nn);return e.createElement("svg",rn({ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:r,className:["bi","bi-arrow-down",o].filter(Boolean).join(" ")},s),a?e.createElement("title",null,a):null,e.createElement("path",{fillRule:"evenodd",d:"M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1"}))}));on.propTypes={color:E().string,size:E().oneOfType([E().string,E().number]),title:E().string,className:E().string},on.defaultProps={color:"currentColor",size:"1em",title:null,className:""};const sn=on;var ln=["color","size","title","className"];function un(){return un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},un.apply(this,arguments)}function cn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var hn=(0,e.forwardRef)((function(t,n){var r=t.color,i=t.size,a=t.title,o=t.className,s=cn(t,ln);return e.createElement("svg",un({ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:r,className:["bi","bi-arrow-right",o].filter(Boolean).join(" ")},s),a?e.createElement("title",null,a):null,e.createElement("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"}))}));hn.propTypes={color:E().string,size:E().oneOfType([E().string,E().number]),title:E().string,className:E().string},hn.defaultProps={color:"currentColor",size:"1em",title:null,className:""};const fn=hn;var dn=["color","size","title","className"];function pn(){return pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pn.apply(this,arguments)}function mn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var gn=(0,e.forwardRef)((function(t,n){var r=t.color,i=t.size,a=t.title,o=t.className,s=mn(t,dn);return e.createElement("svg",pn({ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:r,className:["bi","bi-card-list",o].filter(Boolean).join(" ")},s),a?e.createElement("title",null,a):null,e.createElement("path",{d:"M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2z"}),e.createElement("path",{d:"M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8m0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0M4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0"}))}));gn.propTypes={color:E().string,size:E().oneOfType([E().string,E().number]),title:E().string,className:E().string},gn.defaultProps={color:"currentColor",size:"1em",title:null,className:""};const yn=gn;var vn=["color","size","title","className"];function bn(){return bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bn.apply(this,arguments)}function xn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var wn=(0,e.forwardRef)((function(t,n){var r=t.color,i=t.size,a=t.title,o=t.className,s=xn(t,vn);return e.createElement("svg",bn({ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:r,className:["bi","bi-caret-right",o].filter(Boolean).join(" ")},s),a?e.createElement("title",null,a):null,e.createElement("path",{d:"M6 12.796V3.204L11.481 8zm.659.753 5.48-4.796a1 1 0 0 0 0-1.506L6.66 2.451C6.011 1.885 5 2.345 5 3.204v9.592a1 1 0 0 0 1.659.753"}))}));wn.propTypes={color:E().string,size:E().oneOfType([E().string,E().number]),title:E().string,className:E().string},wn.defaultProps={color:"currentColor",size:"1em",title:null,className:""};const En=wn;var kn=["color","size","title","className"];function Dn(){return Dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dn.apply(this,arguments)}function Sn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var _n=(0,e.forwardRef)((function(t,n){var r=t.color,i=t.size,a=t.title,o=t.className,s=Sn(t,kn);return e.createElement("svg",Dn({ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:r,className:["bi","bi-box-arrow-in-down-left",o].filter(Boolean).join(" ")},s),a?e.createElement("title",null,a):null,e.createElement("path",{fillRule:"evenodd",d:"M9.636 2.5a.5.5 0 0 0-.5-.5H2.5A1.5 1.5 0 0 0 1 3.5v10A1.5 1.5 0 0 0 2.5 15h10a1.5 1.5 0 0 0 1.5-1.5V6.864a.5.5 0 0 0-1 0V13.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5"}),e.createElement("path",{fillRule:"evenodd",d:"M5 10.5a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 0-1H6.707l8.147-8.146a.5.5 0 0 0-.708-.708L6 9.293V5.5a.5.5 0 0 0-1 0z"}))}));_n.propTypes={color:E().string,size:E().oneOfType([E().string,E().number]),title:E().string,className:E().string},_n.defaultProps={color:"currentColor",size:"1em",title:null,className:""};const Pn=_n;var Rn=n(809);const Tn=Symbol.for("Dexie"),Cn=globalThis[Tn]||(globalThis[Tn]=Rn);if(Rn.semVer!==Cn.semVer)throw new Error("Two different versions of Dexie loaded in the same app: ".concat(Rn.semVer," and ").concat(Cn.semVer));const{liveQuery:On,mergeRanges:Nn,rangesOverlap:In,RangeSet:An,cmp:Ln,Entity:Fn,PropModSymbol:Mn,PropModification:jn,replacePrefix:Bn}=Cn,Un=Cn;const Kn=new class extends Un{constructor(){super("Druaga"),this.data=void 0,this.config=void 0,this.version(2).stores({saveData:"++id, num, data",configData:"++id, name, config"}),this.data=this.table("saveData"),this.config=this.table("configData")}async getSaveData(e){const t=await this.data.get({num:e});return t||{num:e,data:{curStage:1,continueFlag:!1,continueCount:0,restPlayer:2,maxStage:1,itemMap:{},evilMap:{}}}}async updateSaveData(e){const t=await this.data.get({num:e.num});return t?await this.data.update(t.id,{num:e.num,data:e.data}):await this.data.put({num:e.num,data:e.data}),!0}async deleteSaveData(e){const t=await this.data.get({num:e});t&&await this.data.delete(t.id)}async setConfig(e,t){const n=await this.config.get({name:e});return n?await this.config.update(n.id,{name:e,config:JSON.stringify(t)}):await this.config.put({name:e,config:JSON.stringify(t)}),!0}async getConfig(e){const t=await this.config.get({name:e});return t?JSON.parse(t.config):null}};let zn=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Up=2]="Up",e[e.Down=3]="Down",e[e.Sword=4]="Sword",e[e.Pause=5]="Pause",e[e.Select=6]="Select",e}({});const Wn={default:{axisX:0,axisY:1,buttons:[14,15,12,13,0,1,9,8]},"Wireless Controller (STANDARD GAMEPAD Vendor: 054c Product: 09cc)":{axisX:0,axisY:1,buttons:[14,15,12,13,0,1,9,8]}};class Hn{constructor(){this.keyFlag=void 0,this.keepFlag=void 0,this.keyConfig={ArrowUp:zn.Up,ArrowLeft:zn.Left,ArrowRight:zn.Right,ArrowDown:zn.Down,Space:zn.Sword,ShiftLeft:zn.Select,Enter:zn.Pause},this.buttonName={},this.keyFlag=0,this.keepFlag=0,Kn.getConfig("keyConfig").then((e=>{e&&(this.keyConfig=e,this.buttonName={})}))}processEvent(e){let t=0;return e.key in this.keyConfig?t=1<<this.keyConfig[e.key]:e.code in this.keyConfig&&(t=1<<this.keyConfig[e.code]),!!t&&("keydown"===e.type?this.keyFlag|=t:"keyup"===e.type&&(this.keyFlag&=~t,this.keepFlag&=~t),!0)}isButtonDown(e,t){let n=(this.keyFlag&1<<e&~this.keepFlag)>0;return t&&n&&(this.keepFlag|=1<<e),n}isLeft(e){return this.isButtonDown(zn.Left,e)}isRight(e){return this.isButtonDown(zn.Right,e)}isUp(e){return this.isButtonDown(zn.Up,e)}isDown(e){return this.isButtonDown(zn.Down,e)}isSword(e){return this.isButtonDown(zn.Sword,e)}isPause(e){return this.isButtonDown(zn.Pause,e)}isSelect(e){return this.isButtonDown(zn.Select,e)}getButtonName(e){if(!this.buttonName[e])for(let t in this.keyConfig)if(this.keyConfig[t]===e){let n="";for(let e=0;e<t.length;e++){const r=t[e],i=r.toUpperCase();e>0&&r===i&&(n+=" "),n+=i}this.buttonName[e]=n;break}return this.buttonName[e]}getKeyConfig(){return Object.assign({},this.keyConfig)}setKeyConfig(e){this.keyConfig=e,this.buttonName={},Kn.setConfig("keyConfig",e).then()}checkButton(){}}class Yn extends Hn{constructor(e){super(),this.padIndex=void 0,this.lastState=void 0,this.pushed=void 0,this.axis=void 0,this.padConfig=void 0,this.id=void 0,this.pushListener=void 0,this.id=e.id,this.axis=[!1,!1,!1,!1],this.padIndex=e.index,this.lastState=[],this.pushed=[];for(let t=0;t<e.buttons.length;t++)this.lastState.push(!1),this.pushed.push(!1);this.padConfig=Wn[e.id]||Wn.default,Kn.getConfig(e.id).then((e=>{e&&(this.padConfig=e)}))}isButtonDown(e,t){const n=this.padConfig.buttons[e];return this.pushed[n]?(t&&(this.pushed[n]=!1),!0):super.isButtonDown(e,t)}checkButton(){const e=navigator.getGamepads()[this.padIndex];if(e){let t=[!1,!1,!1,!1];if(this.padConfig.axisX<e.axes.length){let n=e.axes[this.padConfig.axisX];n<-.5?t[zn.Left]=!0:n>.5&&(t[zn.Right]=!0)}if(this.padConfig.axisY<e.axes.length){let n=e.axes[this.padConfig.axisY];n<-.5?t[zn.Up]=!0:n>.5&&(t[zn.Down]=!0)}for(let e=0;e<t.length;e++)t[e]!==this.axis[e]&&(this.axis[e]=t[e],this.pushed[this.padConfig.buttons[e]]=t[e]);for(let n=0;n<e.buttons.length;n++)this.lastState[n]!==e.buttons[n].pressed&&(this.lastState[n]=e.buttons[n].pressed,this.pushed[n]=this.lastState[n],this.lastState[n]&&this.pushListener&&this.pushListener(n))}}getPadConfig(){return Object.assign({},this.padConfig)}setPadConfig(e){this.padConfig=e,Kn.setConfig(this.id,e).then()}resetPad(){for(let e=0;e<this.pushed.length;e++)this.pushed[e]=!1}}const Gn=[3135,1030,219,143,230,237,253,5121,255,231],Xn=[247,4751,57,4623,249,241,189,246,4617,30,9328,56,1334,8502,63,243,8255,8435,397,4609,62,3120,10294,11520,5376,3081],Vn={":":49152,".":65536,",":65536,"-":192,"/":3072,"'":1024,"!":66560,">":2304,"<":9216};class qn{constructor(e){this.program=void 0,this.aPos=void 0,this.uColor=void 0,this.uPos=void 0,this.uSize=void 0,this.posVbo=void 0,this.segmentData=void 0,this.frameData=void 0;let t=e.createShader(e.VERTEX_SHADER);e.shaderSource(t,"\n// xyz, a=\u8272\u306e\u660e\u308b\u3055\nattribute vec4 a_pos;\n\nuniform vec3 u_pos;\nuniform vec2 u_size;\nuniform vec4 u_color;\nvarying vec4 v_color;\n\nvoid main() {\n    vec2 addpos = u_pos.xy + u_size.xy / 2.0;\n    gl_Position = vec4(a_pos.x * u_size.x + addpos.x, -(a_pos.y * u_size.y) / 2.0 - addpos.y, a_pos.z + u_pos.z, 1.0);\n    v_color = vec4(u_color.rgb * a_pos.a, u_color.a);\n}\n"),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(t));let n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,"\nprecision mediump float;\n\nvarying vec4 v_color;\n\nvoid main() {\n    gl_FragColor = v_color;\n}\n"),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(n)),this.program=e.createProgram(),e.attachShader(this.program,t),e.attachShader(this.program,n),e.linkProgram(this.program),e.useProgram(this.program),this.aPos=e.getAttribLocation(this.program,"a_pos"),this.uColor=e.getUniformLocation(this.program,"u_color"),this.uPos=e.getUniformLocation(this.program,"u_pos"),this.uSize=e.getUniformLocation(this.program,"u_size"),this.posVbo=e.createBuffer();const r=[this.makePolygon([.4,-.95],[-.4,-.95]),this.makePolygon([.4,-.9],[.4,-.05]),this.makePolygon([.4,.05],[.4,.9]),this.makePolygon([-.4,.95],[.4,.95]),this.makePolygon([-.4,.05],[-.4,.9]),this.makePolygon([-.4,-.9],[-.4,-.05]),this.makePolygon([-.4,0],[-.01,0]),this.makePolygon([.01,0],[.4,0]),this.makePolygon([-.4,-.9],[-.05,-.05]),this.makePolygon([0,-.9],[0,-.05]),this.makePolygon([.4,-.9],[.05,-.05]),this.makePolygon([-.05,.05],[-.4,.9]),this.makePolygon([0,.05],[0,.9]),this.makePolygon([.05,.05],[.4,.9]),[0,-.4,-.2,1,0,-.6,-.1,1.1,-.2,-.4,-.1,1.2,0,-.2,-.1,.8,.2,-.4,-.1,.9,0,-.6,-.1,1.1],[0,.4,-.2,1,0,.2,-.1,1.1,-.2,.4,-.1,1.2,0,.6,-.1,.8,.2,.4,-.1,.9,0,.2,-.1,1.1],[-.2,.8,-.2,1,-.2,.6,-.1,1.1,-.4,.8,-.1,1.2,-.2,1,-.1,.8,0,.8,-.1,.9,-.2,.6,-.1,1.1]];let i=0;this.segmentData=[];for(let o of r)this.segmentData.push([i,o.length/4]),i+=o.length/4;const a=[-.5,-1,-.05,1,-.5,1,-.05,.8,.5,-1,-.05,.9,.5,1,-.05,.7,-.51,-1.02,-.1,1,-.49,-.98,-.11,1.1,.51,-1.02,-.1,.9,.49,-.98,-.11,1,.51,1.02,-.1,.7,.49,.98,-.11,.8,-.51,1.02,-.1,.8,-.49,.98,-.11,.9,-.51,-1.02,-.1,1,-.49,-.98,-.11,1.1];this.frameData=[i,4,i+4,a.length/4-4],r.push(a),e.bindBuffer(e.ARRAY_BUFFER,this.posVbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r.flat()),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null)}makePolygon(e,t){const n=t[1]-e[1],r=t[0]-e[0],i=Math.atan2(n,r),a=5*Math.PI/16,o=.15,s=Math.cos(i-a)*o,l=Math.sin(i-a)*o,u=Math.cos(i+a)*o,c=Math.sin(i+a)*o,h=Math.cos(i+Math.PI+a)*o,f=Math.sin(i+Math.PI+a)*o,d=Math.cos(i+Math.PI-a)*o,p=Math.sin(i+Math.PI-a)*o;return[(e[0]+t[0])/2,(e[1]+t[1])/2,-.1,1,e[0],e[1],0,1.1,e[0]+u,e[1]+c,0,1.2,t[0]+d,t[1]+p,0,1,t[0],t[1],0,.9,t[0]+h,t[1]+f,0,.8,e[0]+s,e[1]+l,0,.9,e[0],e[1],0,1.1]}triangleStrip(e,t){let n=[],r=[];for(let a=0;a<e.length;a++)r.push(e[a]),r.length>3&&r.splice(0,1),3===r.length&&(1&a?n.push(...r[0],...r[2],...r[1]):n.push(...r[0],...r[1],...r[2]));let i=[];for(let a=0;a<n.length;a+=3)i.push(n[a],n[a+1],n[a+2]),a<9||n.length,i.push(t[1]);return i}draw(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-.5;3===r.length&&(r=[...r,1]);let a=n[2]/t.length,o=n[0];e.useProgram(this.program),e.enable(e.DEPTH_TEST),e.bindBuffer(e.ARRAY_BUFFER,this.posVbo),e.enableVertexAttribArray(this.aPos),e.vertexAttribPointer(this.aPos,4,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,null);for(let s=0;s<t.length;s++){let l=t.toUpperCase().charCodeAt(s),u=0;if(l>=48&&l<58?u=Gn[l-48]:l>=65&&l-65<Xn.length?u=Xn[l-65]:t.charAt(s)in Vn&&(u=Vn[t.charAt(s)]),u>0)for(let t=0;t<this.segmentData.length;t++)if(u&1<<t){const s=a/20,l=n[3]/20;e.uniform3f(this.uPos,o,n[1],i),e.uniform2f(this.uSize,a-s,n[3]),e.uniform4fv(this.uColor,r),e.drawArrays(e.TRIANGLE_FAN,this.segmentData[t][0],this.segmentData[t][1]),e.uniform3f(this.uPos,o+s,n[1]+l,i+.2),e.uniform2f(this.uSize,a-s,n[3]),e.uniform4fv(this.uColor,[0,0,0,r[3]]),e.drawArrays(e.TRIANGLE_FAN,this.segmentData[t][0],this.segmentData[t][1])}o+=a}}init(e){e.useProgram(this.program)}drawFrame(e,t,n,r){e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.posVbo),e.enableVertexAttribArray(this.aPos),e.vertexAttribPointer(this.aPos,4,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,null),e.uniform3f(this.uPos,t[0],t[1],0),e.uniform2f(this.uSize,t[2],t[3]),r&&(3===r.length&&(r=[...r,1]),e.uniform4fv(this.uColor,r),e.drawArrays(e.TRIANGLE_STRIP,this.frameData[2],this.frameData[3])),3===n.length&&(n=[...n,1]),e.uniform4fv(this.uColor,n),e.drawArrays(e.TRIANGLE_STRIP,this.frameData[0],this.frameData[1])}}let $n;function Qn(e){return $n||($n=new qn(e)),$n}const Zn={};let Jn,er,tr,nr,rr,ir=0,ar=0;function or(){Jn||(Jn=new(window.AudioContext||window.webkigAudioContext),er=Jn.createGain(),tr=Jn.createGain(),er.gain.value=ir,tr.gain.value=ar,er.connect(Jn.destination),tr.connect(Jn.destination))}async function sr(e){if(e in Zn)return Zn[e];const t=await fetch("sound/".concat(e)),n=await t.arrayBuffer();return Zn[e]=await Jn.decodeAudioData(n),Zn[e]}async function lr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(!er)return;const r=await sr("".concat(e,".mp3"));nr&&(nr.stop(),nr.disconnect()),nr=Jn.createBufferSource(),nr.buffer=r,n>0&&(nr.loopStart=t,nr.loopEnd=Math.min(n,r.duration),nr.loop=!0),nr.connect(er),nr.start(0,t)}async function ur(e){if(!tr)return;const t=Jn.createBufferSource();t.buffer=await sr("".concat(e,".wav")),t.connect(tr),t.start()}async function cr(e){if(tr)if(1===e){if(!rr){let e=Jn.createBufferSource();e.buffer=await sr("Chime.wav"),e.connect(tr),e.start(0),rr=e}}else 2!==e&&0!=e||(rr&&(rr.stop(),rr.disconnect()),rr=void 0)}let hr=0;async function fr(){tr&&(hr+.1>Jn.currentTime||(hr=Jn.currentTime,await ur("Damage")))}const dr=[[2,3,4,5,1,0],[2,4,1,0,3,5],[1,0,4,5,3,2],[5,3,1,0,4,2]];let pr={};function mr(e){if(e in pr)return Promise.resolve(pr[e]);const t=new Image;return new Promise(((n,r)=>{t.onload=()=>{console.log("Load Image",e,t.width,t.height);const r=document.createElement("canvas");r.width=t.width,r.height=t.height;const i=r.getContext("2d");i.drawImage(t,0,0);const a=i.getImageData(0,0,t.width,t.height),o=[a.data[0],a.data[1],a.data[2],a.data[3]];for(let e=0;e<t.height;e++)for(let n=0;n<t.width;n++){const r=4*(e*t.width+n);a.data[r]===o[0]&&a.data[r+1]===o[1]&&a.data[r+2]===o[2]&&a.data[r+3]===o[3]&&(a.data[r+3]=0)}pr[e]=a,n(a)},t.src="images/".concat(e,".png")}))}const gr=48;class yr{constructor(e,t){this.texData=void 0,this.width=0,this.height=0;const n=["item","Spell","Rod"];this.texData=e.createTexture(),mr(t).then((r=>{n.includes(t)?this.setTexture(e,r,32):this.setTexture(e,r)}))}setTexture(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gr;this.width=Math.round(t.width/n),this.height=Math.round(t.height/n),e.bindTexture(e.TEXTURE_2D,this.texData),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)}getTexRect(e){if(!this.width)return{sx:0,sy:0,ex:1,ey:1};const t=e%this.width,n=Math.floor(e/this.width);return{sx:t/this.width,ex:(t+1)/this.width,sy:n/this.height,ey:(n+1)/this.height}}close(e){e.deleteTexture(this.texData)}}class vr extends yr{constructor(e){super(e,"gil50"),this.bodyTex=void 0,this.bodyTex=e.createTexture()}setState(e,t){let n=[];for(let r=0;r<6;r++)n.push(mr("gil".concat(r).concat(t[r])));Promise.all(n).then((t=>{this.setTexture(e,t[5]);const n=document.createElement("canvas").getContext("2d").createImageData(288,192);for(let e=3;e<n.data.length;e+=4)n.data[e]=0;for(let e=0;e<4;e++)for(let r=0;r<6;r++){let i=[0,0,0,0,0,3+r];r>=3&&(i[2]=i[4]=5===r?2:1),r>=2&&(i[3]=r-1),this.drawImageData(n,r,e,dr[e],t,i)}e.bindTexture(e.TEXTURE_2D,this.bodyTex),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)}))}drawImageData(e,t,n,r,i,a){const o=4*(n*gr*e.width+t*gr);for(let s of r){const t=i[Math.min(s,4)],r=4*(n*gr*t.width+a[s]*gr);for(let n=0;n<gr;n++)for(let i=0;i<gr;i++){const a=r+4*(n*t.width+i);if(t.data[a+3]){const r=o+4*(n*e.width+i);for(let n=0;n<4;n++)e.data[r+n]=t.data[a+n]}}}}getBodyTexRect(e){const t=e%6,n=Math.floor(e/6);return{sx:t/6,sy:n/4,ex:(t+1)/6,ey:(n+1)/4}}}const br=18,xr="key",wr="MATTOCK",Er="BOOTS",kr="CANDLE",Dr="BOOK",Sr="SWORD",_r="NECKLACE",Pr="POTION",Rr="GUNTLET",Tr="ARMOR",Cr="SHIELD",Or="BALANCE",Nr="HELMET",Ir="ROD",Ar="dummy",Lr=24;let Fr=function(e){return e[e.StarWait=0]="StarWait",e[e.Playing=1]="Playing",e[e.LostWait=2]="LostWait",e[e.ClearWait=3]="ClearWait",e[e.ReturnWait=4]="ReturnWait",e[e.ZapWait=5]="ZapWait",e[e.AllClear=6]="AllClear",e}({});const Mr=["MATTOCK:1","MATTOCK:2","MATTOCK:3","CANDLE:1","CANDLE:2","BOOTS:1","BOOK:1","SWORD:1","SWORD:2","SWORD:3","MEITH:1","MEITH:2","CHIME:1","BOOK:2","ROD:1","ROD:2","ROD:4","GUNTLET:1","GUNTLET:2","PEARL:1","BOOK:3","RING:1","RING:2","RING:3","ARMOR:1","ARMOR:2","BALANCE","BOOK:4","NECKLACE:1","NECKLACE:2","NECKLACE:3","SHIELD:1","SHIELD:2","HELMET:1","key","POTION:1","POTION:2","POTION:3","POTION:4","POTION:5","POTION:6","POTION:7","BOOK:5","BOOK:6","MATTOCK:4"],jr="POTION:1",Br="POTION:2",Ur="POTION:3",Kr="POTION:4",zr="POTION:5",Wr="POTION:6",Hr="POTION:7";let Yr;class Gr{constructor(){this.dataList=[],this.lastData=void 0;for(let e=1;e<=60;e++)this.dataList[e]={data:[],enemy:[],treasure:"",init:[],event:""}}async loadStage(e){const t=await fetch("stage/".concat(e,".txt")),n=(await t.text()).split(/\n/);let r,i,a=!1;for(let o of n)if(0!==o.trim().length&&"#"!==o.charAt(0))if("["===o.charAt(0)){let e=o.indexOf("]"),t=o.indexOf(":"),n=0,i=[];t>0&&t<e?(n=parseInt(o.substring(1,t)),i=o.substring(t+1,e).split(",")):n=parseInt(o.substring(1,e));let a=o.substring(e+1).trim().split("=");r=this.dataList[n],a.length>1&&(r.event=a[1].trim()),r.init=i,r.treasure=a[0]}else r&&(r!==i&&(i=r,r.enemy=[],a=!0),0===r.enemy.length?r.enemy.push(...o.split(",")):(a&&(r.data=[],a=!1),r.data.push(o)));return this}getStage(e,t,n){return this.lastData&&this.lastData.stageNum===n&&this.lastData.data.playerData===t||(this.lastData&&this.lastData.data.close(e),this.lastData={stageNum:n,data:new ci(t,n)}),this.lastData.data.initStage(e,this.dataList[n]),this.lastData.data}getData(e){return this.dataList[e]}}const Xr={};function Vr(e,t){return function(n,r,i){const a=i.value;return Xr[e]=t?function(e,n,r,i){t.size&&oi.setDefaultSize(t.size),a(e,n,r,i,t),oi.setDefaultSize(0)}:a,i}}class qr{init(e,t){}clear(e){}}const $r={};function Qr(e){return function(t){$r[e]=t}}let Zr=function(e){return e[e.None=0]="None",e[e.Next=1]="Next",e[e.NG=2]="NG",e[e.OK=3]="OK",e[e.Hold=4]="Hold",e}({});function Jr(e){let t=0,n=0;switch(e){case 1:n=-1;break;case 2:t=1;break;case 3:n=1;break;case 4:t=-1}return{ax:t,ay:n}}class ei{init(e,t){}getCount(e,t,n){let r=0;for(let i of e)i.type===t&&n(i.value)&&r++;return r}}const ti={};function ni(e){return function(t,n,r){const i=r.value;return ti[e]=i,r.value=function(){i(...arguments)},r}}function ri(e,t){let n=0;for(let r=0;r<e.length;r++){let i=e.charAt(r);if("("===i){let i=e.substring(n,r);if(i in ti){let a={proc:ti[i],child:[]};e=ri(e.substring(r+1),a),t.child.push(a.proc(...a.child)),n=0,r=-1;continue}throw"No Event: "+i}if(")"===i)return r>n&&t.child.push(e.substring(n,r)),e.substring(r+1);","===i&&(r>n&&t.child.push(e.substring(n,r)),n=r+1)}return""}function ii(e){try{let t={proc:null,child:[]};return ri(e,t),t.child[0]}catch($l){console.log($l)}}class ai{constructor(e,t,n,r){this.sx=e,this.sy=t,this.ex=n,this.ey=r}isHit(e,t){return this.sx<=e&&this.ex>e&&this.sy<=t&&this.ey>t}isIntersect(e){return this.sx<e.ex&&this.ex>e.sx&&this.sy<e.ey&&this.ey>e.sy}}class oi{static setDefaultSize(e){this.defaultSize=e}constructor(e,t){this.name=e,this.spriteData=t,this.removed=!1,this.curX=void 0,this.curY=void 0,this.nextX=void 0,this.nextY=void 0,this.moveCount=void 0,this.damagePoint=200,this.moveDiv=0,this.sizeType=0,this.sizeType=oi.defaultSize,this.curX=0,this.curY=0,this.nextX=this.curX,this.nextY=this.curY,this.moveCount=0}moveTo(e,t,n){this.nextX=e,this.nextY=t,this.moveCount=n}getHP(){return 1}init(e,t){this.curX=e*Lr,this.curY=t*Lr,this.nextX=this.curX,this.nextY=this.curY,this.moveCount=0}onEvent(e,t){}getPosition(){return{x:this.curX,y:this.curY}}checkDamage(e){const t=e.getAttackRect();return!!t&&t.isHit(this.curX+7,this.curY+7)}checkAttack(e){const t=this.getAttackRect();if(t){const n=e.getBodyPos();return t.isHit(n.x,n.y)}return!1}onDead(e){e.removeEnemy(this),e.addEvent({type:"Dead",value:this.name}),ur("Dead").then()}gotDamage(e){this.onDead(e)}attacked(e){e.playerData.addHP(-this.damagePoint)}stepFrame(e,t){if(0===this.moveCount&&(this.moveDiv=0,this.nextMove(e,t)),!this.removed){if(this.moveCount>0){let e=this.nextX-this.curX,t=this.nextY-this.curY;e&&(Math.abs(e)>=this.moveCount?e=Math.sign(e)*Math.round(Math.abs(e)/this.moveCount):(0===this.moveDiv&&(this.moveDiv=this.moveCount/Math.abs(e)),e=this.moveCount%this.moveDiv?0:Math.sign(e))),t&&(Math.abs(t)>=this.moveCount?t=Math.sign(t)*Math.round(Math.abs(t)/this.moveCount):(0===this.moveDiv&&(this.moveDiv=this.moveCount/Math.abs(t)),t=this.moveCount%this.moveDiv?0:Math.sign(t))),this.curX+=e,this.curY+=t,this.moveCount--}this.checkDamage(t.playerData)&&this.gotDamage(t),this.removed||!this.checkAttack(t.playerData)||(this.attacked(t),t.playerData.getHP())}}getAttackRect(){return new ai(this.curX+1,this.curY+1,this.curX+15,this.curY+15)}}oi.defaultSize=0;class si{constructor(e,t,n){this.stick=t,this.saveNum=n,this.spriteData=void 0,this.hitPoint=48,this.x=0,this.y=0,this.speed=1,this.walkFlag=!1,this.dir=3,this.footCount=0,this.itemMap={},this.evilMap={},this.swordMode=0,this.swordCount=0,this.swordSpeed=1,this.restMattock=0,this.drawItemList=[],this.resetState=!1,this.chimeCount=0,this.chimeDir=0,this.resetPlayer=2,this.playCount=0,this.spriteData=new vr(e),this.init(e,0,0)}async loadData(){const e=await Kn.getSaveData(this.saveNum);return this.itemMap=e.data.itemMap,this.evilMap=e.data.evilMap,this.playCount=e.data.continueCount||0,this.resetPlayer=e.data.restPlayer,e.data.continueFlag&&e.data.restPlayer<0&&(this.resetPlayer=2,this.playCount++),e.data}getPlayCount(){return this.playCount}async saveData(e,t,n){await Kn.updateSaveData({num:this.saveNum,data:{curStage:e,continueFlag:n,restPlayer:this.resetPlayer,continueCount:this.playCount,itemMap:this.itemMap,evilMap:this.evilMap,maxStage:t}})}getRest(){return this.resetPlayer}lostPlayer(){return Ir in this.evilMap&&this.lostItem(Ir+":4"),this.hasItem(jr)?(this.lostItem(jr),!0):(this.resetPlayer--,this.resetPlayer>=0)}recalcState(e){this.resetState=!1;let t=[this.getItem(Nr)>0?1:0,0,0,0,0,this.getItem(Er)>0?1:0];const n=this.getItem(Tr);n>0&&(t[1]=n);const r=this.getItem(Cr);r>0&&(t[2]=r);const i=this.getItem(Sr);i>0&&(t[3]=i);const a=this.getItem(Rr);a>0&&(t[4]=a),this.spriteData.setState(e,t)}init(e,t,n){this.drawItemList=[-1,-1],this.x=t*Lr,this.y=n*Lr,this.walkFlag=!1,this.swordCount=52,this.swordMode=2,this.chimeDir=0,this.chimeCount=this.getItem("CHIME")>0?128:0,this.hitPoint=this.getItem(Nr)>0?96:48,Nr in this.evilMap&&(this.hitPoint=16),this.dir=3,this.initMattock(0);for(let r=0;r<Mr.length;r++)this.hasItem(Mr[r])&&this.drawItemList.push(r);this.recalcState(e)}initMattock(e){const t=this.getItem(wr);this.restMattock=0,1===t?this.restMattock=2:2===t?this.restMattock=Math.floor(3*Math.random())+2+e:t>=3&&(this.restMattock=255),this.getItem(Er)>0?this.speed=1:this.speed=2;const n=this.getItem(Rr);this.swordSpeed=0===n?0:n>1?2:1}zap(){const e=Object.keys(this.itemMap);for(let t of e)Math.random()<.4&&this.lostItem(t)}getDrawItemList(){return this.drawItemList}getPosition(){return{x:this.x,y:this.y}}isWalk(){return this.walkFlag}getChimePos(){return 0!==this.chimeDir?this.chimeDir*((8&this.chimeCount)>0?2:1):0}addHP(e){e&&(this.hitPoint+=e,this.hitPoint<=0&&(this.hitPoint=0))}getHP(){return this.hitPoint}getDir(){return this.dir}setDir(e){this.dir=e}stepNext(e,t){let n=0,r=0;if(this.stick.isLeft()?n=-1:this.stick.isRight()?n=1:this.stick.isUp()?r=-1:this.stick.isDown()&&(r=1),this.walkFlag=0!==n||0!==r,t.getGlobalCount()%this.speed===0){if(0!==n?(this.footCount=this.footCount+1&7,this.y%Lr!==0?1===this.dir?this.y--:this.y++:(this.dir=n>0?2:4,(this.x%Lr!==0||t.canMove(this.x/Lr,this.y/Lr,n,0))&&(this.x+=n))):0!==r&&(this.footCount=this.footCount+1&7,this.x%Lr!==0?2===this.dir?this.x++:this.x--:(this.dir=r<0?1:3,(this.y%Lr!==0||t.canMove(this.x/Lr,this.y/Lr,0,r))&&(this.y+=r))),xr in this.itemMap){const e=t.getDoorPos();Math.abs(this.x-e.x*Lr)<Lr&&Math.abs(this.y-e.y*Lr)<Lr&&(t.openDoor(),this.lostItem(xr))}if(this.x%Lr===0&&this.y%Lr===0){if(t.isDoorOpen()){const e=t.getDoorPos();if(e.x===this.x/Lr&&e.y===this.y/Lr)return this.dir=1,void t.setPlayMode(Fr.ClearWait)}else{const e=t.getKeyPos();e.x!==this.x/Lr||e.y!==this.y/Lr||this.hasItem(xr)||(this.chimeCount=0,cr(2),this.gotItem(xr),ur("KeyGet").then())}if(1===t.getTreasure()){const e=t.getTreasurePos();if(e.x===this.x/Lr&&e.y===this.y/Lr){let e=!0;t.isStageFlag(ui)&&(this.hasItem(zr)?this.lostItem(zr):e=!1),e&&(ur("ItemGet").then(),t.setTreasure(0),t.getTreasureItem()===Hr&&t.isStageFlag(li)?t.clearStageFlag(li):this.gotItem(t.getTreasureItem()),this.initMattock(1))}}}}if(this.chimeDir=0,this.chimeCount>0){const e=t.getKeyPos();e.x*Lr>this.x&&2===this.dir?(this.chimeDir=1,cr(1)):e.x*Lr<this.x&&4===this.dir?(this.chimeDir=-1,cr(1)):cr(2),0!==this.chimeDir&&this.chimeCount--}if(1===this.swordMode?this.swordCount<48&&(this.swordCount=Math.min(this.swordCount+this.swordSpeed,48)):2===this.swordMode&&(48===this.swordCount&&ur("SwordEnd").then(),this.swordCount+=this.swordSpeed,this.swordCount>=84&&(this.swordCount=0,this.swordMode=0)),this.stick.isSword()){if(0===this.swordMode){if(this.x%Lr===0&&this.y%Lr===0&&!this.walkFlag&&this.restMattock>0){const e=t.breakWall(this.x/Lr,this.y/Lr,this.dir,"Gil");if(1===e&&t.isLastFloor())return void t.setPlayMode(Fr.ZapWait);this.restMattock-=e,this.restMattock<=0&&(this.restMattock=0,this.lostItem(wr))}this.swordSpeed>0&&(ur("SwordStart").then(),this.swordMode=1,this.swordCount=1)}}else 1===this.swordMode&&(this.swordMode=2);for(let i of t.getFireList()){let e,t=i.bx*Lr,n=i.by*Lr;switch(i.dir){case 1:e=new ai(t,n-i.length*Lr,t+16,n);break;case 2:e=new ai(t+16,n,t+16+i.length*Lr,n+16);break;case 3:e=new ai(t,n+16,t+16,n+16+i.length*Lr);break;case 4:e=new ai(t-i.length*Lr,n,t,n+16)}e.isHit(this.x+7,this.y+7)&&this.getItem(_r)<3&&this.addHP(-this.hitPoint)}this.resetState&&this.recalcState(e)}getDrawData(){let e=4&this.footCount?1:0,t=this.getSwordIndex();return t>4?t=9-t:t>0?t++:t=e,{x:(this.x+0)/Lr,y:(this.y+0)/Lr,foot:2*(this.dir-1)+e,body:6*(this.dir-1)+t}}getBodyPos(){return{x:this.x+7,y:this.y+7}}getSwordIndex(){if(0===this.swordCount)return 0;return Math.floor((this.swordCount-1)/12)+1}getSwordMode(){return this.swordMode}getAttackRect(){const e=this.getSwordIndex();if(e>2&&e<6){let t=this.x+1,n=this.y+1,r=this.x+15,i=this.y+15;if(4===e)switch(this.dir){case 1:n-=4,i-=4;break;case 2:t+=3,r+=3;break;case 3:n+=3,i+=3;break;case 4:t-=3,r-=3}return new ai(t,n,r,i)}return null}getShieldRect(){let e=this.x-2,t=this.y-2,n=this.x+18,r=this.y+18;const i=this.getItem(Cr);i>0?(e-=5,t-=5,n+=5,r+=5,i>1&&(e-=4,t-=4,n-=4,r-=4)):0===i&&(e++,t++,n--,r--);let a=this.dir;const o=this.getSwordIndex();if(o>0){if(!(o>=3&&o<=5))return null;a=(a+2)%4+1}switch(a){case 1:e=this.x+4,n=this.x+12,r=this.y+2;break;case 2:t=this.y+4,r=this.y+12,e=this.x+14;break;case 3:e=this.x+4,n=this.x+12,t=this.y+14;break;case 4:t=this.y+4,r=this.y+12,n=this.x+2}return{rect:new ai(e,t,n,r),dir:a}}gotItem(e){const t=["84:3",Cr+":2",Tr+":2",Rr+":2",Nr+":1"];let n=e.split(":");if(n[0]===Ar)return;if("GIL"===n[0]){const e=parseInt(n[1]);return void(e<0?this.hitPoint=0:this.resetPlayer+=e)}t.includes(e)&&(this.hasItem(Or)?this.lostItem(Or):this.evilMap[n[0]]=!0),e===Ir+":*"&&(n=[Ir,"4"],this.evilMap[n[0]]=!0,this.drawItemList.push(this.getItemIndex(Ir+":4"))),this.resetState=[Er,Sr,Rr,Tr,Nr,Cr].indexOf(n[0])>=0;let r=1;n.length>1&&(r=parseInt(n[1])),n[0]===Ir||n[0]===Or?this.itemMap[n[0]]=(this.itemMap[n[0]]||0)|r:(this.lostItem(n[0]),this.itemMap[n[0]]=r),e===Ur?this.hitPoint=16:e===Br&&(this.hitPoint+=48);let i=this.getItemIndex(e);if(e===xr)this.drawItemList[0]=i;else{if(this.drawItemList[1]>=0)for(let e=2;e<this.drawItemList.length;e++)if(this.drawItemList[e]<0){this.drawItemList[e]=this.drawItemList[1];break}this.drawItemList[1]=i}}lostItem(e){const t=e.split(":");let n=this.getItem(t[0]);if(!(n<0)){if(t[0]===Ir){if(t.length>1&&(n&=~parseInt(t[1])),n>0){this.itemMap[t[0]]=n;for(let t=0;t<this.drawItemList.length;t++){const n=this.drawItemList[t];if(!(n<0)&&Mr[n]===e){this.drawItemList[t]=-1;break}}return void(0===(4&n)&&delete this.evilMap[Ir])}}else if(t.length>1&&n!==parseInt(t[1]))return;for(let e=0;e<this.drawItemList.length;e++){const n=this.drawItemList[e];if(!(n<0)&&Mr[n].startsWith(t[0])){this.drawItemList[e]=-1;break}}delete this.itemMap[t[0]],delete this.evilMap[t[0]]}}getItem(e){return e in this.itemMap?e!==Ir&&e in this.evilMap?0:this.itemMap[e]:-1}isEvil(e){return e in this.evilMap}hasItem(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.split(":");let r=this.getItem(n[0]);if(r<0)return!1;if(1===n.length)return!0;const i=parseInt(n[1]);return n[0]===Ir||n[0]===Or?(r&i)>0:n[0]===Pr?r===i:!(!t||!(n[0]in this.evilMap))||(r===i||t&&r>=i)}getItemIndex(e){e.split(":")[0]===Or&&(e=Or);for(let t=0;t<Mr.length;t++)if(Mr[t]===e)return t;return-1}}const li=16,ui=32;class ci{constructor(e,t){this.playerData=e,this.floorNum=t,this.wallData=void 0,this.spriteMap={},this.enemyList=[],this.playMode=void 0,this.eventList=[],this.treasureFlag=0,this.timer=0,this.redTime=!1,this.intCount=1,this.globalCounter=0,this.playerPos=void 0,this.doorPos=void 0,this.keyPos=void 0,this.doorOpenFlag=!1,this.treasureItem="",this.treasureEvent=void 0,this.dragonFire=[],this.fireResult=[],this.stageFlag=0,this.floorInit=[],this.flashData=void 0,this.changeWallIndex=0,this.initWallData=[],this.lastFlag=!1,this.playMode=Fr.StarWait,this.playerPos={x:this.nextInt(br),y:this.nextInt(9)};do{this.doorPos={x:this.nextInt(br),y:0}}while(this.playerPos.x===this.doorPos.x&&this.playerPos.y===this.doorPos.y);do{this.keyPos={x:this.nextInt(br),y:this.nextInt(9)}}while(this.playerPos.x===this.keyPos.x&&this.playerPos.y===this.keyPos.y||this.doorPos.x===this.keyPos.x&&this.doorPos.y===this.keyPos.y);this.wallData=[[2,3,4,2,3,1,2,3,4,4,4,4,4,3,3,1,2],[2,3,4,2,3,1,2,3,4,4,4,4,4,3,3,1,2],[2,3,4,2,3,1,2,3,4,4,4,4,4,3,3,1,2],[2,3,4,2,3,1,2,3,4,4,4,4,4,3,3,1,2],[2,3,4,2,3,1,2,3,4,4,4,4,4,3,3,1,2],[2,3,4,2,3,1,2,3,4,4,4,4,4,3,3,1,2],[2,3,4,2,3,1,2,3,4,4,4,4,4,3,3,1,2],[2,3,4,2,3,1,2,3,4,4,4,4,4,3,3,1,2],[]]}addEvent(e){this.eventList.push(e)}addDragonFire(e){this.dragonFire.push(e)}randomPos(){const e=this.playerData.getPosition();for(;;){let t=this.nextInt(br),n=this.nextInt(9);if(Math.abs(e.x-t*Lr)+Math.abs(e.y-n*Lr)>48)return{x:t,y:n}}}nextInt(e){return Math.floor(Math.random()*e)}breakWall(e,t,n,r){const i=()=>this.isStageFlag(512)&&"Gil"===r&&!this.playerData.hasItem(wr+":4")?0:(ur("Break").then(),this.addEvent({type:"Break",value:{x:e,y:t,dir:n,src:r}}),1);switch(n){case 1:if(0===t)return 255;if(e<17&&4===this.wallData[t-1][e])return this.wallData[t-1][e]=0,i();if(e>0&&2===this.wallData[t-1][e-1])return this.wallData[t-1][e-1]=0,i();break;case 2:if(e>=17)return 255;if(t<8&&1===this.wallData[t][e])return this.wallData[t][e]=0,i();if(t>0&&3===this.wallData[t-1][e])return this.wallData[t-1][e]=0,i();break;case 3:if(t>=8)return 255;if(e<17&&4===this.wallData[t][e])return this.wallData[t][e]=0,i();if(e>0&&2===this.wallData[t][e-1])return this.wallData[t][e-1]=0,i();break;case 4:if(0===e)return 255;if(t<8&&1===this.wallData[t][e-1])return this.wallData[t][e-1]=0,i();if(t>0&&3===this.wallData[t-1][e-1])return this.wallData[t-1][e-1]=0,i()}return 0}isDoorOpen(){return this.doorOpenFlag}openDoor(){this.doorOpenFlag=!0}setTreasure(e){this.treasureFlag=e}getTreasure(){return this.treasureFlag}getTimer(){return this.timer}isRedTime(){return this.redTime}setLastFloor(){this.stageFlag|=12,this.keyPos.x=-1,this.lastFlag=!0}isLastFloor(){return this.lastFlag}getFlash(){return this.flashData}makeWall(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.wallData=[];for(let n=0;n<9&&!(n+t>=e.length);n++){const r=e[n+t];let i=[];for(let e=0;e<17;e++)e<r.length?i[e]=parseInt(r.charAt(e)):i[e]=0;this.wallData.push(i)}for(;this.wallData.length<8;)this.wallData.push([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}initStage(e,t){cr(0),this.initWallData=t.data,this.changeWallIndex=0,this.timer=2e4,this.redTime=!1,this.flashData=void 0,this.stageFlag=0,this.playMode=Fr.StarWait,this.eventList=[],this.dragonFire=[],this.fireResult=[],this.intCount=2,this.treasureItem=t.treasure,this.treasureFlag=0,this.globalCounter=60,this.doorOpenFlag=!1,this.playerData.hasItem(Wr)&&(this.stageFlag|=li),this.playerData.lostItem(xr),!t.treasure||this.playerData.hasItem(t.treasure,!0)?this.treasureEvent=void 0:(this.treasureEvent=ii(t.event),t.treasure===xr&&(this.keyPos.x=-10)),this.enemyList=[],this.playerData.init(e,this.playerPos.x,this.playerPos.y),this.makeWall(t.data);for(let n of t.enemy){let t=n.split("*");if(t[0]in Xr){const n=parseInt(t[1]||"1");Xr[t[0]](e,this,t[0],n)}else console.log("Unknown Enemy",n)}this.treasureEvent&&this.treasureEvent.init(e,this),this.playerData.hasItem(Wr)&&this.setStageFlag(li),this.floorInit=[];for(let n of t.init){const e=$r[n];if(e){const t=new e;this.floorInit.push(t)}else console.log("Unknown Init Event",n)}this.floorInit.forEach((t=>t.init(e,this)))}setStageFlag(e){this.stageFlag|=e}clearStageFlag(e){this.stageFlag&=~e}isStageFlag(e){return(this.stageFlag&e)===e}setTreasureItem(e){this.treasureItem=e}getTreasureItem(){return this.treasureItem}getGlobalCount(){return this.globalCounter}getEnemyList(){return this.enemyList}getKeyPos(){return this.keyPos}getDoorPos(){return this.doorPos}setDoorPos(e,t){this.doorPos.x=e,this.doorPos.y=t}getTreasurePos(){return this.playerPos}getSprite(e,t){return t in this.spriteMap||(this.spriteMap[t]=new yr(e,t)),this.spriteMap[t]}close(e){for(let t in this.spriteMap)this.spriteMap[t].close(e);this.spriteMap={}}getWall(){let e=[];for(let t=0;t<this.wallData.length;t++)for(let n=0;n<this.wallData[t].length;n++){const r=this.wallData[t][n];1===r?e.push({x:n+1,y:t,type:1}):2===r?e.push({x:n+1,y:t+1,type:2}):3===r?e.push({x:n+1,y:t+1,type:1}):4===r&&e.push({x:n,y:t+1,type:2})}return e}addEnemy(e){this.enemyList.push(e)}removeEnemy(e){for(let t=0;t<this.enemyList.length;t++)if(this.enemyList[t]===e){this.enemyList.splice(t,1),e.removed=!0;break}}setPlayMode(e){const t=[Wr,Ur,Br],n=[Ur,Br];switch(this.playMode=e,e){case Fr.AllClear:this.globalCounter=258,lr("FloorEnd",1).then();break;case Fr.ZapWait:this.globalCounter=200,lr("Miss",1).then();break;case Fr.LostWait:this.globalCounter=200;for(let e of t)this.playerData.lostItem(e);lr("Miss",1).then();break;case Fr.ClearWait:case Fr.ReturnWait:this.globalCounter=360;for(let e of n)this.playerData.lostItem(e);this.floorInit.forEach((e=>e.clear(this))),this.playMode!==Fr.ClearWait&&this.playMode!==Fr.ReturnWait||lr("FloorClear",1).then();break;default:this.globalCounter=300}}getPlayMode(){return this.playMode}getFireList(){return this.fireResult}stepFrame(e){if(this.flashData&&(this.flashData.count--,this.flashData.count<0&&(this.flashData=void 0)),this.playMode!==Fr.Playing)return void(this.globalCounter>0&&(this.globalCounter--,this.playMode===Fr.StarWait&&0===this.globalCounter&&(this.playMode=Fr.Playing,this.globalCounter=Math.floor(256*Math.random()))));if(this.intCount--,0===this.intCount)if(this.redTime){if(this.timer--,this.stageFlag&li?this.intCount=6:this.intCount=62,this.timer<0)return this.timer=0,void(this.lastFlag?this.setPlayMode(Fr.ZapWait):this.setPlayMode(Fr.LostWait));Yr&&Yr(e,this)}else this.stageFlag&li?this.timer-=60:this.timer-=10,this.intCount=2,this.timer<60&&(this.timer=60,this.intCount=62,this.redTime=!0,Yr&&Yr(e,this));this.fireResult=[];for(let t=0;t<this.dragonFire.length;t++){let e=this.dragonFire[t]();e.length<0?(this.dragonFire.splice(t,1),t--):this.fireResult.push(e)}if(this.playerData.stepNext(e,this),this.playMode!==Fr.Playing)return;if([...this.enemyList].forEach((t=>{t.stepFrame(e,this)})),this.playMode===Fr.Playing)if(0===this.playerData.getHP())this.setPlayMode(Fr.LostWait);else{if(this.treasureEvent){const e=this.treasureEvent.checkEvent(this,this.eventList);if(e===Zr.NG)this.treasureEvent=void 0,this.flashData={type:-1,count:100},ur("EventNG").then();else if(e===Zr.OK||e===Zr.Hold){if(this.isLastFloor())return void this.setPlayMode(Fr.AllClear);this.treasureFlag=1,this.flashData={type:1,count:100},ur("EventOK").then(),this.treasureEvent=void 0}else e===Zr.Next&&(this.flashData={type:0,count:60},ur("EventNEXT").then())}if(this.eventList=[],this.globalCounter=this.globalCounter+1&255,256&this.stageFlag&&0===this.globalCounter){let e=(this.changeWallIndex+9)%this.initWallData.length;e!==this.changeWallIndex&&(this.changeWallIndex=e,this.makeWall(this.initWallData,e))}}}canMove(e,t,n,r){if(n<0){if(0===e)return!1;if(t>0&&3===this.wallData[t-1][e-1])return!1;if(t<8&&1===this.wallData[t][e-1])return!1}else if(n>0){if(17===e)return!1;if(t>0&&3===this.wallData[t-1][e])return!1;if(t<8&&1===this.wallData[t][e])return!1}else if(r<0){if(0===t)return!1;if(e>0&&2===this.wallData[t-1][e-1])return!1;if(e<17&&4===this.wallData[t-1][e])return!1}else if(r>0){if(8===t)return!1;if(e>0&&2===this.wallData[t][e-1])return!1;if(e<17&&4===this.wallData[t][e])return!1}return!0}}function hi(e,t,n,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var fi,di,pi,mi,gi,yi,vi,bi,xi,wi,Ei,ki,Di,Si,_i,Pi,Ri,Ti,Ci,Oi,Ni,Ii,Ai,Li,Fi,Mi,ji,Bi,Ui,Ki,zi,Wi,Hi,Yi,Gi,Xi,Vi,qi,$i,Qi,Zi,Ji,ea,ta,na,ra,ia,aa,oa,sa,la,ua,ca,ha,fa,da,pa,ma,ga,ya,va,ba,xa,wa,Ea,ka,Da,Sa,_a,Pa,Ra,Ta,Ca,Oa,Na,Ia,Aa,La,Fa,Ma,ja,Ba,Ua,Ka,za,Wa,Ha;fi=Vr("WHITE_Slime",{minWait:10,maxWait:50,spell:1}),di=Vr("DKYELLOW_Slime",{minWait:50,maxWait:200,spell:5}),pi=Vr("DKYELLOW_SlimeS",{size:1,minWait:50,maxWait:200,spell:5}),mi=Vr("DKYELLOW_SlimeL",{size:2,minWait:50,maxWait:200,spell:5}),gi=Vr("DKGREEN_Slime",{minWait:50,maxWait:200,spell:3}),yi=Vr("DKGREEN_SlimeS",{size:1,minWait:50,maxWait:200,spell:3}),vi=Vr("DKGREEN_SlimeL",{size:2,minWait:50,maxWait:200,spell:3}),bi=Vr("BLUE_Slime",{minWait:50,maxWait:200,spell:2}),xi=Vr("BLUE_SlimeS",{size:1,minWait:50,maxWait:200,spell:2}),wi=Vr("BLUE_SlimeL",{size:2,minWait:50,maxWait:200,spell:2}),Ei=Vr("RED_Slime",{minWait:50,maxWait:200,spell:0}),ki=Vr("RED_SlimeS",{size:1,minWait:50,maxWait:200,spell:0}),Di=Vr("RED_SlimeL",{size:2,minWait:50,maxWait:200,spell:0}),Si=Vr("BLACK_Slime",{minWait:10,maxWait:150}),_i=Vr("BLACK_SlimeS",{size:1,minWait:10,maxWait:150}),Pi=Vr("BLACK_SlimeL",{size:2,minWait:10,maxWait:150}),Ri=Vr("GREEN_SlimeS",{size:1,minWait:60,maxWait:300}),Ti=Vr("GREEN_SlimeL",{size:2,minWait:60,maxWait:300}),Ci=Vr("GREEN_Slime",{minWait:60,maxWait:300}),Oi=class e extends oi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;super(e,t),this.minWait=n,this.maxWait=r,this.spellType=i,this.swingCount=0,this.waitCount=0,this.dir=0,this.visibleFlag=!0,this.waitCount=Math.floor(Math.random()*(this.maxWait-this.minWait)+this.minWait),this.dir=Math.floor(4*Math.random())+1}nextMove(e,t){if(this.visibleFlag&&t.isStageFlag(128)&&(this.visibleFlag=!1),this.swingCount>0){if(this.swingCount--,this.swingCount<=24&&this.swingCount%12===0){const e=Jr(this.dir);this.curX+=8*e.ax,this.curY+=8*e.ay,this.nextX=this.curX,this.nextY=this.curY}}else{if(this.spellType>=0&&0===t.getGlobalCount()){let n=this.spellType;this.spellType>$a.length&&(n=Math.floor(Math.random()*$a.length)+1);let r=this.dir;new Qa($a[n],t.getSprite(e,"Spell"),r,this,t)}if(this.waitCount>0)this.waitCount--;else{this.dir=Math.floor(4*Math.random())+1;const e=Jr(this.dir);t.canMove(this.curX/Lr,this.curY/Lr,e.ax,e.ay)?(this.waitCount=Math.floor(Math.random()*(this.maxWait-this.minWait)+this.minWait),this.swingCount=40):this.waitCount=Math.floor(Math.random()*this.minWait)}}}getSpritePosition(){if(!this.visibleFlag)return null;let e=0;return 4&this.swingCount&&(e=(2&this.swingCount)>0?2:1),{x:this.curX/Lr,y:this.curY/Lr,index:e}}static make_slime(t,n,r,i,a){var o;let s=r;"SL12345".indexOf(r.charAt(r.length-1))>=0&&(s=r.substring(0,r.length-1)),a.sprite&&(s=a.sprite);const l=a.minWait||60,u=a.maxWait||300,c=null!==(o=a.spell)&&void 0!==o?o:-1;for(let h=0;h<i;h++){const i=new e(r,n.getSprite(t,s),l,u,c),a=n.randomPos();i.init(a.x,a.y),n.addEnemy(i)}}},hi(Oi,"make_slime",[fi,di,pi,mi,gi,yi,vi,bi,xi,wi,Ei,ki,Di,Si,_i,Pi,Ri,Ti,Ci],Object.getOwnPropertyDescriptor(Oi,"make_slime"),Oi);const Ya={blue:[24,1,24,9,24],black:[48,1,48,21,48],mirror:[48,1,48,21,48],hyper:[96,1,96,48,96],lizard:[96,2,96,48,96],red:[144,1,24,9,24],green_roper:[58,1,21],red_roper:[58,1,21],blue_roper:[58,1,21],quox:[58,1,0],silver_dragon:[80,1,0],black_dragon:[112,1,0],druaga:[96,1,0]};let Ga=(Ni=Vr("BLIZARD_Knight",{speed:48,moveDir:1,param:Ya.lizard,sprite:"BLUE_LIZARD"}),Ii=Vr("LIZARD_Knight",{speed:48,moveDir:1,param:Ya.lizard}),Ai=Vr("HYPER_Knight",{speed:48,moveDir:1,param:Ya.hyper}),Li=Vr("MIRROR_Knight2",{speed:0,moveDir:1,param:Ya.mirror,moveCount:16}),Fi=Vr("MIRROR_Knight",{speed:0,moveDir:1,param:Ya.mirror}),Mi=Vr("BLACK_Knight",{speed:48,moveDir:1,param:Ya.black}),ji=Vr("RED_Knight",{speed:48,moveDir:1,param:Ya.red}),Bi=Vr("BLUE_Knight",{speed:48,moveDir:1,param:Ya.blue}),Ui=Vr("BLUE_Knight2",{speed:48,moveDir:1,param:Ya.blue,moveCount:16}),Ki=Vr("BLUE_Knight3",{speed:48,moveDir:1,param:Ya.blue}),zi=class e extends oi{constructor(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;super(e,t),this.speed=n,this.moveDir=r,this.param=i,this.defence=a,this.dir=void 0,this.hitPoint=void 0,this.curePoint=void 0,this.spriteNum=0,this.moveType=1,this.dir=Math.floor(4*Math.random())+1,this.hitPoint=i[0],this.curePoint=i.slice(2),this.damagePoint=i[1]}getHP(){return this.hitPoint}stepFrame(e,t){this.spriteNum=1&Math.floor(6*t.getGlobalCount()/this.speed),super.stepFrame(e,t)}canMove(e,t,n){return!0}getDir(){return this.dir}nextMove(e,t){let n=(this.dir+3+this.moveDir)%4+1;const r=t.playerData.getPosition();let i=!1;if(this.moveType>0&&(this.curX===r.x?(n=this.curY===r.y?(this.dir+1)%4+1:this.curY<r.y?3:1,2===this.moveType&&(i=!0)):this.curY===r.y&&(n=this.curX<r.x?2:4,2===this.moveType&&(i=!0))),!i)for(let o=0;o<4;o++){const e=Jr(n);if(t.canMove(this.curX/Lr,this.curY/Lr,e.ax,e.ay))break;n=(n+3-this.moveDir)%4+1}if(!this.canMove(t,this.dir,n))return;this.dir=n;const a=Jr(this.dir);t.canMove(this.curX/Lr,this.curY/Lr,a.ax,a.ay)&&(this.nextX=this.curX+a.ax*Lr,this.nextY=this.curY+a.ay*Lr),this.moveCount=this.speed}getSpritePosition(){return{x:this.curX/Lr,y:this.curY/Lr,index:2*(this.dir-1)+this.spriteNum}}getAttackRect(){if(this.defence>0)return super.getAttackRect();const e=Jr(this.dir);return new ai(this.curX+1+3*e.ax,this.curY+1+3*e.ay,this.curX+15+3*e.ax,this.curY+15+3*e.ay)}onDead(e){let t=this.curePoint[0];this.curePoint.length>1&&e.playerData.getItem(Sr)>1&&(t=this.curePoint[1]),e.playerData.addHP(t),super.onDead(e)}gotDamage(e){const t=e.playerData.getItem(Sr);if(0===t)return;let n=t>1?2:1;n-=this.defence,this.hitPoint-=n,this.hitPoint<=0?this.onDead(e):fr().then()}attacked(e){0!==e.playerData.getSwordIndex()?super.attacked(e):this.defence?e.playerData.addHP(-(e.playerData.getHP()-1)):e.playerData.addHP(-500)}checkDamage(e){return!!e.isWalk()&&super.checkDamage(e)}static make_knight(t,n,r,i,a){let o=r;"SL12345".indexOf(r.charAt(r.length-1))>=0&&(o=r.substring(0,r.length-1)),a.sprite&&(o=a.sprite);let s=a.speed;s||(s=n.playerData.hasItem(Er)?24:48);for(let u=0;u<i;u++){var l;const i=new e(r,n.getSprite(t,o),s,null!==(l=a.moveDir)&&void 0!==l?l:1,a.param),u=n.randomPos();i.init(u.x,u.y),a.moveCount&&(i.moveCount=a.moveCount),n.addEnemy(i)}}},hi(zi,"make_knight",[Ni,Ii,Ai,Li,Fi,Mi,ji,Bi,Ui,Ki],Object.getOwnPropertyDescriptor(zi,"make_knight"),zi),zi);Wi=Vr("SUPER_Knight"),Hi=Vr("SUPER_Knight2"),Yi=class e extends Ga{constructor(e,t,n){super(e,t,24,1,Ya.hyper),this.fake=n,this.deadFlag=!1,this.mode=0,this.moveType=2,this.fake||(this.mode=1)}onDead(e){super.onDead(e),this.deadFlag=!0}stepFrame(e,t){if(0!==this.mode){if(super.stepFrame(e,t),this.deadFlag)if(this.fake){const n=new so(t.getSprite(e,"DemonDruaga"),1),r=t.randomPos();n.init(r.x,r.y),t.addEnemy(n)}else{let n=[];for(let i=0;i<3;i++){const r=new eo(e,t.getSprite(e,"WIZARD"),[]);t.addEnemy(r),n.push(r)}const r=new eo(e,t.getSprite(e,"WIZARD"),n);t.addEnemy(r)}}else if(1===t.getEnemyList().length){this.mode=1;const e=t.randomPos();this.init(e.x,e.y)}}canMove(e,t,n){return!0}getSpritePosition(){return 0===this.mode?null:super.getSpritePosition()}static super_knight(t,n,r,i){n.getSprite(t,"DemonDruaga"),n.getSprite(t,"WIZARD"),n.getSprite(t,"QUOX_Dragon");const a=new e(r,n.getSprite(t,"HYPER_Knight"),!1),o=n.randomPos();a.init(o.x,o.y),n.addEnemy(a)}static super_knight2(t,n,r,i){n.getSprite(t,"DemonDruaga");const a=new e(r,n.getSprite(t,"HYPER_Knight"),!0),o=n.randomPos();a.init(o.x,o.y),n.addEnemy(a)}},hi(Yi,"super_knight",[Wi],Object.getOwnPropertyDescriptor(Yi,"super_knight"),Yi),hi(Yi,"super_knight2",[Hi],Object.getOwnPropertyDescriptor(Yi,"super_knight2"),Yi),Gi=Vr("RED_RoperL",{size:2,speed:48,moveDir:1,param:Ya.red_roper}),Xi=Vr("RED_Roper",{speed:48,moveDir:1,param:Ya.red_roper}),Vi=Vr("BLUE_RoperL",{size:2,speed:48,moveDir:1,param:Ya.blue_roper}),qi=Vr("BLUE_Roper",{speed:48,moveDir:1,param:Ya.blue_roper}),$i=Vr("GREEN_Roper2",{speed:48,moveDir:1,param:Ya.green_roper,moveCount:8}),Qi=Vr("GREEN_RoperL",{size:2,speed:48,moveDir:1,param:Ya.green_roper}),Zi=Vr("GREEN_Roper",{speed:48,moveDir:1,param:Ya.green_roper}),Ji=class e extends Ga{constructor(e,t,n,r,i){super(e,t,n,r,i,1)}static make_roper(t,n,r,i,a){let o=r;"SL12345".indexOf(r.charAt(r.length-1))>=0&&(o=r.substring(0,r.length-1)),a.sprite&&(o=a.sprite);let s=a.speed;s||(s=n.playerData.hasItem(Er)?24:48);for(let u=0;u<i;u++){var l;const i=new e(r,n.getSprite(t,o),s,null!==(l=a.moveDir)&&void 0!==l?l:1,a.param),u=n.randomPos();i.init(u.x,u.y),a.moveCount&&(i.moveCount=a.moveCount),n.addEnemy(i)}}getSpritePosition(){return{x:this.curX/Lr,y:this.curY/Lr,index:this.curX+this.curY&8?1:0}}},hi(Ji,"make_roper",[Gi,Xi,Vi,qi,$i,Qi,Zi],Object.getOwnPropertyDescriptor(Ji,"make_roper"),Ji);let Xa=(ea=Vr("BLACK_Dragon",{param:Ya.black_dragon}),ta=Vr("SILVER_Dragon",{param:Ya.silver_dragon}),na=Vr("QUOX_Dragon",{param:Ya.quox}),ra=Vr("QUOX_DragonL",{size:2,param:Ya.quox,sprite:"QUOX_Dragon"}),ia=class e extends Ga{constructor(e,t,n,r,i){super(e,t,n,r,i,1),this.mode=0,this.count=0}isStop(e){if(e.playerData.getItem("PEARL")>0){const t=e.playerData.getPosition();if(Math.abs(t.x-this.curX)<=72&&Math.abs(t.y-this.curY)<=72)return!0}return!1}stepFrame(e,t){if(0===this.mode||4===this.mode){if(this.isStop(t)){if(this.mode=4,this.count>0?this.count--:this.count=32,this.checkAttack(t.playerData)&&(this.attacked(t),0===t.playerData.getHP()))return;return void(this.checkDamage(t.playerData)&&this.gotDamage(t))}this.mode=0,this.count=0}super.stepFrame(e,t)}canMove(e,t,n){if(this.mode>0){if(this.count--,0===this.count){let e=1===this.mode;return this.mode=0,e}return!1}const r=e.playerData.getPosition();let i=this.curX/Lr,a=this.curY/Lr,o=Math.random()<.2;if("SuperQuox"!==this.name&&r.x===this.curX)n=r.y<this.curY?1:3;else if("SuperQuox"!==this.name&&r.y===this.curY)n=r.x<this.curX?4:2;else if(this.dir!==n){const t=Jr(this.dir);if(e.canMove(i,a,t.ax,t.ay)&&!o)return this.mode=1,this.count=128,!1}const s=Jr(n);if(!e.canMove(i,a,s.ax,s.ay))return e.breakWall(i,a,n,this.name),this.mode=3,this.count=16,this.dir=n,!1;if(o){this.dir=n,this.mode=2;let t=5-2*(1&this.dir);for(let n=1;n<t;n++)if(!e.canMove(i+s.ax*n,a+s.ay*n,s.ax,s.ay)){t=n;break}let r={count:0,length:t,maxCount:8*t,ax:1};return this.count=2*r.maxCount+4,e.addDragonFire((()=>{let e=1+r.count/8;return r.count+=r.ax,r.count<=0?e=-1:(r.count>=r.maxCount&&(r.ax=-1),e>r.length&&(e=r.length)),{bx:i,by:a,dir:n,length:e}})),!1}return!0}getSpritePosition(){let e=(this.curX+this.curY&4)>>2;return 1===this.mode?e=(32&this.count)>0?2:3:2===this.mode||3===this.mode?e=4:4===this.mode&&(e=(16&this.count)>>4),{x:this.curX/Lr,y:this.curY/Lr,index:5*(this.dir-1)+e}}checkDamage(e){return!(!e.hasItem(Kr)&&2===Math.abs(this.dir-e.getDir()))&&super.checkDamage(e)}attacked(e){if(e.playerData.hasItem(Kr))return e.playerData.lostItem(Kr),this.onDead(e),void e.playerData.addHP(-1);super.attacked(e)}gotDamage(e){if(e.playerData.hasItem(Kr))return e.playerData.lostItem(Kr),void this.onDead(e);super.gotDamage(e)}static make_dragon(t,n,r,i,a){let o=a.sprite||r;for(let s=0;s<i;s++){const i=new e(r,n.getSprite(t,o),96,1,a.param),s=n.randomPos();i.init(s.x,s.y),n.addEnemy(i)}}},hi(ia,"make_dragon",[ea,ta,na,ra],Object.getOwnPropertyDescriptor(ia,"make_dragon"),ia),ia),Va=(aa=Vr("SUPER_Dragon2"),oa=class e extends Xa{constructor(e,t){super("SuperQuox",e,96,1,Ya.quox),this.fake=t,this.deadFlag=!1,this.hideMode=!1,this.hideMode=this.fake,this.moveType=0}gotDamage(e){if(e.playerData.getItem("MEITH")>1)this.onDead(e);else if(this.fake)return super.gotDamage(e)}isStop(e){return!1}onDead(e){super.onDead(e),this.deadFlag=!0}stepFrame(e,t){if(this.hideMode){if(t.playerData.hasItem(t.getTreasureItem())){for(let r=0;r<5;r++){const n=new Xa("QUOX_Dragon",t.getSprite(e,"QUOX_Dragon"),96,1,Ya.quox),r=t.randomPos();n.init(r.x,r.y),t.addEnemy(n)}const n=t.randomPos();this.init(n.x,n.y),this.hideMode=!1}}else if(super.stepFrame(e,t),this.deadFlag){const n=new so(t.getSprite(e,"DemonDruaga"),this.fake?2:0);if(this.fake)n.init(this.curX/Lr,this.curY/Lr);else{const e=t.randomPos();n.init(e.x,e.y)}t.addEnemy(n)}}getSpritePosition(){return this.hideMode?null:super.getSpritePosition()}checkAttack(e){return!this.hideMode&&super.checkAttack(e)}checkDamage(e){return!this.hideMode&&super.checkDamage(e)}static super_dragon(t,n,r,i){const a=new e(n.getSprite(t,"QUOX_DRAGON"),!0),o=n.randomPos();a.init(o.x,o.y),n.addEnemy(a)}},hi(oa,"super_dragon",[aa],Object.getOwnPropertyDescriptor(oa,"super_dragon"),oa),oa);class qa extends oi{constructor(e,t){super("Spell_Fire",e),this.count=void 0,this.srcName=void 0,this.deadFlag=!1,this.lastSword=0,this.count=128+Math.floor(128*Math.random()),this.srcName=t}nextMove(e,t){this.lastSword=t.playerData.getSwordIndex(),this.count--,this.count<=0&&(t.removeEnemy(this),this.moveCount=-1,this.deadFlag&&t.addEvent({type:"Dead",value:this.name}))}getSpritePosition(){if(this.count<50){if(2&this.count)return null}else if(this.count<100&&4&this.count)return null;return{x:this.curX/Lr,y:this.curY/Lr,index:(12&this.count)>>2}}checkAttack(e){return!(e.getItem(_r)>1)&&super.checkAttack(e)}checkDamage(e){const t=e.getAttackRect();if(this.count>16&&3===this.lastSword&&t){const e=new ai(this.curX+4,this.curY+4,this.curX+12,this.curY+12);t.isIntersect(e)&&(this.count=16,this.deadFlag=!0)}return!1}}const $a=["MAGE_Spell","SORCERER_Spell","DLUID_Spell","WIZARD_Spell"];class Qa extends oi{constructor(e,t,n,r,i){super(e,t),this.dir=n,this.startX=void 0,this.startY=void 0,this.srcName=void 0,this.spellType=void 0,this.viewCount=0;const a=r.getPosition();this.spellType=$a.indexOf(e),this.startX=a.x,this.startY=a.y,this.srcName=r.name,this.init(this.startX/Lr,this.startY/Lr),i.addEnemy(this),i.addEvent({type:"Spell",value:{src:this.srcName,type:0}}),ur("SpellStart").then()}makeFire(e,t){if(this.curX===this.startX&&this.curY===this.startY)return;const n=new qa(t.getSprite(e,"Spell_Fire"),this.srcName);n.init(this.curX/Lr,this.curY/Lr),t.addEnemy(n),ur("SpellFire").then()}nextMove(e,t){const n=this.curX/Lr,r=this.curY/Lr;if(1===this.spellType&&(this.curX!==this.startX||this.curY!==this.startY)){const i=Jr(this.dir%4+1),a=Jr((this.dir+2)%4+1);if(t.canMove(n,r,i.ax,i.ay)||t.canMove(n,r,a.ax,a.ay))return t.removeEnemy(this),this.moveCount=-1,void this.makeFire(e,t)}const i=Jr(this.dir);return this.spellType<3&&!t.canMove(n,r,i.ax,i.ay)?(t.removeEnemy(this),this.moveCount=-1,void(2===this.spellType?1===t.breakWall(n,r,this.dir,this.name)&&t.addEvent({type:"SpellBreak",value:this.srcName}):1===this.spellType&&this.makeFire(e,t))):(this.nextX=this.curX+i.ax*Lr,this.nextY=this.curY+i.ay*Lr,this.nextX<0||this.nextX>=432||this.nextY<0||this.nextY>=216?(t.removeEnemy(this),void(this.moveCount=-1)):void(this.moveCount=6))}onDead(e){e.removeEnemy(this),e.addEvent({type:"Spell",value:{src:this.srcName,type:2===Math.abs(this.dir-e.playerData.getDir())?1:2}}),ur("SpellCatch").then()}getAttackRect(){let e=this.curX+1,t=this.curY+1,n=this.curX+15,r=this.curY+15;return 1===this.dir||3===this.dir?(e+=4,n-=4):(t+=4,r-=4),new ai(e,t,n,r)}getSpritePosition(){return this.viewCount++,this.curX===this.startX&&this.curY===this.startY||0===(2&this.viewCount)?null:{x:this.curX/Lr,y:this.curY/Lr,index:4*this.spellType+this.dir-1}}checkDamage(e){const t=e.getShieldRect();if(!t)return!1;if(2!==Math.abs(t.dir-this.dir))return!1;const n=this.getAttackRect();return t.rect.isIntersect(n)}checkAttack(e){if(Math.abs(this.startX-this.curX)<=16&&Math.abs(this.startY-this.curY)<=16)return!1;const t=e.getPosition(),n=new ai(t.x+4,t.y+4,t.x+12,t.y+12),r=this.getAttackRect();return n.isIntersect(r)}attacked(e){if(e.playerData.getItem(Tr)>=2&&e.playerData.getHP()>1)return e.playerData.addHP(-(e.playerData.getHP()-1)),e.removeEnemy(this),e.addEvent({type:"Spell",value:{src:this.srcName,type:3}}),void ur("SpellCatch").then();super.attacked(e)}}const Za=160;let Ja=(sa=Vr("WIZARD",{spell:3}),la=Vr("DLUID",{spell:2}),ua=Vr("SORCERER",{spell:1}),ca=Vr("MAGE",{spell:0}),ha=class e extends oi{constructor(e,t,n){super(e,t),this.spellType=n,this.restCount=0,this.viewCount=0,this.dir=0,this.restCount=128+Math.floor(256*Math.random())}show(t){const n=t.playerData.getPosition(),r=[[0,-2,3],[0,-3,3],[1,-2,3],[2,-1,4],[2,0,4],[3,0,4],[2,1,4],[1,2,1],[0,2,1],[0,3,1],[-1,2,1],[-2,1,2],[-2,0,2],[-3,0,2],[-2,-1,2],[-1,-2,3]],i=Math.floor(Math.random()*r.length);let a=n.x/Lr+r[i][0],o=n.y/Lr+r[i][1];if(a<0||a>=br||o<0||o>=9)return!1;for(let s of t.getEnemyList())if(s!==this&&s instanceof e){if(s.viewCount>0&&a*Lr===s.curX&&o*Lr===s.curY)return!1}return this.restCount=0,this.viewCount=Za,this.curX=a*Lr,this.curY=o*Lr,this.nextX=a,this.nextY=o,this.dir=r[i][2],!0}onHide(){this.restCount=128+Math.floor(128*Math.random())}onShow(e){}nextMove(e,t){if(this.restCount>0)return void this.restCount--;if(this.viewCount>0)return this.viewCount--,void(0===this.viewCount?this.onHide():110===this.viewCount&&new Qa($a[this.spellType],t.getSprite(e,"Spell"),this.dir,this,t));const n=t.playerData.getPosition();n.x%Lr===0&&n.y%Lr===0&&this.show(t)&&this.onShow(t)}getSpritePosition(){if(this.viewCount>0){if(this.viewCount<30||this.viewCount>130){if(4&this.viewCount)return null}else if((this.viewCount<50||this.viewCount>110)&&2&this.viewCount)return null;return{x:this.curX/Lr,y:this.curY/Lr,index:this.dir-1}}return null}checkDamage(e){return!(0===this.viewCount||this.viewCount>110)&&super.checkDamage(e)}attacked(e){}static make_magician(t,n,r,i,a){for(let o=0;o<i;o++){const i=new e(r,n.getSprite(t,r),a.spell),o=n.randomPos();i.init(o.x,o.y),n.addEnemy(i)}}getPosition(){return 0===this.viewCount?{x:-1,y:-1}:super.getPosition()}},hi(ha,"make_magician",[sa,la,ua,ca],Object.getOwnPropertyDescriptor(ha,"make_magician"),ha),ha);class eo extends Ja{constructor(e,t,n){super("SuperWizard",t,3),this.fake=n,this.deadFlag=!1,this.fake.length>0?this.restCount=60:this.restCount=999999}onHide(){super.onHide(),0===this.fake.length&&(this.restCount=999999)}onShow(e){if(this.fake.length>0)for(let t of this.fake)for(;!t.show(e););}onDead(e){if(this.fake.length>0){super.onDead(e);for(let t of this.fake)e.removeEnemy(t);this.deadFlag=!0}}stepFrame(e,t){if(super.stepFrame(e,t),this.deadFlag){const n=new Va(t.getSprite(e,"QUOX_Dragon"),!1),r=t.randomPos();n.init(r.x,r.y),t.addEnemy(n)}}}fa=Vr("WIZARD_Ghost",{spell:3}),da=Vr("DLUID_Ghost",{spell:2}),pa=Vr("MAGE_Ghost",{spell:0}),ma=class e extends oi{constructor(e,t,n){super(e,t),this.spellType=n,this.dir=void 0,this.warpCount=0,this.hitPoint=24,this.visibleFlag=!0,this.dir=3}getHP(){return this.hitPoint}nextMove(e,t){this.visibleFlag&&!t.playerData.hasItem(kr)&&(this.visibleFlag=!1);const n=Jr(this.dir),r=this.curX/Lr,i=this.curY/Lr;if(this.warpCount>0)return this.warpCount--,void(32===this.warpCount&&(this.curX+=n.ax*Lr,this.curY+=n.ay*Lr,this.nextX=this.curX,this.nextY=this.curY,t.addEvent({type:"Warp",value:this.name})));if(t.canMove(r,i,n.ax,n.ay))return this.nextX=this.curX+n.ax*Lr,this.nextY=this.curY+n.ay*Lr,this.moveCount=t.playerData.getItem(Er)>0?24:48,void(Math.random()<.5&&new Qa($a[this.spellType],t.getSprite(e,"Spell"),this.dir,this,t));const a=t.playerData.getPosition();let o=this.dir;o=Math.abs(a.y-this.curY)>Math.abs(a.x-this.curX)?a.y<this.curY?1:3:a.x<this.curX?4:2;let s=Jr(o);this.dir=o,t.canMove(r,i,s.ax,s.ay)?(this.nextX=this.curX+s.ax*Lr,this.nextY=this.curY+s.ay*Lr,this.moveCount=t.playerData.getItem(Er)>0?24:48):this.warpCount=64}getSpritePosition(){if(this.warpCount>0){if(2&this.warpCount)return null}else if(!this.visibleFlag)return null;return{x:this.curX/Lr,y:this.curY/Lr,index:this.dir-1}}attacked(e){}gotDamage(e){const t=e.playerData.getItem(Sr);let n=1;t>1?(n++,t>2&&n++):0===t&&(n=0),this.hitPoint-=n,this.hitPoint<=0?this.onDead(e):fr()}checkDamage(e){return!(this.warpCount>0)&&super.checkDamage(e)}static make_ghost(t,n,r,i,a){for(let o=0;o<i;o++){const i=new e(r,n.getSprite(t,r),a.spell),o=n.randomPos();i.init(o.x,o.y),n.addEnemy(i)}}},hi(ma,"make_ghost",[fa,da,pa],Object.getOwnPropertyDescriptor(ma,"make_ghost"),ma);let to=(ga=Vr("RED_Wisp4",{speed:24,red:!0}),ya=Vr("RED_Wisp8",{speed:12,red:!0}),va=Vr("RED_Wisp",{speed:48,red:!0}),ba=Vr("BLUE_Wisp4",{speed:24}),xa=Vr("BLUE_Wisp8",{speed:12}),wa=Vr("BLUE_Wisp",{speed:48}),Ea=class e extends oi{constructor(e,t,n){super(e,t),this.red=n,this.dir=void 0,this.speed=void 0,this.turnCount=0,this.lastTurn=void 0,this.dir=Math.floor(4*Math.random())+1,this.speed=48,this.moveCount=60}nextMove(e,t){let n=this.curX/Lr,r=this.curY/Lr,i=(this.dir+(this.red?0:2))%4+1;for(let o=0;o<4;o++){const e=Jr(i);if(t.canMove(n,r,e.ax,e.ay))break;i=(i+3-(this.red?1:-1))%4+1}(i+4-this.dir)%4===1?(this.lastTurn={bx:this.curX/Lr-(i>=3?1:0),by:this.curY/Lr-(1===i||4===i?1:0)},this.turnCount++):(i+4-this.dir)%4===3&&(this.lastTurn={bx:this.curX/Lr-(1===i||4===i?1:0),by:this.curY/Lr-(i<=2?1:0)},this.turnCount++);const a=Jr(i);this.dir=i,this.nextX=this.curX+a.ax*Lr,this.nextY=this.curY+a.ay*Lr,this.moveCount=this.speed}getSpritePosition(){return{x:this.curX/Lr,y:this.curY/Lr,index:(this.red?0:2)+((this.curX+this.curY&8)>>3)}}checkAttack(e){let t=e.getItem("RING");return!(t>0&&(this.red&&2&t||!this.red&&1&t))&&super.checkAttack(e)}checkDamage(e){return!1}static make_wisp(t,n,r,i,a){for(let o=0;o<i;o++){const i=new e(r,n.getSprite(t,"Wisp"),a.red||!1);i.speed=a.speed;const s=n.randomPos();i.init(s.x,s.y),a.moveCount?i.moveCount=a.moveCount:i.moveCount=o*a.speed/2+a.speed,n.addEnemy(i)}}},hi(Ea,"make_wisp",[ga,ya,va,ba,xa,wa],Object.getOwnPropertyDescriptor(Ea,"make_wisp"),Ea),Ea),no=(ka=Vr("RED_Fake"),Da=class e extends to{constructor(){super(...arguments),this.hitPoint=34}checkDamage(e){const t=e.getAttackRect();return!!t&&t.isHit(this.curX+7,this.curY+7)}gotDamage(e){this.hitPoint--,this.hitPoint<=0?super.onDead(e):fr().then()}attacked(e){e.playerData.addHP(-1)}static redFake(t,n,r,i){for(let a=0;a<i;a++){const i=new e(r,n.getSprite(t,"Wisp"),!0),a=n.randomPos();i.init(a.x,a.y),n.addEnemy(i)}}},hi(Da,"redFake",[ka],Object.getOwnPropertyDescriptor(Da,"redFake"),Da),Sa=Vr("DummyExit"),_a=class e extends oi{constructor(e,t){super(e,t)}nextMove(e,t){}getSpritePosition(){return{x:this.curX/Lr,y:-.3,index:0}}checkAttack(e){return!1}checkDamage(e){return!1}static make(t,n,r,i){const a=n.getDoorPos();for(let o=0;o<i;o++){const i=new e(r,n.getSprite(t,"stage"));for(;;){const e=n.randomPos();if(e.x!==a.x){i.init(e.x,e.y),n.addEnemy(i);break}}}}},hi(_a,"make",[Sa],Object.getOwnPropertyDescriptor(_a,"make"),_a),_a);class ro extends no{constructor(){super(...arguments),this.mode=0}nextMove(e,t){if(0===this.mode)t.playerData.hasItem(xr)&&(this.mode=1);else if(1===this.mode){const e=t.playerData.getPosition();Math.abs(e.x-this.curX)<Lr&&Math.abs(e.y-this.curY)<Lr&&(this.mode=2)}else{const e=t.playerData.getPosition();e.x===this.curX&&e.y===this.curY&&(t.setPlayMode(Fr.ReturnWait),t.playerData.setDir(1))}}getSpritePosition(){return{x:this.curX/Lr,y:-.3,index:this.mode<2?5:1}}}class io extends oi{constructor(){super(...arguments),this.initFlag=!1}onInit(e,t){}nextMove(e,t){this.initFlag||(this.onInit(e,t),this.initFlag=!0);const n=t.playerData.getPosition();this.curX===n.x&&this.curY===n.y&&(this.onGet(e,t),ur("ItemGet").then(),t.removeEnemy(this),t.addEvent({type:"Dead",value:this.name}))}getSpritePosition(){return{x:this.curX/Lr,y:this.curY/Lr,index:3}}checkAttack(e){return!1}checkDamage(e){return!1}}let ao=(Pa=Vr("Excalibur"),Ra=class e extends io{onInit(e,t){t.setTreasureItem(Hr)}onGet(e,t){t.playerData.hasItem(Hr)?(t.playerData.gotItem(Sr+":3"),t.playerData.lostItem(Hr)):t.setStageFlag(li)}static excalibur(t,n,r,i){for(let a=0;a<i;a++){const i=new e(r,n.getSprite(t,"stage")),a=n.randomPos();i.init(a.x,a.y),n.addEnemy(i)}}},hi(Ra,"excalibur",[Pa],Object.getOwnPropertyDescriptor(Ra,"excalibur"),Ra),Ra),oo=(Ta=Vr("Excalibur2"),Ca=class e extends ao{constructor(){super(...arguments),this.mode=0}onEvent(e,t){this.mode=1;const n=e.getTreasurePos();for(;;){const t=e.randomPos();if(n.x!==t.x||n.y!==t.y){this.init(t.x,t.y);break}}}stepFrame(e,t){this.mode>0&&super.stepFrame(e,t)}getSpritePosition(){return 0===this.mode?null:super.getSpritePosition()}static excalibur(t,n,r,i){for(let a=0;a<i;a++){const i=new e(r,n.getSprite(t,"stage")),a=n.randomPos();i.init(a.x,a.y),n.addEnemy(i)}}},hi(Ca,"excalibur",[Ta],Object.getOwnPropertyDescriptor(Ca,"excalibur"),Ca),Oa=Vr("FAKE_Treasure"),Na=class e extends io{constructor(){super(...arguments),this.view=!1}onGet(e,t){t.setTreasureItem(Ar)}stepFrame(e,t){if(this.view)super.stepFrame(e,t);else if(t.getTreasure()>0){const e=t.randomPos(),n=t.getTreasurePos();e.x===n.x&&e.y===n.y||this.init(e.x,e.y),this.view=!0}}static fake(t,n,r,i){for(let a=0;a<i;a++){const i=new e(r,n.getSprite(t,"stage")),a=n.randomPos();i.init(a.x,a.y),n.addEnemy(i)}}getSpritePosition(){return this.view?super.getSpritePosition():null}},hi(Na,"fake",[Oa],Object.getOwnPropertyDescriptor(Na,"fake"),Na),Ia=Vr("EnergyDrain"),Aa=class e extends io{onGet(e,t){t.playerData.gotItem(Ur)}static fake(t,n,r,i){for(let a=0;a<i;a++){const i=new e(r,n.getSprite(t,"stage")),a=n.randomPos();i.init(a.x,a.y),n.addEnemy(i)}}},hi(Aa,"fake",[Ia],Object.getOwnPropertyDescriptor(Aa,"fake"),Aa),La=Vr("Saccubus"),Fa=Vr("Saccubus2"),Ma=class e extends oi{constructor(e,t){super(e,t),this.index=1,this.damage=!1,this.fakeFlag=!1,this.damagePoint=0,"Saccubus2"===this.name&&(this.index=2)}nextMove(e,t){if(this.damage&&t.playerData.addHP(-1),1===this.index){const e=t.playerData.getPosition(),n=t.getDoorPos();e.x===n.x*Lr&&e.y===n.y*Lr&&(this.index=0)}else 2===this.index&&t.playerData.hasItem(xr)&&(this.index=0)}getSpritePosition(){return this.damage?null:{x:this.curX/Lr,y:this.curY/Lr,index:Math.min(1,this.index)}}attacked(e){0===this.index&&(this.damage=!0,this.fakeFlag||(e.playerData.gotItem(Ir+":*"),this.fakeFlag=!0))}static saccubus(t,n,r,i){for(let a=0;a<i;a++){const i=new e(r,n.getSprite(t,"Ishtar")),a=n.randomPos();i.init(a.x,a.y),n.addEnemy(i)}}static saccubus2(t,n,r,i){for(let a=0;a<i;a++){const i=new e(r,n.getSprite(t,"Ishtar")),a=n.randomPos();i.init(a.x,a.y),n.addEnemy(i)}}},hi(Ma,"saccubus",[La],Object.getOwnPropertyDescriptor(Ma,"saccubus"),Ma),hi(Ma,"saccubus2",[Fa],Object.getOwnPropertyDescriptor(Ma,"saccubus2"),Ma),Ma);class so extends oi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super("Druaga",e),this.fake=t,this.dir=void 0,this.hitPoint=96,this.warpCount=0,this.mode=0,this.escapeDir=[],this.dir=Math.floor(4*Math.random())+1,this.damagePoint=1,this.fake?this.damagePoint=0:this.mode=1}getHP(){return this.hitPoint}stepFrame(e,t){if(0!==this.mode)super.stepFrame(e,t);else if(1===this.fake){if(t.isDoorOpen()){this.mode=1;const e=t.randomPos();this.init(e.x,e.y);let n=[];for(let t=0;t<9;t++){n.push([]);for(let e=0;e<br;e++)n[t].push(0)}n[e.y][e.x]=1;const r=t.getDoorPos();let i=1;for(;0===n[r.y][r.x];){for(let e=0;e<9;e++)for(let r=0;r<br;r++)n[e][r]===i&&(t.canMove(r,e,0,-1)&&0===n[e-1][r]&&(n[e-1][r]=i+1),t.canMove(r,e,0,1)&&0===n[e+1][r]&&(n[e+1][r]=i+1),t.canMove(r,e,1,0)&&0===n[e][r+1]&&(n[e][r+1]=i+1),t.canMove(r,e,-1,0)&&0===n[e][r-1]&&(n[e][r-1]=i+1));i++}let a=r.x,o=r.y;for(;a!=e.x||o!=e.y;){i=n[o][a]-1;for(let e=1;e<=4;e++){const r=Jr(e);if(!(a-r.ax<0||a-r.ax>=br||o-r.ay<0||o-r.ay>=9)&&(n[o-r.ay][a-r.ax]===i&&t.canMove(a,o,-r.ax,-r.ay))){this.escapeDir.unshift(e),a-=r.ax,o-=r.ay;break}}}}}else{const e=t.getDoorPos();if(this.curX%Lr)this.curX<e.x*Lr?(this.curX++,this.dir=2):(this.curX--,this.dir=4),this.nextX=this.curX;else if(this.curY%Lr)this.curY<e.y*Lr?(this.curY++,this.dir=3):(this.curY--,this.dir=1),this.nextY=this.curY;else{this.moveCount=48,this.mode=1;let t=e.x-this.curX/Lr,n=e.y-this.curY/Lr;for(;t;)t<0?(this.escapeDir.push(4),t++):(this.escapeDir.push(2),t--);for(;n;)n<0?(this.escapeDir.push(1),n++):(this.escapeDir.push(3),n--)}}}nextMove(e,t){if(this.warpCount>0){this.warpCount--;const e=Jr(this.dir);return void(32===this.warpCount&&(this.curX+=e.ax*Lr,this.curY+=e.ay*Lr,this.nextX=this.curX,this.nextY=this.curY,t.addEvent({type:"Warp",value:this.name})))}let n=0,r=this.curX/Lr,i=this.curY/Lr;if(this.fake){if(!(this.escapeDir.length>0))return this.curY-=.1,void(this.curY<-2&&(t.removeEnemy(this),t.setStageFlag(64)));n=this.escapeDir.shift()}else{n=this.dir%4+1;const e=t.playerData.getPosition();if(this.curX===e.x)n=e.y<this.curY?1:e.y>this.curY?3:(this.dir+1)%4+1;else if(this.curY===e.y)n=e.x<this.curX?4:2;else for(let a=0;a<4;a++){const e=Jr(n);if(t.canMove(r,i,e.ax,e.ay))break;n=(n+2)%4+1}}const a=Jr(n);if(!t.canMove(r,i,a.ax,a.ay))return this.warpCount=64,void(this.dir=n);this.dir===n&&Math.random()<.3&&new Qa($a[3],t.getSprite(e,"Spell"),n,this,t),this.dir=n,this.nextX=this.curX+a.ax*Lr,this.nextY=this.curY+a.ay*Lr,this.moveCount=24}getSpritePosition(){return 2&this.warpCount||0===this.mode?null:{x:this.curX/Lr,y:this.curY/Lr,index:(this.curX+this.curY&8)>>3}}checkDamage(e){return!(this.warpCount>0||this.fake)&&super.checkDamage(e)}checkAttack(e){return!this.fake&&super.checkAttack(e)}gotDamage(e){e.playerData.getItem(Sr)<3||e.playerData.getItem(Cr)<2||e.playerData.getItem(Tr)<2||e.playerData.getItem(Nr)<1||e.playerData.getItem(Rr)<2?e.playerData.addHP(-e.playerData.getHP()):(this.hitPoint--,this.hitPoint<=0&&this.onDead(e))}onDead(e){super.onDead(e),e.setStageFlag(64)}attacked(e){0===e.playerData.getSwordIndex()?e.playerData.addHP(-(e.playerData.getHP()-1)):super.attacked(e)}}ja=Vr("Ishtar"),Ba=Vr("Ishtar2"),Ua=Vr("Kai"),Ka=Vr("Kai2"),za=class e extends oi{constructor(e,t,n){super(e,t),this.index=n,this.damagePoint=0}setIndex(e){this.index=e}nextMove(e,t){if(3===this.index){const e=t.playerData.getPosition();e.x>this.curX+Lr&&(this.curX=e.x-Lr,this.nextX=this.curX)}else if(this.index<0){const e=t.getTimer();this.index=e<18e3||(e>19500||e<18500)&&4&e?-1:-2}}getSpritePosition(){let e=this.index;if(3===e)e=(8&this.curX)>0?4:3;else if(e<0){if(-1===e)return null;e=0}return{x:this.curX/Lr,y:this.curY/Lr,index:e}}checkDamage(e){return!(this.index<0||1===this.index)&&super.checkDamage(e)}onDead(e){e.isLastFloor()?e.setPlayMode(Fr.ZapWait):super.onDead(e)}checkAttack(e){return!1}static ishtar(t,n,r,i){const a=new e("Ishtar",n.getSprite(t,"Ishtar"),0);a.init(17,4),n.addEnemy(a)}static ishtar2(t,n,r,i){const a=new e("Ishtar",n.getSprite(t,"Ishtar"),-1);a.init(17,4),n.addEnemy(a)}static kai(t,n,r,i){const a=new e("Kai",n.getSprite(t,"Ishtar"),1);a.init(0,4),n.addEnemy(a)}static kai2(t,n,r,i){const a=new e("Kai",n.getSprite(t,"Ishtar"),1);a.init(9,4),n.addEnemy(a)}},hi(za,"ishtar",[ja],Object.getOwnPropertyDescriptor(za,"ishtar"),za),hi(za,"ishtar2",[Ba],Object.getOwnPropertyDescriptor(za,"ishtar2"),za),hi(za,"kai",[Ua],Object.getOwnPropertyDescriptor(za,"kai"),za),hi(za,"kai2",[Ka],Object.getOwnPropertyDescriptor(za,"kai2"),za);class lo extends oi{constructor(e,t,n){super(e,t),this.index=n,this.itemName=""}nextMove(e,t){if(this.itemName){const e=t.playerData.getPosition();this.curX===e.x&&this.curY===e.y&&(t.playerData.gotItem(this.itemName),t.removeEnemy(this))}}setItemName(e){this.itemName=e}getSpritePosition(){return{x:this.curX/Lr,y:this.curY/Lr,index:this.index}}checkAttack(e){return!1}onDead(e){e.setPlayMode(Fr.ZapWait)}}Yr=(e,t)=>{if(t.isRedTime())switch(t.getTimer()){case 60:to.make_wisp(e,t,"BLUE_Wisp",1,{speed:48,moveCount:60});break;case 55:to.make_wisp(e,t,"RED_Wisp",1,{speed:48,red:!0,moveCount:60});break;case 50:to.make_wisp(e,t,"BLUE_Wisp",1,{speed:12,moveCount:60});break;case 45:to.make_wisp(e,t,"RED_Wisp",1,{speed:12,red:!0,moveCount:60})}};Wa=Vr("Dark"),Ha=class e extends oi{nextMove(e,t){t.getFireList().length>0?t.clearStageFlag(1):t.setStageFlag(1)}getSpritePosition(){return null}checkAttack(e){return!1}checkDamage(e){return!1}static dark(t,n,r,i){const a=new e("Dark",n.getSprite(t,"Ishtar"));a.init(0,0),n.addEnemy(a)}},hi(Ha,"dark",[Wa],Object.getOwnPropertyDescriptor(Ha,"dark"),Ha);var uo,co,ho,fo,po,mo,go,yo,vo,bo,xo,wo,Eo,ko,Do,So,_o,Po,Ro,To,Co,Oo,No,Io,Ao,Lo,Fo,Mo,jo,Bo,Uo,Ko,zo,Wo,Ho,Yo,Go,Xo,Vo,qo,$o,Qo,Zo,Jo,es,ts,ns,rs,is,as,os,ss,ls,us,cs,hs,fs,ds,ps,ms,gs,ys,vs,bs;uo=ni("Dead"),co=class e extends ei{constructor(e){super(),this.event=e,this.target=void 0,this.count=void 0;const t=e.split("*");this.target=t[0],this.count=parseInt(t[1]||"1")}checkEvent(e,t){if(t.length>0){let e=this.getCount(t,"Dead",(e=>e===this.target));if(e>0)return this.count-=e,this.count<=0?Zr.OK:Zr.Next}return Zr.None}static makeEvent(t){return new e(t)}},hi(co,"makeEvent",[uo],Object.getOwnPropertyDescriptor(co,"makeEvent"),co),ho=ni("Break"),fo=class e extends ei{constructor(e,t,n){super(),this.count=e,this.position=t,this.target=n}checkEvent(e,t){let n=this.getCount(t,"Break",(e=>{if(this.position.length>0){if(this.position[0]>=0&&this.position[0]!==e.x)return!1;if(this.position.length>1){if(this.position[1]>=0&&this.position[1]!==e.y)return!1;if(this.position.length>2&&this.position[2]!==e.dir)return!1}}return!(this.target.length>0)||this.target.includes(e.src)}));return n>0?(this.count-=n,this.count<=0?Zr.OK:Zr.Next):Zr.None}static makeEvent(t){let n=[],r=[];for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];for(let e of a){let t=parseInt(e);isNaN(t)?r.push(e):n.push(t)}return new e(parseInt(t),n,r)}},hi(fo,"makeEvent",[ho],Object.getOwnPropertyDescriptor(fo,"makeEvent"),fo),po=ni("WalkDoor"),mo=class e extends ei{constructor(e){super(),this.enemy=e}checkEvent(e,t){const n=e.getDoorPos(),r=n.x*Lr,i=n.y*Lr;if(this.enemy.length>0){for(let t of e.getEnemyList())if(this.enemy.includes(t.name)){const e=t.getPosition();if(e.x===r&&e.y===i)return Zr.OK}return Zr.None}if(e.playerData.hasItem(xr))return Zr.NG;let a=e.playerData.getPosition();return a.x===r&&a.y===i?Zr.Hold:Zr.None}static makeEvent(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(n)}},hi(mo,"makeEvent",[po],Object.getOwnPropertyDescriptor(mo,"makeEvent"),mo),go=ni("WalkKey"),yo=class e extends ei{constructor(e){super(),this.enemy=e}checkEvent(e,t){const n=e.getKeyPos(),r=n.x*Lr,i=n.y*Lr;if(this.enemy.length>0){for(let t of e.getEnemyList())if(this.enemy.includes(t.name)){const e=t.getPosition();if(e.x===r&&e.y===i)return Zr.OK}return Zr.None}let a=e.playerData.getPosition();return a.x===r&&a.y===i?Zr.OK:e.playerData.hasItem(xr)?Zr.NG:Zr.None}static makeEvent(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(n)}},hi(yo,"makeEvent",[go],Object.getOwnPropertyDescriptor(yo,"makeEvent"),yo),vo=ni("Spell"),bo=class e extends ei{constructor(e,t,n){super(),this.count=e,this.options=t,this.srcList=n}checkEvent(e,t){let n=e.playerData.isWalk()?1:0,r=this.getCount(t,"Spell",(t=>{if(0===t.type)return!1;let r=-1;switch(t.type){case 1:r=n;break;case 2:r=2|n;break;case 3:r=4|n,0!==e.playerData.getSwordIndex()&&(r|=2)}return!(0!==this.options.length&&!this.options.includes(r))&&!(this.srcList.length>0&&!this.srcList.includes(t.src))}));return r>0?(this.count-=r,this.count<=0?(this.count=0,Zr.OK):Zr.Next):Zr.None}static makeEvent(t){let n=parseInt(t),r=[],i=[];for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];for(let e of o){let t=parseInt(e);isNaN(t)?i.push(e):r.push(t)}return new e(n,r,i)}},hi(bo,"makeEvent",[vo],Object.getOwnPropertyDescriptor(bo,"makeEvent"),bo),xo=ni("WalkPos"),wo=class e extends ei{constructor(e,t,n,r,i){super(),this.bx=e,this.by=t,this.dir=n,this.swordFlag=r,this.flag=i,this.lastPos=void 0}isTarget(e,t,n,r){if((this.bx<0||this.bx*Lr===n)&&(this.by<0||this.by*Lr===r)){if(this.swordFlag>=0&&this.swordFlag!==t)return!1;let n=1<<e-1;if(this.dir&n)return!0}return!1}checkEvent(e,t){const n=e.playerData.getPosition(),r=e.playerData.getDir(),i=e.playerData.getSwordIndex();if(2===this.flag){if(this.lastPos&&(this.lastPos.x!==n.x||this.lastPos.y!==n.y)&&this.isTarget(r,i,this.lastPos.x,this.lastPos.y))return Zr.OK}else{let t=e.playerData.isWalk()?1:0;if((this.flag<0||this.flag===t)&&this.isTarget(r,i,n.x,n.y))return Zr.OK}return this.lastPos=n,Zr.None}static makeEvent(){let t=[-1,-1,15,-1,-1];for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(let e=0;e<r.length;e++)"*"!==r[e]&&(t[e]=parseInt(r[e]));return new e(t[0],t[1],t[2],t[3],t[4])}},hi(wo,"makeEvent",[xo],Object.getOwnPropertyDescriptor(wo,"makeEvent"),wo),Eo=ni("Order"),ko=class e extends ei{constructor(e){super(),this.eventList=e,this.index=void 0,this.index=0}init(e,t){this.eventList.forEach((n=>n.init(e,t)))}checkEvent(e,t){const n=this.eventList[this.index].checkEvent(e,t);return n===Zr.NG||n===Zr.Next?n:n===Zr.OK||n===Zr.Hold?(this.index++,this.index<this.eventList.length?Zr.Next:(this.index=0,Zr.OK)):Zr.None}static makeEvent(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(n)}},hi(ko,"makeEvent",[Eo],Object.getOwnPropertyDescriptor(ko,"makeEvent"),ko),Do=ni("Or"),So=class e extends ei{constructor(e){super(),this.eventList=e}init(e,t){this.eventList.forEach((n=>n.init(e,t)))}checkEvent(e,t){let n=Zr.None,r=!1;for(let i=0;i<this.eventList.length;i++){const a=this.eventList[i].checkEvent(e,t);if(a===Zr.NG)this.eventList.splice(i,1),i--;else{if(a===Zr.OK)return Zr.OK;a===Zr.Next?n=a:a===Zr.Hold&&(r=!0)}}return 0===this.eventList.length&&(n=Zr.NG),r?Zr.Hold:n}static makeEvent(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(n)}},hi(So,"makeEvent",[Do],Object.getOwnPropertyDescriptor(So,"makeEvent"),So);let xs=(_o=ni("And"),Po=ni("SameTime"),Ro=class e extends ei{constructor(e,t){super(),this.eventList=e,this.once=t}init(e,t){this.eventList.forEach((n=>n.init(e,t)))}checkEvent(e,t){let n=Zr.None,r=!0;for(let i=0;i<this.eventList.length;i++){let a=this.eventList[i].checkEvent(e,t);if(a!==Zr.OK||this.once||(a=Zr.Hold),a===Zr.NG)return a;a===Zr.OK?(n=Zr.Next,this.eventList.splice(i,1),i--):a===Zr.Next?(n=a,r=!1):a!==Zr.Hold&&(r=!1)}return r&&(n=Zr.OK),n}static makeEvent(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(n,!0)}static makeSameTime(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(n,!1)}},hi(Ro,"makeEvent",[_o],Object.getOwnPropertyDescriptor(Ro,"makeEvent"),Ro),hi(Ro,"makeSameTime",[Po],Object.getOwnPropertyDescriptor(Ro,"makeSameTime"),Ro),Ro);To=ni("Not"),Co=class e extends ei{constructor(e){super(),this.eventList=e}init(e,t){this.eventList.forEach((n=>n.init(e,t)))}checkEvent(e,t){let n=!0;for(let r=0;r<this.eventList.length;r++){const i=this.eventList[r].checkEvent(e,t);if(i===Zr.OK)return Zr.NG;i===Zr.NG&&(this.eventList.splice(r,1),r--),i!==Zr.Hold&&(n=!1)}return n?Zr.None:0===this.eventList.length?Zr.OK:Zr.Hold}static makeEvent(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(n)}},hi(Co,"makeEvent",[To],Object.getOwnPropertyDescriptor(Co,"makeEvent"),Co),Oo=ni("Once"),No=class e extends ei{constructor(e){super(),this.event=e}checkEvent(e,t){if(!this.event)return Zr.NG;const n=this.event.checkEvent(e,t);return n===Zr.OK&&(this.event=void 0),n}static makeEvent(t){return new e(t)}},hi(No,"makeEvent",[Oo],Object.getOwnPropertyDescriptor(No,"makeEvent"),No),Io=ni("Lost"),Ao=class e extends ei{constructor(e){super(),this.name=e,this.mode=0}checkEvent(e,t){return 0===this.mode?e.playerData.hasItem(this.name)?(this.mode=1,Zr.Next):Zr.NG:e.playerData.hasItem(this.name)?Zr.None:Zr.OK}static makeEvent(t){return new e(t)}},hi(Ao,"makeEvent",[Io],Object.getOwnPropertyDescriptor(Ao,"makeEvent"),Ao);class ws extends ei{constructor(){super(),this.initPos=void 0}init(e,t){this.initPos=t.playerData.getPosition()}checkEvent(e,t){const n=e.playerData.getSwordIndex();if(n>0&&n<4){const t=e.playerData.getPosition();if(t.x!==this.initPos.x&&t.y!==this.initPos.y)return Zr.OK}return Zr.None}}class Es extends ei{constructor(){super(...arguments),this.count=3}checkEvent(e,t){let n=e.playerData.getPosition();return 0===n.x||408===n.x||0===n.y||192===n.y?Zr.None:0===e.getGlobalCount()?(this.count--,this.count>0?Zr.Next:Zr.OK):Zr.None}}class ks extends ei{checkEvent(e,t){const n=e.getTreasurePos(),r=e.playerData.getPosition();return r.x===n.x*Lr&&r.y===n.y*Lr&&2===e.playerData.getSwordMode()&&4===e.playerData.getSwordIndex()?Zr.OK:Zr.None}}class Ds extends ei{constructor(){super(...arguments),this.index=0}checkEvent(e,t){const n=e.playerData.getPosition();let r=56===(255&n.x),i=24===n.y;if(1&this.index){if(!r&&!i)return this.index++,this.index>=6?Zr.OK:Zr.Next}else r&&i&&this.index++;return Zr.None}}class Ss extends ei{constructor(){super(...arguments),this.lastSword=0}checkEvent(e,t){let n=e.playerData.getSwordIndex();return 1===n&&7===this.lastSword?Zr.OK:(this.lastSword=n,Zr.None)}}class _s extends ei{constructor(){super(...arguments),this.cornerFlag=0,this.firstDir=0}checkEvent(e,t){if(!e.playerData.hasItem(_r+":2"))return Zr.NG;const n=e.playerData.getPosition();if(0===this.firstDir||15===this.cornerFlag){let t=!1;if(0===n.x&&e.playerData.isWalk()&&4===e.playerData.getDir()&&(t=!0),408===n.x&&e.playerData.isWalk()&&2===e.playerData.getDir()&&(t=!0),0===n.y&&e.playerData.isWalk()&&1===e.playerData.getDir()&&(t=!0),192===n.y&&e.playerData.isWalk()&&3===e.playerData.getDir()&&(t=!0),t){if(0===this.firstDir)return this.firstDir=e.playerData.getDir(),Zr.Next;if(this.firstDir===e.playerData.getDir())return Zr.OK}}else if(0===n.x&&0===n.y){if(0===(1&this.cornerFlag))return this.cornerFlag|=1,Zr.Next}else if(408===n.x&&0===n.y){if(0===(2&this.cornerFlag))return this.cornerFlag|=2,Zr.Next}else if(0===n.x&&192===n.y){if(0===(4&this.cornerFlag))return this.cornerFlag|=4,Zr.Next}else if(408===n.x&&192===n.y&&0===(8&this.cornerFlag))return this.cornerFlag|=8,Zr.Next;return Zr.None}}class Ps extends ei{constructor(){super(...arguments),this.outFlag=0}checkEvent(e,t){const n=e.playerData.getPosition();let r=!1;if(0===n.x&&e.playerData.isWalk()&&4===e.playerData.getDir()&&(r=!0),408===n.x&&e.playerData.isWalk()&&2===e.playerData.getDir()&&(r=!0),0===n.y&&e.playerData.isWalk()&&1===e.playerData.getDir()&&(r=!0),192===n.y&&e.playerData.isWalk()&&3===e.playerData.getDir()&&(r=!0),r){let t=1<<e.playerData.getDir()-1;if(0===(this.outFlag&t))return this.outFlag|=t,15===this.outFlag?Zr.OK:Zr.Next}return Zr.None}}class Rs extends ei{constructor(){super(...arguments),this.pushCount=0}checkEvent(e,t){if(e.playerData.stick.isLeft()||e.playerData.stick.isRight()||e.playerData.stick.isUp()||e.playerData.stick.isDown()){if(this.pushCount++,this.pushCount>=512)return Zr.OK}else this.pushCount=0;return Zr.None}}class Ts extends ei{checkEvent(e,t){if(4===e.playerData.getSwordIndex()){const t=e.getDoorPos(),n=e.playerData.getPosition(),r=e.playerData.getDir();if(t.y*Lr===n.y){if(n.x<t.x*Lr&&2===r)return Zr.OK;if(n.x>t.x*Lr&&4===r)return Zr.OK}if(t.x*Lr===n.x&&n.y>t.y*Lr&&1===r)return Zr.OK}return Zr.None}}class Cs extends ei{checkEvent(e,t){if(e.isRedTime()){if(4===e.playerData.getSwordIndex()){const t=e.playerData.getPosition(),n=e.getDoorPos();if(t.x===n.x*Lr||t.y===n.y*Lr)return Zr.OK}return Zr.NG}return Zr.None}}class Os extends ei{constructor(){super(...arguments),this.count=0}checkEvent(e,t){if(e.playerData.isWalk()||4!==e.playerData.getSwordIndex())this.count=0;else{const t=e.playerData.getPosition();if(t.x%Lr>0||t.y%Lr>0){if(this.count++,this.count%60===0)return this.count>=600?Zr.OK:Zr.Next}else this.count=0}return Zr.None}}class Ns extends ei{constructor(){super(...arguments),this.count=0,this.lastDistance=0}checkEvent(e,t){if(e.playerData.getItem(xr)>0)return this.count>8?Zr.OK:Zr.NG;{const t=e.playerData.getPosition(),n=e.getKeyPos(),r=Math.max(Math.abs(t.x-n.x*Lr),Math.abs(t.y-n.y*Lr));r<Lr?r>this.lastDistance?this.count=0:1&this.count?e.playerData.isWalk()||this.count++:e.playerData.isWalk()&&this.count++:this.count=0,this.lastDistance=r}return Zr.None}}class Is extends ei{checkEvent(e,t){const n=e.getTreasurePos(),r=e.playerData.getPosition();return Math.abs(r.x-n.x*Lr)>=216&&7===e.playerData.getSwordIndex()?Zr.OK:Zr.None}}class As extends ei{constructor(){super(...arguments),this.keyDir=0}checkEvent(e,t){if(0===this.keyDir){if(e.playerData.hasItem(xr)){this.keyDir=e.playerData.getDir();const t=e.getDoorPos();switch(this.keyDir){case 1:if(t.y>=8)return Zr.NG;break;case 2:if(t.x<=0)return Zr.NG;break;case 3:if(t.y<=0)return Zr.NG;break;case 4:if(t.x>=17)return Zr.NG}return Zr.Next}}else if(e.isDoorOpen())return e.playerData.getDir()===this.keyDir?Zr.OK:Zr.NG;return Zr.None}}class Ls extends ei{constructor(){super(...arguments),this.mode=0,this.count=0,this.nextDir=0,this.lastPoint={x:-1,y:-1}}checkEvent(e,t){let n=Zr.None;if(0===this.mode)e.playerData.hasItem(wr)||(this.mode=1,n=Zr.Next);else{const t=e.playerData.getPosition();t.x===this.lastPoint.x&&t.y===this.lastPoint.y||(this.lastPoint=t,t.x%Lr===0&&t.y%Lr===0?(t.x/Lr===8?t.y/Lr===4?(this.nextDir=2,this.count++,n=Zr.Next):t.y/Lr===5?(this.nextDir=1,this.count++,n=Zr.Next):(this.nextDir=0,this.count=0):t.x/Lr===9?t.y/Lr===4?(this.nextDir=3,this.count++,n=Zr.Next):t.y/Lr===5?(this.nextDir=4,this.count++,n=Zr.Next):(this.nextDir=0,this.count=0):(this.nextDir=0,this.count=0),this.count>12&&(n=Zr.OK)):e.playerData.getDir()!==this.nextDir&&(this.count=0,this.nextDir=0))}return n}}class Fs extends ei{checkEvent(e,t){const n=e.getTreasurePos();if(this.getCount(t,"Break",(e=>e.x===n.x&&(1===e.dir||3===e.dir)))>0){let t=Zr.OK;for(let r=0;r<8;r++)if(!e.canMove(n.x,r,0,1)){t=Zr.Next;break}return t}return Zr.None}}class Ms extends ei{constructor(){super(...arguments),this.count=0,this.lastPos={x:0,y:0}}init(e,t){this.lastPos=t.playerData.getPosition()}checkEvent(e,t){if(1===e.playerData.getSwordMode()){if(e.playerData.isWalk()){const t=e.playerData.getPosition();if(t.x===this.lastPos.x&&t.y===this.lastPos.y)this.count=0;else{if(this.count++,this.count>=255)return Zr.OK;if(this.count%60===0)return Zr.Next}this.lastPos=t}}else this.count=0;return Zr.None}}class js extends ei{constructor(){super(...arguments),this.mode=0,this.count=0}checkEvent(e,t){if(0===this.mode){const n=this.getCount(t,"Break",(e=>"Gil"!==e.src));this.count+=n;if(this.getCount(t,"Dead",(e=>!0))>0){for(let t of e.getEnemyList())if(!(t instanceof to))return Zr.Next;this.mode=1}}else{const e=this.getCount(t,"Break",(e=>"Gil"===e.src));if(this.count-=e,this.count<0)return Zr.OK;if(e>0)return Zr.Next}return Zr.None}}class Bs extends ei{constructor(){super(...arguments),this.count=0}checkEvent(e,t){const n=e.getTreasurePos(),r=e.playerData.getPosition();if(n.x*Lr===r.x&&n.y*Lr===r.y){if(e.playerData.getSwordIndex()>0)1===e.playerData.getSwordIndex()&&(this.count|=1);else if(1&this.count)return this.count++,this.count>=4?Zr.OK:Zr.Next}else this.count=0;return Zr.None}}class Us extends ei{constructor(){super(...arguments),this.lastCount=-1}checkEvent(e,t){const n=e.getDoorPos();let r=0;for(let i=0;i<17;i++)e.canMove(i,n.y,1,0)||r++;for(let i=0;i<8;i++)e.canMove(n.x,i,0,1)||r++;if(0===r)return Zr.OK;if(!e.playerData.hasItem(wr))return Zr.NG;if(this.lastCount<0)this.lastCount=r;else if(r<this.lastCount)return this.lastCount=r,Zr.Next;return Zr.None}}Lo=ni("GilMove"),hi(Fo=class{static gilMoveEvent(e){if("Floor8"===e)return new ws;if("Floor18"===e)return new Es;if("Floor24"===e)return new ks;if("Floor30"===e)return new Ds;if("Floor32"===e)return new Ss;if("Floor46"===e)return new _s;if("Floor50"===e)return new Ps;if("Floor51"===e)return new Rs;if("FamUra4"===e)return new Ts;if("FamUra25"===e)return new Cs;if("FamUra31"===e)return new Os;if("FamUra45"===e)return new Ns;if("PsUra14"===e)return new Is;if("PsUra24"===e)return new As;if("PsUra29"===e)return new Ls;if("PsUra41"===e)return new Fs;if("PsUra51"===e)return new Ms;if("PsUra56"===e)return new js;if("Yami84"===e)return new Bs;if("Yami99"===e)return new Us;console.log("Unkown GilMove",e);return new class extends ei{checkEvent(e,t){return Zr.NG}}}},"gilMoveEvent",[Lo],Object.getOwnPropertyDescriptor(Fo,"gilMoveEvent"),Fo);class Ks extends ei{constructor(){super()}checkEvent(e,t){for(let n of e.getEnemyList())if("DLUID"===n.name&&192===n.getPosition().y)return Zr.OK;return Zr.None}}class zs extends ei{constructor(){super(...arguments),this.countMap={}}checkEvent(e,t){if(!e.playerData.isWalk()){let n=this.getCount(t,"Spell",(e=>e.type>0));if(n>0){const t=e.playerData.getPosition(),r=t.x+","+t.y;return this.countMap[r]=(this.countMap[r]||0)+n,this.countMap[r]>=5?Zr.OK:Zr.Next}}return Zr.None}}class Ws extends ei{checkEvent(e,t){for(let n of e.getFireList())if(n.length>=5)return Zr.OK;return Zr.None}}class Hs extends ei{constructor(){super(...arguments),this.lastDir=0}checkEvent(e,t){if(this.getCount(t,"Dead",(e=>"QUOX_Dragon"===e))>0)return 3===this.lastDir?Zr.OK:Zr.NG;for(let n of e.getEnemyList())if(n instanceof Xa){this.lastDir=n.getDir();break}return Zr.None}}class Ys extends ei{checkEvent(e,t){let n,r=[],i=0;for(let a of e.getEnemyList())"QUOX_Dragon"===a.name?n=a.getPosition():"WIZARD"===a.name?i++:"WIZARD_Spell"===a.name&&r.push(a.getPosition());if(!n||0===i)return Zr.NG;for(let a of r)if(Math.abs(a.x-n.x)<12&&Math.abs(a.y-n.y)<12)return Zr.OK;return Zr.None}}class Gs extends ei{constructor(){super(...arguments),this.wisp=[]}init(e,t){for(let n of t.getEnemyList())n instanceof to&&this.wisp.push({enemy:n,last:{bx:-1,by:-1,turnCount:-1,count:0}})}checkEvent(e,t){let n=Zr.None;for(let r of this.wisp)if(r.enemy.turnCount>r.last.turnCount&&r.enemy.lastTurn){if(r.last.bx===r.enemy.lastTurn.bx&&r.last.by===r.enemy.lastTurn.by){if(r.last.count++,r.last.count>=3){n=Zr.OK;break}n=Zr.Next}else r.last.count=0;r.last.bx=r.enemy.lastTurn.bx,r.last.by=r.enemy.lastTurn.by,r.last.turnCount=r.enemy.turnCount}return n}}class Xs extends ei{checkEvent(e,t){let n=0;for(let r of e.getEnemyList())if(("DLUID"===r.name||"MAGE_Ghost"===r.name)&&(n++,0===r.getPosition().x))return Zr.OK;return 0===n?Zr.NG:Zr.None}}class Vs extends ei{checkEvent(e,t){let n=[];for(let r of e.getEnemyList())r instanceof Xa&&n.push(r.getPosition());return n.length<2?Zr.NG:Math.abs(n[0].x-n[1].x)<14&&Math.abs(n[0].y-n[1].y)<14?Zr.OK:Zr.None}}Mo=ni("EnemyMove"),hi(jo=class{static enemyMoveEvent(e){if("Floor12"===e)return new Ks;if("FamUra5"===e)return new zs;if("FamUra19"===e)return new Ws;if("FamUra32"===e)return new Hs;if("PsUra19"===e)return new Ys;if("PsUra21"===e)return new Gs;if("Yami72"===e)return new Xs;if("Yami98"===e)return new Vs;console.log("Unknown EnemyMove",e);return new class extends ei{checkEvent(e,t){return Zr.NG}}}},"enemyMoveEvent",[Mo],Object.getOwnPropertyDescriptor(jo,"enemyMoveEvent"),jo),Bo=ni("EneCount"),Uo=class e extends ei{constructor(e,t){super(),this.count=e,this.nameList=t,this.lastCount=-1}checkEvent(e,t){let n=0;for(let i of e.getEnemyList())this.nameList.includes(i.name)&&n++;let r=Zr.None;return this.count===n?r=Zr.OK:this.lastCount!==n&&(this.lastCount>0&&Math.abs(this.lastCount-this.count)>Math.abs(n-this.count)&&(r=Zr.Next),this.lastCount=n),r}static makeEvent(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(parseInt(t),r)}},hi(Uo,"makeEvent",[Bo],Object.getOwnPropertyDescriptor(Uo,"makeEvent"),Uo),Ko=ni("Cont"),zo=ni("Total"),Wo=class e extends ei{constructor(e,t,n){super(),this.timeCount=e,this.eventList=t,this.reset=n,this.count=0}checkEvent(e,t){let n=!0;for(let r of this.eventList){const i=r.checkEvent(e,t);if(i===Zr.NG)return i;if(i!==Zr.OK&&i!==Zr.Hold){n=!1;break}}if(n){if(this.count++,this.count>=this.timeCount)return Zr.OK;if(this.count%60===0)return Zr.Next}else this.reset&&(this.count=0);return Zr.None}static makeEvent(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(parseInt(t),r,!0)}static makeTotalEvent(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(parseInt(t),r,!1)}},hi(Wo,"makeEvent",[Ko],Object.getOwnPropertyDescriptor(Wo,"makeEvent"),Wo),hi(Wo,"makeTotalEvent",[zo],Object.getOwnPropertyDescriptor(Wo,"makeTotalEvent"),Wo),Ho=ni("Repeat"),Yo=class e extends ei{constructor(e,t){super(),this.repeatCount=e,this.event=t,this.count=0}checkEvent(e,t){const n=this.event.checkEvent(e,t);return n===Zr.NG?n:n===Zr.OK||n===Zr.Hold?(this.count++,this.count>=this.repeatCount?(this.count=0,Zr.OK):Zr.Next):Zr.None}static makeEvent(t,n){return new e(parseInt(t),n)}},hi(Yo,"makeEvent",[Ho],Object.getOwnPropertyDescriptor(Yo,"makeEvent"),Yo),Go=ni("DummyItem"),Xo=class e extends xs{constructor(e){super(e,!0)}checkEvent(e,t){let n=super.checkEvent(e,t);return n}static makeEvent(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(n)}},hi(Xo,"makeEvent",[Go],Object.getOwnPropertyDescriptor(Xo,"makeEvent"),Xo),Vo=ni("RestTime"),qo=class e extends ei{constructor(e){super(),this.time=e}checkEvent(e,t){if(this.time<=60){if(e.isRedTime()&&e.getTimer()<=this.time)return Zr.OK}else if(e.getTimer()<=this.time)return Zr.OK;return Zr.None}static makeEvent(t){return new e(parseInt(t))}},hi(qo,"makeEvent",[Vo],Object.getOwnPropertyDescriptor(qo,"makeEvent"),qo),$o=ni("SamePos"),Qo=class e extends ei{constructor(e){super(),this.target=e}checkEvent(e,t){const n=e.playerData.getPosition();for(let r of e.getEnemyList())if(this.target.includes(r.name)){const e=r.getPosition();if(n.x===e.x&&n.y===e.y)return Zr.OK}return Zr.None}static makeEvent(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(n)}},hi(Qo,"makeEvent",[$o],Object.getOwnPropertyDescriptor(Qo,"makeEvent"),Qo),Zo=ni("Warp"),Jo=class e extends ei{constructor(e){super(),this.count=e}checkEvent(e,t){let n=this.getCount(t,"Warp",(()=>!0));return n>0?(this.count-=n,this.count<=0?Zr.OK:Zr.Next):Zr.None}static makeEvent(t){return new e(parseInt(t))}},hi(Jo,"makeEvent",[Zo],Object.getOwnPropertyDescriptor(Jo,"makeEvent"),Jo),es=ni("HasItem"),ts=class e extends ei{constructor(e){super(),this.item=e}checkEvent(e,t){return e.playerData.hasItem(this.item)?this.item===Ir+":4"&&e.playerData.isEvil(Ir)?Zr.NG:Zr.OK:Zr.NG}static makeEvent(t){return new e(t)}},hi(ts,"makeEvent",[es],Object.getOwnPropertyDescriptor(ts,"makeEvent"),ts),ns=ni("CountDown"),rs=class e extends ei{constructor(e){super(),this.countTarget=e,this.count=0}checkEvent(e,t){if(this.countTarget>0){if(this.count++,this.count>=this.countTarget)return Zr.OK}else if(e.playerData.isWalk()||e.playerData.getSwordIndex()%4)this.count=0;else if(this.count--,this.count<=this.countTarget)return Zr.OK;return Event.NONE}static makeEvent(t){return new e(parseInt(t))}},hi(rs,"makeEvent",[ns],Object.getOwnPropertyDescriptor(rs,"makeEvent"),rs),is=ni("Open"),as=class e extends ei{checkEvent(e,t){return e.isDoorOpen()?Zr.OK:Zr.None}static makeEvent(){return new e}},hi(as,"makeEvent",[is],Object.getOwnPropertyDescriptor(as,"makeEvent"),as),os=ni("Stick"),ss=class e extends ei{constructor(e){super(),this.stick=e,this.index=0,this.neutral=!1}checkEvent(e,t){let n=0;if(e.playerData.stick.isUp()?n=1:e.playerData.stick.isRight()?n=2:e.playerData.stick.isDown()?n=3:e.playerData.stick.isLeft()?n=4:e.playerData.stick.isPause()?n=5:e.playerData.stick.isSelect()&&(n=6),0===n)return this.neutral=!0,Zr.None;if(this.neutral){let e="*URDL12".indexOf(this.stick.charAt(this.index));if(this.neutral=!1,e===n)return this.index++,this.index<this.stick.length?Zr.Next:(this.index=0,Zr.OK);this.index=0}return Zr.None}static makeEvent(t){return new e(t)}},hi(ss,"makeEvent",[os],Object.getOwnPropertyDescriptor(ss,"makeEvent"),ss),ls=ni("EnemyEvent"),us=class e extends ei{constructor(e,t){super(),this.enemy=e,this.options=t}checkEvent(e,t){let n=Zr.NG;for(let r of e.getEnemyList())r.name===this.enemy&&(r.onEvent(e,this.options),n=Zr.OK);return n}static makeEvent(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(t,r)}},hi(us,"makeEvent",[ls],Object.getOwnPropertyDescriptor(us,"makeEvent"),us),cs=ni("KeyGet"),hs=class e extends ei{checkEvent(e,t){return e.playerData.getItem(xr)>0?Zr.OK:Zr.None}static makeEvent(){return new e}},hi(hs,"makeEvent",[cs],Object.getOwnPropertyDescriptor(hs,"makeEvent"),hs),fs=ni("LastFloor"),ds=class e extends ei{constructor(e,t){super(),this.action=e,this.eventList=t,this.index=0,this.gl=void 0}init(e,t){this.gl=e,this.eventList.forEach((n=>n.init(e,t)))}checkEvent(e,t){const n=this.eventList[this.index].checkEvent(e,t);return n===Zr.NG?n:n===Zr.OK||n===Zr.Hold?(this.doAction(e,this.action[this.index]),this.index++,this.index<this.eventList.length?Zr.Next:Zr.OK):Zr.None}getEnemy(e,t){for(let n of t.getEnemyList())if(n.name===e)return n;return null}putRod(e,t,n,r){const i=new lo(t,e.getSprite(this.gl,"Rod"),"124".indexOf(t.split(":")[1]));i.init(n,r),e.addEnemy(i),e.playerData.lostItem(t)}doAction(e,t){if(!t)return;const n=e.playerData.getPosition();let r=Math.round(n.x/Lr),i=Math.round(n.y/Lr);for(let a=0;a<t.length;a++)switch(t.charAt(a)){case"i":{const t=this.getEnemy("Ishtar",e);t&&e.removeEnemy(t)}break;case"G":this.putRod(e,"ROD:1",r-1,i);break;case"g":this.putRod(e,"ROD:1",r,i);break;case"R":this.putRod(e,"ROD:2",r-1,i);break;case"r":this.putRod(e,"ROD:2",r,i);break;case"B":this.putRod(e,"ROD:4",r-1,i);break;case"b":this.putRod(e,"ROD:4",r,i);break;case"s":case"S":case"K":{const t=this.getEnemy("Kai",e);t&&t.setIndex(2)}break;case"k":{const t=this.getEnemy("Kai",e);t&&t.setIndex(3)}break;case"X":{const t=e.playerData.getPosition(),n=Math.round(t.x/Lr)*Lr-Lr,r=Math.round(t.y/Lr)*Lr;for(let i of e.getEnemyList())if(i instanceof lo){const e=i.getPosition();i.moveTo(n,r,Math.max(Math.abs(n-e.x),Math.abs(r-e.y))/2)}}break;case"0":for(let t of e.getEnemyList())if(t instanceof lo){const e=t;e.setItemName(Ir+":"+(1<<e.index))}}}static makeEvent(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(t.split(":"),r)}},hi(ds,"makeEvent",[fs],Object.getOwnPropertyDescriptor(ds,"makeEvent"),ds),ps=ni("Touch"),ms=class e extends ei{constructor(e){super(),this.target=e}checkEvent(e,t){const n=e.playerData.getPosition();if(this.target.includes("Dragon_Fire"))for(let r of e.getFireList()){let e,t=r.bx*Lr,i=r.by*Lr;switch(r.dir){case 1:e=new ai(t,i-r.length*Lr,t+16,i);break;case 2:e=new ai(t+16,i,t+16+r.length*Lr,i+16);break;case 3:e=new ai(t,i+16,t+16,i+16+r.length*Lr);break;case 4:e=new ai(t-r.length*Lr,i,t,i+16)}if(e.isHit(n.x+7,n.y+7))return Zr.OK}for(let r of e.getEnemyList())if(this.target.includes(r.name)){const e=r.getPosition();if(Math.abs(e.x-n.x)<=12&&Math.abs(e.y-n.y)<=12)return Zr.OK}return Zr.None}static makeEvent(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(n)}},hi(ms,"makeEvent",[ps],Object.getOwnPropertyDescriptor(ms,"makeEvent"),ms),gs=ni("RestHP"),ys=class e extends ei{constructor(e,t){super(),this.hp=e,this.enemy=t}checkEvent(e,t){if(0===this.enemy.length){if(e.playerData.getHP()<=this.hp)return Zr.OK}else for(let n of e.getEnemyList())if(this.enemy.includes(n.name)&&n.getHP()<=this.hp)return Zr.OK;return Zr.None}static makeEvent(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(parseInt(t),r)}},hi(ys,"makeEvent",[gs],Object.getOwnPropertyDescriptor(ys,"makeEvent"),ys),vs=ni("NoTreasure"),bs=class e extends ei{checkEvent(e,t){return Zr.None}static makeEvent(){return new e}},hi(bs,"makeEvent",[vs],Object.getOwnPropertyDescriptor(bs,"makeEvent"),bs);var qs,$s,Qs,Zs,Js,el,tl,nl,rl,il,al,ol,sl,ll,ul,cl;Qr("Candle")(qs=class extends qr{clear(e){e.playerData.lostItem(kr+":1")}}),Qr("Lock")($s=class extends qr{init(e,t){t.setStageFlag(ui)}}),Qr("LockEnd")(Qs=class extends qr{init(e,t){t.clearStageFlag(ui)}}),Qr("Dark")(Zs=class extends qr{init(e,t){t.playerData.getItem(Dr)<1&&t.setStageFlag(1)}});let hl=Qr("Dark2")(Js=class extends qr{init(e,t){t.playerData.getItem(Dr)<2&&t.setStageFlag(1)}})||Js,fl=Qr("Exit")(el=class extends hl{init(e,t){t.playerData.getItem(Dr)<3&&t.setStageFlag(8),super.init(e,t)}})||el,dl=(Qr("Exit2")(tl=class extends hl{init(e,t){t.playerData.getItem(Dr)<6&&t.setStageFlag(8),super.init(e,t);const n=t.getDoorPos(),r=t.getKeyPos(),i=new ro("dummy",t.getSprite(e,"stage"));for(;;){const e=t.randomPos();if(e.y=0,e.x!==n.x&&(e.x!==r.x||e.y!==r.y)){i.init(e.x,e.y),t.addEnemy(i);break}}}}),Qr("Key")(nl=class extends fl{init(e,t){t.playerData.getItem(Dr)<4&&t.setStageFlag(4),super.init(e,t)}})||nl);Qr("Slime")(rl=class extends dl{init(e,t){t.playerData.getItem(Dr)<5&&t.setStageFlag(128),super.init(e,t)}}),Qr("ClearPotion")(il=class extends qr{clear(e){e.playerData.lostItem(Pr)}}),Qr("Cure")(al=class extends qr{init(e,t){t.setTreasureItem(Hr)}}),Qr("Mattock")(ol=class extends qr{init(e,t){t.setStageFlag(512)}}),Qr("Druaga")(sl=class extends qr{clear(e){e.isStageFlag(64)||(e.playerData.lostItem(Sr),e.playerData.lostItem(Cr),e.playerData.lostItem(Tr),e.setPlayMode(Fr.ZapWait))}}),Qr("Last")(ll=class extends qr{init(e,t){t.setStageFlag(8),t.setStageFlag(4),t.setLastFloor()}}),Qr("Choice")(ul=class extends qr{init(e,t){let n=Math.floor(8*Math.random())+5;for(let r=5;r<13;r++)if(r===n)t.setDoorPos(r,0);else{const n=new no("DummyExit",t.getSprite(e,"stage"));n.init(r,0),t.addEnemy(n)}}}),Qr("Change")(cl=class extends qr{init(e,t){t.playerData.hasItem(Dr)&&t.setStageFlag(256)}});class pl{constructor(e,t){this.count=240,this.fontRender=void 0,this.fontRender=Qn(e),t&&Kn.getSaveData(t.playerData.saveNum).then((e=>{const n=Math.max(e.data.maxStage,t.floorNum);t.playerData.saveData(t.floorNum,n,!0).then()})),lr("GameOver",1).then()}stepFrame(e,t){e.clearColor(0,0,0,1),e.clearDepth(1),e.viewport(0,0,512,512),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.enable(e.DEPTH_TEST);let n="GAME OVER";return this.fontRender.draw(e,n,[-.45,-.05,.9,.1],[1,1,1]),this.count--,this.count<=0?new Bl(e):this}}const ml=["CONGRATULATIONS !!","","NOW YOU SAVE KI","AND","THE ADVENTURE IS OVER","","","ITEMS AND CASTS"];function gl(e){let t=[];for(let n=0;n<4;n++)for(let r=0;r<8;r++)t.push(e+n,2,-1,2);return t}const yl=[{name:"GREEN SLIME",file:"GREEN_Slime",timer:[0,60,1,2,0,2,2,2,0,2,1,2,0,2,2,2]},{name:"BLACK SLIME",file:"BLACK_Slime",timer:[0,60,1,2,0,2,2,2,0,2,1,2,0,2,2,2]},{name:"RED SLIME",file:"RED_Slime",timer:[0,60,1,2,0,2,2,2,0,2,1,2,0,2,2,2]},{name:"BLUE SLIME",file:"BLUE_Slime",timer:[0,60,1,2,0,2,2,2,0,2,1,2,0,2,2,2]},{name:"DARK GREEN SLIME",file:"DKGREEN_Slime",timer:[0,60,1,2,0,2,2,2,0,2,1,2,0,2,2,2]},{name:"DARK YELLOW SLIME",file:"DKYELLOW_Slime",timer:[0,60,1,2,0,2,2,2,0,2,1,2,0,2,2,2]},{name:"MAGE",file:"MAGE",timer:[2,60,3,5,0,5,1,5]},{name:"MAGE SPELL",file:"Spell",timer:gl(0)},{name:"DRUID",file:"DLUID",timer:[2,60,3,5,0,5,1,5]},{name:"DRUID SPELL",file:"Spell",timer:gl(4)},{name:"SORCERER",file:"SORCERER",timer:[2,60,3,5,0,5,1,5]},{name:"SORCERER SPELL",file:"Spell",timer:gl(8)},{name:"WIZARD",file:"WIZARD",timer:[2,60,3,5,0,5,1,5]},{name:"WIZARD SPELL",file:"Spell",timer:gl(12)},{name:"MAGE GHOST",file:"MAGE_Ghost",timer:[2,60,3,5,0,5,1,5]},{name:"DRUID GHOST",file:"DLUID_Ghost",timer:[2,60,3,5,0,5,1,5]},{name:"WIZARD GHOST",file:"WIZARD_Ghost",timer:[2,60,3,5,0,5,1,5]},{name:"FIRE ELEMENT",file:"Spell_Fire",timer:[0,4,1,4,2,4,3,4]},{name:"BLUE KNIGHT",file:"BLUE_Knight",timer:[0,15,1,15,0,15,1,15,2,15,3,15,2,15,3,15,4,15,5,15,4,15,5,15,6,15,7,15,6,15,7,15]},{name:"BLACK KNIGHT",file:"BLACK_Knight",timer:[0,15,1,15,0,15,1,15,2,15,3,15,2,15,3,15,4,15,5,15,4,15,5,15,6,15,7,15,6,15,7,15]},{name:"MIRROR KNIGHT",file:"MIRROR_Knight",timer:[0,15,1,15,0,15,1,15,2,15,3,15,2,15,3,15,4,15,5,15,4,15,5,15,6,15,7,15,6,15,7,15]},{name:"HYPER KNIGHT",file:"HYPER_Knight",timer:[0,15,1,15,0,15,1,15,2,15,3,15,2,15,3,15,4,15,5,15,4,15,5,15,6,15,7,15,6,15,7,15]},{name:"RED KNIGHT",file:"RED_Knight",timer:[0,15,1,15,0,15,1,15,2,15,3,15,2,15,3,15,4,15,5,15,4,15,5,15,6,15,7,15,6,15,7,15]},{name:"LIZARD MAN",file:"LIZARD_Knight",timer:[0,15,1,15,0,15,1,15,2,15,3,15,2,15,3,15,4,15,5,15,4,15,5,15,6,15,7,15,6,15,7,15]},{name:"QUOX",file:"QUOX_Dragon",timer:[0,15,1,15,0,15,1,15,5,15,6,15,5,15,6,15,10,15,11,15,10,15,11,15,15,15,16,15,15,15,16,15]},{name:"SLIVER DRAGON",file:"SILVER_Dragon",timer:[0,15,1,15,0,15,1,15,5,15,6,15,5,15,6,15,10,15,11,15,10,15,11,15,15,15,16,15,15,15,16,15]},{name:"BLACK DRAGON",file:"BLACK_Dragon",timer:[0,15,1,15,0,15,1,15,5,15,6,15,5,15,6,15,10,15,11,15,10,15,11,15,15,15,16,15,15,15,16,15]},{name:"BLUE WILL'O WISP",file:"Wisp",timer:[2,10,3,10]},{name:"RED WILL'O WISP",file:"Wisp",timer:[0,10,1,10]},{name:"GREEN ROPER",file:"GREEN_Roper",timer:[0,10,1,10]},{name:"RED ROPER",file:"RED_Roper",timer:[0,10,1,10]},{name:"BLUE ROPER",file:"BLUE_Roper",timer:[0,10,1,10]},{name:"SUCCUBUS",file:"Ishtar",timer:[0,60,1,4,0,4,1,4,0,4,1,4,0,4,1,100,0,4,1,4,0,4,1,4]},{name:"DRUAGA",file:"DemonDruaga",timer:[0,10,1,10]},{name:"ISHTAR",file:"Ishtar",timer:[0,60]},{name:"GATE",file:"stage",timer:[0,60]},{name:"OPENED GATE",file:"stage",timer:[1,60]},{name:"KEY",file:"stage",timer:[2,60]},{name:"TREASURE",file:"stage",timer:[3,60]},{name:"KI",file:"Ishtar",timer:[2,80,3,10,4,10,3,10,4,10]},{name:"GILGAMETH",file:"",timer:[0,15,1,15,0,15,1,15,6,15,7,15,6,15,7,15,12,15,13,15,12,15,13,15,18,15,19,15,18,15,19,15]}],vl=[{name:"WHITE SLIME",file:"WHITE_Slime",timer:[0,60,1,2,0,2,2,2,0,2,1,2,0,2,2,2]},{name:"BLUE LIZARD MAN",file:"BLUE_LIZARD",timer:[0,15,1,15,0,15,1,15,2,15,3,15,2,15,3,15,4,15,5,15,4,15,5,15,6,15,7,15,6,15,7,15]}],bl=["COPPER MATTOCK","SILVER MATTOCK","GOLD MATTOCK","CANDLE","PERMANENT CANDLE","JET BOOTS","BOOK OF LIGHT","WHITE SWORD","DRAGON SLAYER","EXCALIBUR","SAPPHIRE MACE","RUBY MACE","CHIME","BIBLE","GREEN CRYSTAL ROD","RED CRYSTAL ROD","BLUE CRYSTAL ROD","GUANTLET","HYPER GUANTLET","PEARL","BOOK OF GATE DETECT","GREEN RING","RED RING","BLUE RING","ARMOR","HYPER ARMOR","BALANCE","BOOK OF KEY DETECT","GREEN NECKLACE","RED NECKLACE","BLUE NECKLACE","RED LINE SHIELD","BLUE LINE SHIELD","HYPER HELMET","","POTION OF HEALING","POTION OF POWER","POTION OF ENERGY DRAIN","DRAGON POT","POTION OF UNLOCK","POTION OF DEATH","POTION OF CURE"],xl=["BOOK OF SLIME","BOOK OF LIGHT GATE DETECT","PLATINUM MATTOCK"];class wl{constructor(e,t){this.stage=t,this.mode=0,this.count=240,this.fontRender=void 0,this.stageRender=void 0,this.startRender=void 0,this.stageTex=void 0,this.lookData=[[0,66.1,59,300],[0,63,59,200],[4,62,59,200],[8,58,59,500],[10,45,55,600],[15,30,40,600],[15,2,30,600],[15,2,15,600],[20,2,0,600],[15,1,0,800]],this.castIndex=0,this.castData=[],this.itemIndex=0,this.scrollY=0,this.castList=void 0,this.itemList=void 0,this.castList=[...yl],this.itemList=[...bl],3===Al.gameMode&&(this.castList.push(...vl),this.itemList.push(...xl)),this.fontRender=Qn(e),this.stageRender=Sl(e),this.startRender=Il(e),Kn.getSaveData(this.stage.playerData.saveNum).then((e=>{e.data.continueFlag=!0,Kn.updateSaveData(e).then()})),this.stageTex=this.startRender.makeStageTexture(e,this.stageRender,this.stage,!1),this.count=this.lookData[0][3],this.stage.playerData.init(e,0,0)}stepFrame(e,t){e.clearColor(0,0,0,1),e.clearDepth(1),e.viewport(0,0,512,512),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.enable(e.DEPTH_TEST);let n=Math.min(this.mode,this.lookData.length-1),r=this.lookData[n][0],i=this.lookData[n][1],a=this.lookData[n][2],o=this.lookData[n][3];n<this.lookData.length-1&&(r+=(this.lookData[n+1][0]-r)*(o-this.count)/o,i+=(this.lookData[n+1][1]-i)*(o-this.count)/o,a+=(this.lookData[n+1][2]-a)*(o-this.count)/o),this.startRender.draw(e,r,i,a,this.stageTex,this.mode===this.lookData.length-1);let s=[1,.5+.5*Math.sin(this.count/10*Math.PI),.5+.5*Math.cos(this.count/20*Math.PI)];if(this.mode<5){let t=this.scrollY-.6;e.clear(e.DEPTH_BUFFER_BIT);for(let n of ml)n.length>0?(this.fontRender.draw(e,n,[.025*-n.length,t,.05*n.length,.08],s),t+=.1):(t+=.5,s=t>this.scrollY+1?[1,1,1]:[.7,.7,1]);this.mode>=2&&(this.scrollY-=.004)}if(this.mode>=3){let t=0;for(let n of this.castData){let r;n.y-=.004,t=n.y,e.viewport(0,0,512,512),r=n.data.file?this.stage.getSprite(e,n.data.file):this.stage.playerData.spriteData,this.fontRender.draw(e,n.data.name,[n.x-.015*n.data.name.length,n.y-.04,.03*n.data.name.length,.05],[1,1,1]),n.data.timer[n.index]>=0&&this.stageRender.drawChara(e,r,n.x-.075,n.y,n.data.timer[n.index]),n.time--,n.time<=0&&(n.index=(n.index+2)%n.data.timer.length,n.time=n.data.timer[n.index+1])}if(t<.9)for(this.castIndex<this.castList.length&&(this.castData.push({data:this.castList[this.castIndex],x:.6,y:1.15,time:this.castList[this.castIndex].timer[1],index:0}),this.castIndex++);this.itemIndex<this.itemList.length;){if(this.itemList[this.itemIndex]){this.castData.push({data:{name:this.itemList[this.itemIndex],file:"item",timer:[this.itemIndex,1e3]},x:-.6,y:1.15,time:1e3,index:0}),this.itemIndex++;break}this.itemIndex++}this.castData.length>0&&this.castData[0].y<-1.1&&this.castData.shift()}if(this.count--,this.count<=0){if(this.mode++,1===this.mode&&lr("Ending",1).then(),this.count=240,!(this.mode<this.lookData.length))return e.deleteTexture(this.stageTex),new pl(e);this.count=this.lookData[this.mode][3]}else if(this.mode===this.lookData.length-1&&(this.stageRender.drawChara(e,this.stage.playerData.spriteData,.04,-.05,12),this.stageRender.drawChara(e,this.stage.getSprite(e,"Ishtar"),-.06,-.05,2),this.count<600)){e.viewport(0,0,512,512);let t="TOTAL CONTINUES: "+this.stage.playerData.getPlayCount();0===this.stage.playerData.getPlayCount()&&(t="NO CONTINUE CLEAR!"),this.fontRender.draw(e,t,[.025*-t.length,-.4,.05*t.length,.1],[1,.8,.8]),this.fontRender.draw(e,"THANK YOU FOR PLAYING.",[-.7,.3,1.4,.12],[1,1,.8])}return this}}class El{constructor(e,t){this.playerData=t,this.count=300,this.fontRender=void 0,this.fontRender=Qn(e),lr("Zap",1).then()}stepFrame(e,t){e.clearColor(0,0,0,1),e.clearDepth(1),e.viewport(0,0,512,512),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.enable(e.DEPTH_TEST);let n="YOU ZAPPED TO ...";if(this.fontRender.draw(e,n,[-.85,-.05,17*.1,.1],[1,1,1]),this.count--,this.count<=0){this.playerData.zap();let t=Math.floor(8*Math.random())+10;return new Al(e,this.playerData,t,!0)}return this}}class kl{constructor(e){this.program=void 0,this.aPos=void 0,this.aColor=void 0,this.posVbo=void 0,this.colorVbo=void 0,this.spriteVbo=void 0,this.spriteVboS=void 0,this.spriteVboL=void 0,this.spriteTexVbo=void 0,this.fireVbo=void 0,this.fireTexVbo=void 0,this.uPos=void 0,this.uBlk=void 0,this.uTex=void 0,this.uLight=void 0,this.texMap={};let t=e.createShader(e.VERTEX_SHADER);e.shaderSource(t,"\n// xyz, a=\u89d2\u5ea6\nattribute vec4 a_pos;\nattribute vec4 a_color;\n\n// xyz: offset, w: z-offset\nuniform vec4 u_blk;\n// xy: light xy, z: hor_x\nuniform vec3 u_pos;\n// x:length, y:min, z:max\nuniform vec3 u_light;\nvarying vec4 v_color;\nvarying vec2 v_center;\nvarying vec2 v_block;\nvarying vec3 v_light;\n\nvoid main() {\n    vec2 blk = u_blk.xy + a_pos.xy;\n    vec2 dir = normalize(blk.xy - u_pos.xy);\n    vec2 dir2;\n    float light;\n    v_light = u_light;\n    if (a_pos.w < 0.0) {\n        light = -a_pos.w;\n    } else {\n        dir2 = vec2(-cos(a_pos.w), sin(a_pos.w));\n        light = clamp((1.0 - dot(dir, dir2) / 5.0), 0.5, 1.2);\n    }\n    float z = a_pos.z + u_blk.z;\n    gl_Position = vec4((blk.x - u_pos.z) / 7.0, 0.85 - blk.y / 7.0 + z / 12.0, 0.5 - z / 20.0 + u_blk.w, 1.0 - blk.y / 20.0);\n    if (a_color.b < 0.0) {\n        v_color = vec4(a_color.xy, light - 2.0, a_color.a);\n    } else {\n        v_color = vec4(a_color.rgb * light, a_color.a);\n    }\n    v_block = blk;\n    v_center = u_pos.xy;\n}\n"),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(t));let n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,"\nprecision mediump float;\nvarying vec4 v_color;\nvarying vec2 v_center;\nvarying vec2 v_block;\nvarying vec3 v_light;\nuniform sampler2D u_tex;\n\nvoid main() {\n    float light;\n    if (v_center.x < 0.0) {\n        light = 1.0;\n    } else {\n        light = clamp(1.0 - length(v_block - v_center) / v_light.x, v_light.y, v_light.z);\n    }\n    if (v_color.b < 0.0) {\n        vec4 col = texture2D(u_tex, v_color.xy);\n        gl_FragColor = vec4(col.rgb * (v_color.b + 2.0) * light, v_color.a * col.a);\n        //gl_FragColor = vec4(col.rgb * light, v_color.a * col.a);\n    } else {\n        gl_FragColor = vec4(v_color.rgb * light, v_color.a);\n    }\n}\n"),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(n)),this.program=e.createProgram(),e.attachShader(this.program,t),e.attachShader(this.program,n),e.linkProgram(this.program),e.useProgram(this.program),this.aPos=e.getAttribLocation(this.program,"a_pos"),this.aColor=e.getAttribLocation(this.program,"a_color"),this.uPos=e.getUniformLocation(this.program,"u_pos"),this.uBlk=e.getUniformLocation(this.program,"u_blk"),this.uTex=e.getUniformLocation(this.program,"u_tex"),this.uLight=e.getUniformLocation(this.program,"u_light"),this.posVbo=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.posVbo);let r=[],i=[];r.push(0,0,0,-1,0,9,0,-1,18,0,0,-1,18,9,0,1),i.push(0,0,-1,1,0,9,-1,1,18,0,-1,1,18,9,-1,1);const a=.1,o=.07;r.push(-.1,-o,0,0,-.1,o,0,0,-.1,-o,1,0,-.1,o,1,0,-.1,o,1,Math.PI/2,-.1,o,0,Math.PI/2,a,o,1,Math.PI/2,a,o,0,Math.PI/2,a,o,0,Math.PI,a,-o,0,Math.PI,a,o,1,Math.PI,a,-o,1,Math.PI,a,-o,1,-1,-.1,-o,1,-1,a,o,1,-1,-.1,o,1,-1),i.push(0,1,-1,1,.14,1,-1,1,0,.25,-1,1,.14,.25,-1,1,0,.25,-1,1,0,1,-1,1,.2,.25,-1,1,.2,1,-1,1,0,1,-1,1,.14,1,-1,1,0,.25,-1,1,.14,.25,-1,1,0,0,-1,1,0,.25,-1,1,.2,0,-1,1,.2,.25,-1,1),r.push(.9,-o,1,-1,a,-o,1,-1,.9,o,1,-1,a,o,1,-1,a,o,1,Math.PI/2,a,o,0,Math.PI/2,.9,o,1,Math.PI/2,.9,o,0,Math.PI/2),i.push(1,0,-1,1,.2,0,-1,1,1,.25,-1,1,.2,.25,-1,1,.2,.25,-1,1,.2,1,-1,1,1,.25,-1,1,1,1,-1,1),r.push(-.1,o,0,0,-.1,1-o,0,0,-.1,o,1,0,-.1,1-o,1,0,-.1,o,1,-1,-.1,1-o,1,-1,a,o,1,-1,a,1-o,1,-1,a,1-o,1,Math.PI,a,1-o,0,Math.PI,a,o,1,Math.PI,a,o,0,Math.PI),i.push(.14,1,-1,1,1,1,-1,1,.14,.25,-1,1,1,.25,-1,1,.14,.25,-1,1,1,.25,-1,1,.14,0,-1,1,1,0,-1,1,.14,.25,-1,1,.14,1,-1,1,1,.25,-1,1,1,1,-1,1),r.push(a,9,0,Math.PI,a,0,0,Math.PI,a,9,1.2,Math.PI,a,0,1.2,Math.PI,-5,9,1.2,-1,-5,0,1.2,-1,-4,o,0,Math.PI/2,22,o,0,Math.PI/2,-4,o,1.2,Math.PI/2,22,o,1.2,Math.PI/2,-4,-2,1.2,-1,22,-2,1.2,-1,17.9,0,0,0,17.9,9,0,0,17.9,0,1.2,0,17.9,9,1.2,0,22,0,1.2,-1,22,9,1.2,-1,22,10,1.2,-1,22,9,1.2,-1,-4,10,1.2,-1,-4,9,1.2,-1),i.push(.1,1,-1,1,9.1,1,-1,1,.1,.5,-1,1,9.1,.5,-1,1,.1,0,-1,1,9.1,0,-1,1,.5,1,-1,1,26.5,1,-1,1,.5,.5,-1,1,26.5,.5,-1,1,.5,0,-1,1,26.5,0,-1,1,.1,1,-1,1,9.1,1,-1,1,.1,.5,-1,1,9.1,.5,-1,1,.1,0,-1,1,9.1,0,-1,1,.5,0,-1,1,.5,.52,-1,1,26.5,0,-1,1,26.5,.52,-1,1),r.push(.3,0,1.1,-1,.3,.4,1.1,-1,.7,0,1.1,-1,.7,.4,1.1,-1,.3,0,1.1,-1,.3,.4,1.1,-1,.7,0,1.1,-1,.7,.4,1.1,-1);let s=5/7,l=6/7,u=1/7,c=2/7;i.push(s,u,-1,1,s,c,-1,1,l,u,-1,1,l,c,-1,1,l,u,-1,1,l,c,-1,1,s,u,-1,1,s,c,-1,1),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),this.colorVbo=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.colorVbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.spriteVbo=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.spriteVbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array([.1,.5,1.2,-1,.1,.5,0,-1,.9,.5,1.2,-1,.9,.5,0,-1]),e.STATIC_DRAW),this.spriteVboS=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.spriteVboS),e.bufferData(e.ARRAY_BUFFER,new Float32Array([.3,.4,.6,-1,.3,.4,0,-1,.7,.4,.6,-1,.7,.4,0,-1]),e.STATIC_DRAW),this.spriteVboL=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.spriteVboL),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-.3,.6,2.2,-1,-.3,.6,0,-1,1.3,.6,2.2,-1,1.3,.6,0,-1]),e.STATIC_DRAW),this.spriteTexVbo=e.createBuffer(),this.fireVbo=e.createBuffer(),this.fireTexVbo=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.fireTexVbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,-1,1,0,.25,-1,1,.5,0,-1,1,.5,.25,-1,1,0,.25,-1,1,0,.5,-1,1,.5,.25,-1,1,.5,.5,-1,1,0,.5,-1,1,0,.75,-1,1,.5,.5,-1,1,.5,.75,-1,1,0,.75,-1,1,0,1,-1,1,.5,.75,-1,1,.5,1,-1,1]),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null);const h=["floor","wall","wall2","block","ground","sky","sky2","sky3","sky4"];for(let f of h)this.getTexture(e,f)}getTexture(e,t){if(!(t in this.texMap)){const n=e.createTexture();this.texMap[t]=n;let r=new Image;r.onload=()=>{console.log("Image Loaded",t),e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},r.src="images/".concat(t,".png")}return this.texMap[t]}draw(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.useProgram(this.program),e.viewport(0,50,512,462),e.enable(e.CULL_FACE),e.enable(e.BLEND),e.enable(e.DEPTH_TEST),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),t.isStageFlag(1)?e.uniform3f(this.uLight,.1,0,1.2):e.uniform3f(this.uLight,10,.2,1.2);const r=t.playerData.getDrawData();let i=r.x;i<4?i=4:i>14&&(i=14);let a=[];const o=t.getSprite(e,"stage");if(t.isDoorOpen()){const e=t.getDoorPos();a.push({sprite:o.texData,x:e.x,y:e.y-.3,rect:o.getTexRect(1),type:0})}else{if(!t.isStageFlag(8)){const e=t.getDoorPos();a.push({sprite:o.texData,x:e.x,y:e.y-.3,rect:o.getTexRect(0),type:0})}if(!t.isStageFlag(4)&&t.playerData.getItem(xr)<0){const e=t.getKeyPos();a.push({sprite:o.texData,x:e.x,y:e.y-.1,rect:o.getTexRect(2),zadd:0,type:0})}}if(t.getTreasure()>0){const e=t.getTreasurePos();a.push({sprite:o.texData,x:e.x,y:e.y,rect:o.getTexRect(3),type:0})}for(let g of t.getEnemyList()){const e=g.getSpritePosition();e&&(void 0===e.type&&(e.type=g.sizeType),a.push({sprite:g.spriteData.texData,x:e.x,y:e.y,rect:g.spriteData.getTexRect(e.index),type:e.type||0}))}e.uniform3f(this.uPos,r.x+.4,r.y+.4,i);let s=!0;switch(t.getPlayMode()){case Fr.StarWait:s=(2&t.getGlobalCount())>0;break;case Fr.ZapWait:case Fr.LostWait:{const e=t.getGlobalCount();let n=255;e<60?n=2:e<120?n=4:e<180?n=6:e<240&&(n=7),s=(e&n)>0}break;case Fr.ClearWait:case Fr.ReturnWait:r.y+=Math.min(0,t.getGlobalCount()/300-.25),r.y<-.2&&(s=!1)}s&&a.push({sprite:t.playerData.spriteData.texData,x:r.x,y:r.y,rect:t.playerData.spriteData.getTexRect(r.foot),type:0},{sprite:t.playerData.spriteData.bodyTex,x:r.x,y:r.y,rect:t.playerData.spriteData.getBodyTexRect(r.body),type:0}),a.sort(((e,t)=>e.y<t.y?-1:e.y>t.y?1:0)),e.enable(e.DEPTH_TEST),e.bindBuffer(e.ARRAY_BUFFER,this.posVbo),e.enableVertexAttribArray(this.aPos),e.vertexAttribPointer(this.aPos,4,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.colorVbo),e.enableVertexAttribArray(this.aColor),e.vertexAttribPointer(this.aColor,4,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,null),e.uniform3f(this.uPos,-1,-1,i),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.texMap.block),e.uniform1i(this.uTex,0),e.uniform4f(this.uBlk,0,0,0,0),e.drawArrays(e.TRIANGLE_STRIP,40,22),e.uniform3f(this.uPos,r.x+.4,r.y+.4,i),e.bindTexture(e.TEXTURE_2D,this.texMap.floor),e.uniform4f(this.uBlk,0,0,0,0),e.drawArrays(e.TRIANGLE_STRIP,0,4),t.isStageFlag(512)?e.bindTexture(e.TEXTURE_2D,this.texMap.wall2):e.bindTexture(e.TEXTURE_2D,this.texMap.wall);for(let g=1;g<9;g++)for(let t=1;t<18;t++)e.uniform4f(this.uBlk,t,g,0,0),e.drawArrays(e.TRIANGLE_STRIP,4,16);for(let g of t.getWall())e.uniform4f(this.uBlk,g.x,g.y,0,0),1===g.type?e.drawArrays(e.TRIANGLE_STRIP,28,12):2===g.type&&e.drawArrays(e.TRIANGLE_STRIP,20,8);if(n)return;e.uniform3f(this.uPos,-1,-1,i);const l=t.getSprite(e,"item"),u=t.playerData.getChimePos();u&&(e.uniform4f(this.uBlk,r.x+(u>0?.5:-.5),r.y,0,0),e.bindTexture(e.TEXTURE_2D,l.texData),e.drawArrays(e.TRIANGLE_STRIP,62+4*(1&u),4));const c=t.getSprite(e,"DragonFire");e.bindTexture(e.TEXTURE_2D,c.texData);for(let g of t.getFireList())this.drawFire(e,g);let h=-1,f=-1,d=0;for(let g of a){let t=0;f===g.y&&Math.abs(h-g.x)<=1.1?(t-=d,d+=.005):d=.005,this.drawSprite(e,g.sprite,g.x,g.y,g.rect,t,g.type),h=g.x,f=g.y}const p=t.getFlash();p&&this.drawFlash(e,r.x,r.y,p.count,p.type),e.viewport(0,-382,512,462);const m=t.playerData.getDrawItemList();e.uniform3f(this.uPos,-1,-1,6.5);for(let g=0;g<t.playerData.getRest();g++)this.drawSprite(e,o.texData,.3*g,.95,o.getTexRect(4),.01*-g);for(let g=0;g<m.length;g++){const t=m[g];if(t<0)continue;let n=.8*g,r=0;g>11&&(n=.8*(g-10),r=.95),this.drawSprite(e,l.texData,n,r,l.getTexRect(t))}t.playerData.getHP()}drawFire(e,t){let n=[],r=[t.length];1&t.dir?r[0]>1.4&&(r.push(2.6*(r[0]-1.4)/3.6+1.4),r[1]>1.5&&(r.push(1.5*(r[1]-1.5)/3.5+1.5),r[2]>1.6&&r.push(.4*(r[2]-1.6)/3.4+1.6))):r[0]>1.4&&(r.push(2.9*(r[0]-1.4)/3.6+1.4),r[1]>1.5&&(r.push(2.1*(r[1]-1.5)/3.5+1.5),r[2]>1.6&&r.push(1.3*(r[2]-1.6)/3.4+1.6)));let i=.2+t.bx,a=.2+t.by,o=[.6,0],s=[0,-1];switch(t.dir){case 2:i=t.bx+.8,a=t.by+.2,o=[0,.6],s=[1,0];break;case 3:i=t.bx+.8,a=t.by+.8,o=[-.6,0],s=[0,1];break;case 4:i=t.bx+.2,a=t.by+.8,o=[0,-.6],s=[-1,0]}for(let l of r){let e=Math.max(0,l-3);n.push(i+s[0]*e,a+s[1]*e,.5,-1),n.push(i+s[0]*e+o[0],a+s[1]*e+o[1],.5,-1),n.push(i+s[0]*l,a+s[1]*l,.5,-1),n.push(i+s[0]*l+o[0],a+s[1]*l+o[1],.5,-1)}e.bindBuffer(e.ARRAY_BUFFER,this.fireVbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),e.enableVertexAttribArray(this.aPos),e.vertexAttribPointer(this.aPos,4,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.fireTexVbo),e.enableVertexAttribArray(this.aColor),e.vertexAttribPointer(this.aColor,4,e.FLOAT,!1,0,0),e.uniform4f(this.uBlk,0,0,0,0),e.disable(e.DEPTH_TEST);for(let l=0;l<n.length;l+=16)e.drawArrays(e.TRIANGLE_STRIP,l/4,4)}drawChara(e,t,n,r,i){let a=6.5*(n+1);if(e.useProgram(this.program),e.viewport(0,95-10.8*(r+1)*Lr,512,462),e.enable(e.BLEND),e.disable(e.DEPTH_TEST),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.uniform3f(this.uLight,-1,-1,6.5),e.uniform1i(this.uTex,0),e.uniform3f(this.uPos,-1,-1,6.5),t instanceof vr){const n=t;this.drawSprite(e,t.texData,a,1,t.getTexRect(1&i)),this.drawSprite(e,n.bodyTex,a,1,n.getBodyTexRect(i),-.02)}else this.drawSprite(e,t.texData,a,1,t.getTexRect(i))}drawSprite(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-.01;switch(arguments.length>6&&void 0!==arguments[6]?arguments[6]:0){case 1:e.bindBuffer(e.ARRAY_BUFFER,this.spriteVboS);break;case 2:e.bindBuffer(e.ARRAY_BUFFER,this.spriteVboL);break;default:e.bindBuffer(e.ARRAY_BUFFER,this.spriteVbo)}e.enableVertexAttribArray(this.aPos),e.vertexAttribPointer(this.aPos,4,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.spriteTexVbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array([i.sx,i.sy,-1,1,i.sx,i.ey,-1,1,i.ex,i.sy,-1,1,i.ex,i.ey,-1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(this.aColor),e.vertexAttribPointer(this.aColor,4,e.FLOAT,!1,0,0),e.bindTexture(e.TEXTURE_2D,t),e.uniform4f(this.uBlk,n,r,0,a),e.enable(e.DEPTH_TEST),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.disable(e.DEPTH_TEST),e.bindBuffer(e.ARRAY_BUFFER,this.spriteTexVbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array([i.sx,i.sy,-1,.3,i.sx,i.ey,-1,.3,i.ex,i.sy,-1,.3,i.ex,i.ey,-1,.3]),e.STATIC_DRAW),e.enableVertexAttribArray(this.aColor),e.vertexAttribPointer(this.aColor,4,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLE_STRIP,0,4)}drawFlash(e,t,n,r,i){e.disable(e.DEPTH_TEST),e.lineWidth(1);let a=[],o=[];const s=0===i?4:8,l=0===i?1:1.2;let u=Math.PI*r/60,c=Math.min(1,r/20);for(let h=0;h<s;h++){let e=Math.cos(u),t=Math.sin(u);u+=2*Math.PI/s,a.push(.5+.25*e,.5+.1*t,0,-1,.5+.4*e,.5+.15*t,l,-1),i<0?o.push(.2,.2,.2,c,0,0,0,c):o.push(.8,.8,.8,c,1,1,1,c)}e.uniform4f(this.uBlk,t,n,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.fireVbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array(a),e.STATIC_DRAW),e.enableVertexAttribArray(this.aPos),e.vertexAttribPointer(this.aPos,4,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.spriteTexVbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),e.enableVertexAttribArray(this.aColor),e.vertexAttribPointer(this.aColor,4,e.FLOAT,!1,0,0),e.drawArrays(e.LINES,0,a.length/4)}}let Dl;function Sl(e){return Dl||(Dl=new kl(e)),Dl}class _l{constructor(e,t){this.stageData=t,this.fontRender=void 0,this.stageRender=void 0,this.pause=!1,this.fontRender=Qn(e),this.stageRender=Sl(e);let n={name:"FloorNormal",start:1,end:60};for(let r of t.getEnemyList())r instanceof Xa?n={name:"FloorDragon",start:1,end:60}:r instanceof oo&&(n={name:"FloorIshtar",start:1,end:44});59===this.stageData.floorNum?n={name:"FloorDruaga",start:1,end:44}:60===this.stageData.floorNum&&(n={name:"FloorIshtar",start:1,end:44}),lr(n.name,n.start,n.end).then()}stepFrame(e,t){e.clearColor(0,0,0,1),e.clearDepth(1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.enable(e.DEPTH_TEST);let n=this.stageData.playerData;var r;this.pause||(null===(r=this.stageData)||void 0===r||r.stepFrame(e));t.isPause(!0)&&(this.pause=!this.pause),this.stageRender.draw(e,this.stageData);let i=this.stageData.getTimer();e.clear(e.DEPTH_BUFFER_BIT),e.viewport(0,0,512,512);let a=i.toString();a.length<5&&(a="    ".substring(0,5-a.length)+a),a="TIME "+a,this.stageData.isRedTime()?this.fontRender.draw(e,a,[.49,.89,.5,.07],[1,.2,.2]):this.fontRender.draw(e,a,[.49,.89,.5,.07],[1,1,1]);let o=n.getHP().toString();o.length<3&&(o="  ".substring(0,3-o.length)+o);let s=[1,1,1];n.getHP()<=16&&(s=[1,.2,.2]),this.fontRender.draw(e,"HP "+o,[.69,.8,.3,.07],s),this.pause&&this.fontRender.draw(e,"PAUSE",[-.2,-.1,.4,.1],[1,1,1]);const l=this.stageData.getPlayMode();if(l===Fr.Playing)return this;if(0===this.stageData.getGlobalCount()){if(l===Fr.LostWait)return this.stageData.playerData.lostPlayer()?new Al(e,this.stageData.playerData,this.stageData.floorNum):new pl(e,this.stageData);if(l===Fr.ClearWait)return new Al(e,this.stageData.playerData,this.stageData.floorNum+1);if(l===Fr.ReturnWait)return new Al(e,this.stageData.playerData,this.stageData.floorNum-1);if(l===Fr.ZapWait)return new El(e,this.stageData.playerData);if(l===Fr.AllClear)return new wl(e,this.stageData)}return this}}function Pl(e){const t=Math.hypot(e[0],e[1],e[2]);return[e[0]/t,e[1]/t,e[2]/t]}function Rl(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Tl(e,t,n){const r=Pl((a=t,[(i=e)[0]-a[0],i[1]-a[1],i[2]-a[2]]));var i,a;const o=Pl(Rl(n,r)),s=Rl(r,o),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return l[0]=o[0],l[1]=s[0],l[2]=r[0],l[4]=o[1],l[5]=s[1],l[6]=r[1],l[8]=o[2],l[9]=s[2],l[10]=r[2],l[12]=-(o[0]*e[0]+o[1]*e[1]+o[2]*e[2]),l[13]=-(s[0]*e[0]+s[1]*e[1]+s[2]*e[2]),l[14]=-(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]),l}let Cl,Ol="sky";class Nl{constructor(e){this.program=void 0,this.aPos=void 0,this.aTex=void 0,this.aNormal=void 0,this.uMat=void 0,this.uProj=void 0,this.uTex=void 0,this.uPos=void 0,this.uLight=void 0,this.posVbo=void 0,this.normVbo=void 0,this.texVbo=void 0,this.texture={},this.projMat=void 0,this.gateSprite=void 0,this.gateSprite=new yr(e,"stage"),this.projMat=function(e,t,n,r){const i=1/Math.tan(e/2),a=1/(n-r),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return o[0]=i/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(r+n)*a,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*r*n*a,o[15]=0,o}(Math.PI/4,1,.1,100);let t=e.createShader(e.VERTEX_SHADER);e.shaderSource(t,"\n// xyz\nattribute vec3 a_pos;\nattribute vec2 a_tex;\nattribute vec3 a_normal;\nuniform mat4 u_mat;\nuniform mat4 u_proj;\nuniform vec2 u_pos;\nuniform vec3 u_light;\n\nvarying vec3 v_tex;\nvarying float v_diff;\n\nvoid main() {\n    vec3 pos = a_pos + vec3(0.0, 0.0, u_pos.x);\n    vec3 light = normalize(u_light);\n    gl_Position = u_proj * u_mat * vec4(pos, 1.0);\n    v_tex = vec3(a_tex, u_pos.y);\n    //v_tex = vec3(a_tex, (gl_Position.z / gl_Position.w + 1.0) / 2.0);\n    v_diff = clamp(dot(a_normal, light), 0.2, 1.0);\n}\n"),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(t));let n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,"\nprecision mediump float;\nuniform sampler2D u_tex;\n\nvarying vec3 v_tex;\nvarying float v_diff;\n\nvoid main() {\n    gl_FragColor = texture2D(u_tex, v_tex.xy) * vec4(v_diff, v_diff, v_diff, v_tex.z);\n}\n"),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(n)),this.program=e.createProgram(),e.attachShader(this.program,t),e.attachShader(this.program,n),e.linkProgram(this.program),e.useProgram(this.program),this.aPos=e.getAttribLocation(this.program,"a_pos"),this.aNormal=e.getAttribLocation(this.program,"a_normal"),this.aTex=e.getAttribLocation(this.program,"a_tex"),this.uMat=e.getUniformLocation(this.program,"u_mat"),this.uProj=e.getUniformLocation(this.program,"u_proj"),this.uTex=e.getUniformLocation(this.program,"u_tex"),this.uPos=e.getUniformLocation(this.program,"u_pos"),this.uLight=e.getUniformLocation(this.program,"u_light");const r=[-20,20,0,-20,-20,0,20,20,0,20,-20,0],i=[0,0,0,10,10,0,10,10],a=[0,-1,0,0,-1,0,0,-1,0,0,-1,0];for(let l=0;l<=16;l++){const e=Math.PI*l/16,t=-Math.cos(e),n=-Math.sin(e);r.push(3*t,3*n,1,3*t,3*n,0),a.push(t,n,0,t,n,0),i.push(l,.4,l,1)}for(let l=0;l<=16;l++){const e=Math.PI*l/16,t=-Math.cos(e),n=Math.sin(e);r.push(3*t,3*n,1,3*t,3*n,0),a.push(t,n,0,t,n,0),i.push(l,.4,l,1)}r.push(0,0,0),a.push(0,0,1),i.push(.5,.5);for(let l=0;l<=32;l++){const e=Math.PI*l/16,t=-Math.cos(e),n=-Math.sin(e);r.push(3*t,3*n,0),a.push(0,0,1),i.push((t+1)/2,(n+1)/2)}r.push(-3,3,0,-3,-3,0,3,3,0,3,-3,0),a.push(0,0,1,0,0,1,0,0,1,0,0,1),i.push(0,1,0,0,1,1,1,0);for(let l=0;l<4;l++){const e=Math.PI*(7.95+(1&l))/16,t=-Math.cos(e),n=-Math.sin(e);r.push(3.1*t,3.1*n,.7,3.1*t,3.1*n,0),a.push(t,n,0,t,n,0)}i.push(0,0,0,1,1/6,0,1/6,1),i.push(1/6,0,1/6,1,2/6,0,2/6,1),this.posVbo=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.posVbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),this.normVbo=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.normVbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array(a),e.STATIC_DRAW),this.texVbo=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texVbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null);const o=["block","ground","sky","sky2","sky3","sky4"],s=Sl(e);for(let l of o)this.texture[l]=s.getTexture(e,l)}draw(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t<2?e.clearColor(0,0,0,1):e.clearColor(.1,.2,.8,1),e.clear(e.COLOR_BUFFER_BIT),e.clear(e.DEPTH_BUFFER_BIT),e.viewport(0,0,512,512),e.useProgram(this.program),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.enable(e.DEPTH_TEST),e.bindBuffer(e.ARRAY_BUFFER,this.posVbo),e.enableVertexAttribArray(this.aPos),e.vertexAttribPointer(this.aPos,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.normVbo),e.enableVertexAttribArray(this.aNormal),e.vertexAttribPointer(this.aNormal,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.texVbo),e.enableVertexAttribArray(this.aTex),e.vertexAttribPointer(this.aTex,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.uniform1i(this.uTex,0),e.uniformMatrix4fv(this.uProj,!1,this.projMat),t>2){e.uniform3f(this.uLight,0,0,1),e.bindTexture(e.TEXTURE_2D,this.texture[Ol]);const i=Math.atan2(r-n,t),a=Tl([0,-i,4],[0,-i,0],[0,-1,0]);e.uniform2f(this.uPos,0,1),e.uniformMatrix4fv(this.uMat,!1,new Float32Array(a)),e.drawArrays(e.TRIANGLE_STRIP,106,4),e.clear(e.DEPTH_BUFFER_BIT)}e.bindTexture(e.TEXTURE_2D,this.texture.ground);const o=Tl([0,-t,n],[0,0,r],[0,r<n?1:0,1]);if(e.uniformMatrix4fv(this.uMat,!1,new Float32Array(o)),e.uniform3f(this.uLight,1,-1,-1),e.uniform2f(this.uPos,0,1),t>4&&e.drawArrays(e.TRIANGLE_STRIP,0,4),t<1&&i)return e.uniform3f(this.uLight,0,0,1),e.uniform2f(this.uPos,r,1),e.bindTexture(e.TEXTURE_2D,i),void e.drawArrays(e.TRIANGLE_STRIP,106,4);if(t<8){i&&(e.uniform3f(this.uLight,0,0,1),e.uniform2f(this.uPos,r+.01,1),e.bindTexture(e.TEXTURE_2D,i),e.drawArrays(e.TRIANGLE_FAN,72,34)),e.bindTexture(e.TEXTURE_2D,this.texture.block),e.uniform3f(this.uLight,1,-1,-1);for(let t=Math.floor(r);t<60;t++)e.uniform2f(this.uPos,t,1),e.drawArrays(e.TRIANGLE_STRIP,38,34)}else e.bindTexture(e.TEXTURE_2D,this.texture.block);for(let s=0;s<60;s++){let n=1;t<8&&s>=r&&(n=Math.max(0,(t-4)/5)),e.uniform2f(this.uPos,s,n),e.drawArrays(e.TRIANGLE_STRIP,4,34)}e.uniform2f(this.uPos,0,1),e.bindTexture(e.TEXTURE_2D,this.gateSprite.texData),e.drawArrays(e.TRIANGLE_STRIP,a?114:110,4),e.flush()}makeStageTexture(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i);const a=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,a),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,512,512),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,a);const o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,512,512,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0),e.clearColor(0,0,0,1),e.clearDepth(1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.enable(e.DEPTH_TEST),e.viewport(0,0,512,512),t.draw(e,n,r),e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.deleteFramebuffer(i),e.deleteRenderbuffer(a),o}}function Il(e){return Cl||(Cl=new Nl(e)),Cl}class Al{static async getStageLoader(e){if(e!==Al.gameMode||!Al.stageLoader){Al.gameMode=e,Al.stageLoader=void 0;const t=["stage","stage","ura2","ura3"];Al.stageLoader=await(new Gr).loadStage(t[e]),1===e&&(Al.stageLoader=await Al.stageLoader.loadStage("ura1"))}return Al.stageLoader}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.playerData=t,this.stageNum=n,this.count=100,this.fontRender=void 0,this.startRender=void 0,this.stageRender=void 0,this.length=20,this.near=2,this.look=30,this.stageData=void 0,this.mode=0,this.floorTex=void 0,this.posData=[{length:20,look:1,near:2},{length:20,look:30,near:2},{length:20,look:30,near:2},{length:20,look:0,near:1},{length:10,look:0,near:1},{length:2,look:0,near:1},{length:0,look:0,near:4}],this.startRender=Il(e),this.stageRender=Sl(e);let i=Math.floor(this.playerData.saveNum/5);Al.getStageLoader(i).then(),this.fontRender=Qn(e),r?this.playerData.saveData(n,n,!1).then():Kn.getSaveData(this.playerData.saveNum).then((e=>{this.playerData.saveData(n,Math.max(e.data.maxStage,n),!1).then()}));const a=n;this.posData[3].look=a-1,this.posData[3].near=Math.min(30,a),this.posData[4].look=a-1,this.posData[4].near=Math.min(58,a),this.posData[5].look=a-1,this.posData[5].near=a+1,this.posData[6].look=a-1,this.posData[6].near=a+6.4,this.length=this.posData[0].length,this.look=this.posData[0].look,this.near=this.posData[0].near,lr("FloorStart",1).then((()=>{this.count=30}))}makeStage(e){this.stageData=Al.stageLoader.getStage(e,this.playerData,this.stageNum),this.floorTex=this.startRender.makeStageTexture(e,this.stageRender,this.stageData)}stepFrame(e,t){if(this.mode>0&&this.mode<this.posData.length){const e=this.posData[this.mode-1],t=this.posData[this.mode];this.length=(e.length-t.length)*this.count/60+t.length,this.look=(e.look-t.look)*this.count/60+t.look,this.near=(e.near-t.near)*this.count/60+t.near}e.clearColor(0,0,0,1),e.clearDepth(1),e.viewport(0,0,512,512),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.enable(e.DEPTH_TEST),this.startRender.draw(e,this.length,this.near,this.look,this.floorTex,1===this.stageNum&&this.length<10);let n="FLOOR "+this.stageNum;if(this.fontRender.draw(e,n,[-n.length/20,-.1,.1*n.length,.1],[1,1,1]),e.flush(),!Al.stageLoader)return this;if(this.count--,0===this.count)if(this.count=60,this.mode++,2===this.mode)this.makeStage(e);else if(this.mode>=this.posData.length)return this.floorTex&&e.deleteTexture(this.floorTex),new _l(e,this.stageData);return this}}Al.stageLoader=void 0,Al.gameMode=0;class Ll{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.playerData=t,this.fontRender=void 0,this.maxStage=0,this.stageNum=0,this.startRender=void 0,this.autoStart=!1,this.lookHeight=1,this.nearHeight=2.5,this.stageLoader=void 0,this.fontRender=Qn(e),this.startRender=Il(e),this.playerData.loadData().then((e=>{this.maxStage=e.maxStage,this.stageNum=e.curStage,this.lookHeight=this.stageNum,this.nearHeight=2+this.stageNum/2,e.continueFlag||(this.autoStart=!0)})),n&&Al.getStageLoader(Math.floor(this.playerData.saveNum/5)).then((e=>this.stageLoader=e))}stepFrame(e,t){if(e.clearColor(0,0,0,1),e.clearDepth(1),e.viewport(0,0,512,512),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.maxStage<1)return this;let n=this.stageNum,r=2+this.stageNum/2;if(this.lookHeight+=Math.sign(n-this.lookHeight)*Math.min(.4,Math.abs(n-this.lookHeight)),this.nearHeight+=Math.sign(r-this.nearHeight)*Math.min(.2,Math.abs(r-this.nearHeight)),this.startRender.draw(e,20,this.nearHeight,this.lookHeight),t.isPause(!0)||this.autoStart)return new Al(e,this.playerData,this.stageNum);let i=0;if(t.isUp(!0)?i=10:t.isDown(!0)?i=-10:t.isRight(!0)?i=1:t.isLeft(!0)&&(i=-1),this.stageNum+=i,this.stageNum<1?this.stageNum=1:this.stageNum>this.maxStage&&(this.stageNum=this.maxStage),this.stageLoader)if(t.isSword(!0)){const e=this.stageLoader.getData(this.stageNum);e.treasure&&this.playerData.gotItem(e.treasure)}else if(t.isSelect(!0)){const e=this.stageLoader.getData(this.stageNum);e.treasure&&this.playerData.lostItem(e.treasure)}e.enable(e.DEPTH_TEST),this.fontRender.draw(e,"SELECT FLOOR",[-.7,-.3,1.2,.1],[.8,.8,1]);let a="FLOOR "+this.stageNum;return this.fontRender.draw(e,a,[-a.length/20,-.1,.1*a.length,.1],[1,1,1]),this}}const Fl=["NORMAL","ANOTHER","SHADOW","DARKNESS"];let Ml=[0,0,0,0,0];class jl{constructor(){this.mode=0,this.lastStick=0,this.mode0Count=0}checkStick(e){if(1===this.mode)e.isRight()&&e.isPause()&&(this.mode=2);else if(0===this.mode){let t=0;if(e.isUp()&&(t|=1),e.isRight()&&(t|=2),e.isDown()&&(t|=4),e.isLeft()&&(t|=8),t===this.lastStick)return;const n=[1,0,4,0,8,0,2,0,4,0,1,0,2,0,8,0,8,0,2,0,4,0,1,0,2,0,8,0,1,0];t===n[this.mode0Count]?(this.mode0Count++,this.mode0Count>=n.length&&(console.log("SECRET COMMAND OK!"),this.mode=1)):this.mode0Count=0,this.lastStick=t}}checkStart(e){return 1===this.mode&&(Kn.getSaveData(e).then((e=>{e.data.evilMap={},e.data.maxStage=60,e.data.continueFlag=!0,Kn.updateSaveData(e).then()})),!0)}isDebugMode(){return 1===this.mode}}class Bl{constructor(e){this.fontRender=void 0,this.message=void 0,this.program=void 0,this.aPos=void 0,this.uTex=void 0,this.posVbo=void 0,this.texture=void 0,this.count=0,this.select=0,this.saveData=[],this.mode=[],this.startWait=0,this.debugTest=void 0,this.fontRender=Qn(e),this.message="   IN ANOTHER TIME\n      IN ANOTHER WORLD...\n\nTHE BLUE CRYSTAL ROD\n   KEPT THE KINGDOM IN PEACE\n\nBUT THE EVIL DEMON DRUAGA\n   HID THE ROD\n      AND THE MAIDEN KI\n         IN A TOWER\n\nTHE PRINCE GILGAMESH\n  WORE GOLDEN ARMOR\n    AND ATTACKED MONSTERS\n      TO HELP KI IN\n        THE TOWER OF DRUAGA".split("\n");let t=e.createShader(e.VERTEX_SHADER);e.shaderSource(t,"\n// xyz, a=\u8272\u306e\u660e\u308b\u3055\nattribute vec4 a_pos;\n\nvarying vec2 v_tex;\n\nvoid main() {\n    gl_Position = vec4(a_pos.xy, 0, 1);\n    v_tex = a_pos.zw;\n}\n"),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(t));let n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,"\nprecision mediump float;\nuniform sampler2D u_tex;\n\nvarying vec2 v_tex;\n\nvoid main() {\n    gl_FragColor = texture2D(u_tex, v_tex);\n}\n"),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)||console.log(e.getShaderInfoLog(n)),this.program=e.createProgram(),e.attachShader(this.program,t),e.attachShader(this.program,n),e.linkProgram(this.program),e.useProgram(this.program),this.aPos=e.getAttribLocation(this.program,"a_pos"),this.uTex=e.getUniformLocation(this.program,"u_tex"),this.posVbo=e.createBuffer(),this.texture=e.createTexture();let r=new Image;r.onload=()=>{console.log("Image Loaded"),e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},r.src="images/title.png",this.loadData().then(),Sl(e),this.debugTest=new jl}async loadData(){this.mode=[],this.saveData=[];for(let e=0;e<5;e++){const t=await Kn.getSaveData(5*Ml[e]+e);this.saveData.push(t),1===t.data.maxStage&&0===Object.keys(t.data.itemMap).length?this.mode.push(0):this.mode.push(3)}!function(){const e=["stage","item","gil00","gil01","gil10","gil11","gil12","gil20","gil21","gil22","gil30","gil31","gil32","gil33","gil40","gil41","gil42","gil50","gil51","BLACK_Dragon","BLACK_Knight","BLACK_Slime","BLUE_Knight","BLUE_Roper","BLUE_Slime","DemonDruaga","DKGREEN_Slime","DKYELLOW_Slime","DLUID_Ghost","DLUID","DragonFire","GREEN_Roper","GREEN_Slime","HYPER_Knight","Ishtar","LIZARD_Knight","MAGE_Ghost","MAGE","MIRROR_Knight","QUOX_Dragon","RED_Knight","RED_Roper","RED_Slime","Rod","SILVER_Dragon","SORCERER","Spell_Fire","Spell","Wisp","WIZARD_Ghost","WIZARD"];for(let t of e)mr(t).then()}()}close(e){e.deleteBuffer(this.posVbo),e.deleteTexture(this.texture),e.deleteProgram(this.program)}stepFrame(e,t){this.debugTest&&this.debugTest.checkStick(t),e.clearColor(0,0,0,1),e.clearDepth(1),e.viewport(0,0,512,512),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.enable(e.DEPTH_TEST);const n=-.9,r=.9;let i=1;if(this.count++,this.count>300?i=Math.max(.5,1-(this.count-300)/200):this.fontRender.draw(e,"CLASSIC GAME SERIES",[-.5,.7,1,.1],[1,1,1,1]),e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.posVbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array([n,r,0,0,n,r-1.45*i,0,1,n+1.76*i,r,1,0,n+1.76*i,r-1.45*i,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(this.aPos),e.vertexAttribPointer(this.aPos,4,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.texture),e.uniform1i(this.uTex,0),e.drawArrays(e.TRIANGLE_STRIP,0,4),this.count>400){let r=[.6,.9,.6],i=-.12,a=Math.ceil((this.count-400)/2);for(let t=0;t<this.message.length&&a>0;t++){t===this.message.length-1&&(r=[1,.7,.7],r=[1,.2,0]);let o=this.message[t];o.length>0?(o.length>a&&(o=o.substring(0,a)),a-=o.length,this.fontRender.draw(e,o,[n,i,.035*o.length,.05],r),i+=.07):i+=.05}for(let t=0;t<this.saveData.length;t++){let n=[1,1,1];switch(Ml[t]){case 1:n=[.2,.8,.2];break;case 2:n=[.4,.5,1];break;case 3:n=[.8,.3,.4]}const r=.1,i=.35*t-.9;if(this.select===t){if(this.startWait>0&&8&this.startWait)continue;this.fontRender.drawFrame(e,[r,i,.8,.3],[.3,.2,0],[.7,1,1])}let a=Fl[Ml[t]]+" "+(t+1);if(this.fontRender.draw(e,a,[r+.05,i+.05,.05*a.length,.06],n),1&this.mode[t]){let n="< FLOOR "+this.saveData[t].data.curStage+"/"+this.saveData[t].data.maxStage;this.saveData[t].data.continueFlag&&(n+="."),this.fontRender.draw(e,n,[r+.1,i+.15,.05*n.length,.06],[1,1,.2]);let a=(this.saveData[t].data.continueCount||0).toString();this.fontRender.draw(e,a,[r+.6,i+.23,.04*a.length,.04],[1,1,.2])}else{let n="START";2&this.mode[t]&&(n+=" >"),this.fontRender.draw(e,n,[r+.1,i+.15,.05*n.length,.06],[1,.4,.4])}}0===this.startWait&&(t.isUp(!0)&&this.select>0?this.select--:t.isDown(!0)&&this.select<4?this.select++:t.isLeft(!0)?this.mode[this.select]&=-2:t.isRight(!0)?this.mode[this.select]|=this.mode[this.select]>>1:t.isSelect(!0)&&(Ml[this.select]=(Ml[this.select]+1)%4,this.loadData().then()))}else(t.isPause(!0)||t.isUp(!0)||t.isDown(!0)||t.isLeft(!0)||t.isRight(!0)||t.isSelect(!0))&&(this.count=400);if(this.startWait>0){if(this.startWait--,0===this.startWait){let n;const r=5*Ml[this.select]+this.select;return n=new si(e,t,r),this.close(e),a=["sky","sky2","sky3","sky4"][Ml[this.select]],Ol=a,1&this.mode[this.select]?this.debugTest&&this.debugTest.isDebugMode()?new Ll(e,n,!0):new Ll(e,n):new Al(e,n,1,!0)}}else t.isPause(!0)&&(lr("Coin",1).then(),this.startWait=180,this.debugTest&&this.debugTest.checkStart(5*Ml[this.select]+this.select)&&(this.mode[this.select]|=1));var a;return this}}const Ul=[zn.Up,zn.Left,zn.Down,zn.Right,zn.Select,zn.Pause,zn.Sword];let Kl,zl,Wl=new Hn;const Hl=["ArrowUp","ArrowLeft","ArrowDown","ArrowRight","ShiftLeft","Enter","Space"];let Yl={},Gl={};const Xl=()=>{const t=(0,e.useRef)(null),n=(0,e.useRef)(),[r,i]=(0,e.useState)(!1),[o,s]=(0,e.useState)(Hl),[l,u]=(0,e.useState)(-1),[c,h]=(0,e.useState)([]),[f,d]=(0,e.useState)(!1),[p,g]=(0,e.useState)(!1),y=()=>{const e=Wl.getKeyConfig();for(let t in e){const n=e[t];Hl[Ul.indexOf(n)]=t}},v=e=>{S.current<0||e in Gl||(Wl.resetPad(),Gl[e]=Ul[S.current],Hl[S.current]="Button "+e,S.current+1<Hl.length?u(S.current+1):u(-1))},b=(e,t)=>{g(e),e?((()=>{const e=Wl.getPadConfig();for(let t of Ul)Hl[Ul.indexOf(t)]="Button "+e.buttons[t]})(),Wl.pushListener=v):y(),i(!0),u(0),Yl={},Gl={},t&&t.blur()},w=()=>{p&&Wl instanceof Yn&&(Wl.pushListener=void 0),i(!1)},E=e=>{console.log(e),Wl=new Yn(e.gamepad),d(!0)},k=e=>{console.log(e),Wl=new Hn,d(!1)},D=(0,e.useRef)(r),S=(0,e.useRef)(l),_=(0,e.useRef)(p);(0,e.useEffect)((()=>{D.current=r}),[r]),(0,e.useEffect)((()=>{S.current=l}),[l]),(0,e.useEffect)((()=>{_.current=p}),[p]);const P=e=>{if(D.current){if("keydown"===e.type&&!_.current){if(S.current<0||e.code in Yl)return;e.preventDefault(),Yl[e.code]=S.current,Hl[S.current]=e.code,S.current+1<Hl.length?u(S.current+1):u(-1)}}else Wl.processEvent(e)&&e.preventDefault()};let R=!1;return(0,e.useEffect)((()=>{const e=t.current;if(!e||R)return;Kn.getConfig("keyConfig").then((e=>{y(),h([...Hl])}));for(let t of navigator.getGamepads())if(t){Wl=new Yn(t);break}Kl=e.getContext("webgl2"),zl||(zl=new Bl(Kl));const r=()=>{Wl.checkButton(),zl=zl.stepFrame(Kl,Wl),n.current=requestAnimationFrame(r)};return n.current=requestAnimationFrame(r),window.addEventListener("keydown",P,!1),window.addEventListener("keyup",P,!1),window.addEventListener("gamepadconnected",E),window.addEventListener("gamepaddisconnected",k),()=>{R&&(cancelAnimationFrame(n.current),window.removeEventListener("keydown",P),window.removeEventListener("keyup",P),window.removeEventListener("gamepadconnected",E),window.removeEventListener("gamepaddisconnected",k)),R=!0}}),[]),(0,a.jsxs)("div",{style:{display:"flex",padding:"1em"},children:[(0,a.jsx)("canvas",{ref:t,width:512,height:512,style:{backgroundColor:"black"}}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(m,{striped:!0,bordered:!0,style:{marginLeft:"1em"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{colSpan:2,children:"\u30ad\u30fc"}),(0,a.jsx)("th",{children:"\u64cd\u4f5c\u5185\u5bb9"})]})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)($t,{})}),(0,a.jsx)("td",{children:c[0]}),(0,a.jsxs)("td",{rowSpan:4,children:["\u30d7\u30ec\u30a4\u30e4\u30fc\u79fb\u52d5",(0,a.jsx)("br",{}),"\u30c7\u30fc\u30bf\u30fb\u30e2\u30fc\u30c9\u9078\u629e",(0,a.jsx)("br",{}),"\u30d5\u30ed\u30a2\u9078\u629e"]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(tn,{})}),(0,a.jsx)("td",{children:c[1]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(sn,{})}),(0,a.jsx)("td",{children:c[2]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(fn,{})}),(0,a.jsx)("td",{children:c[3]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(yn,{})}),(0,a.jsx)("td",{children:c[4]}),(0,a.jsx)("td",{children:"\u30b2\u30fc\u30e0\u7a2e\u5225\u9078\u629e"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(En,{})}),(0,a.jsx)("td",{children:c[5]}),(0,a.jsx)("td",{children:"\u30b2\u30fc\u30e0\u958b\u59cb\u30fb\u4e2d\u65ad\u30fb\u518d\u958b"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(Pn,{})}),(0,a.jsx)("td",{children:c[6]}),(0,a.jsx)("td",{children:"\u5263\u3092\u629c\u304f"})]})]})]}),(0,a.jsx)(x,{onClick:e=>b(!1,e.target),children:"\u30ad\u30fc\u8a2d\u5b9a"}),f&&(0,a.jsx)(x,{onClick:e=>b(!0,e.target),style:{marginLeft:"1em"},children:"\u30d1\u30c3\u30c9\u8a2d\u5b9a"}),(0,a.jsx)(te,{children:(0,a.jsxs)(m,{bordered:!0,striped:!0,style:{marginLeft:"1em",marginTop:"1em"},children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{colSpan:2,children:"\u30b5\u30a6\u30f3\u30c9\u8a2d\u5b9a"})})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(te.Label,{children:"BGM"})}),(0,a.jsx)("td",{children:(0,a.jsx)(te.Control,{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0",onChange:e=>{var t;t=parseFloat(e.target.value||"0"),or(),ir=t,er.gain.value=t}})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(te.Label,{children:"\u52b9\u679c\u97f3"})}),(0,a.jsx)("td",{children:(0,a.jsx)(te.Control,{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0",onChange:e=>{var t;t=parseFloat(e.target.value||"0"),or(),ar=t,tr.gain.value=t}})})]})]})]})}),(0,a.jsxs)(Kt,{show:r,onHide:w,children:[(0,a.jsx)(Kt.Header,{children:(0,a.jsx)(Kt.Title,{children:p?"\u30d1\u30c3\u30c9\u8a2d\u5b9a":"\u30ad\u30fc\u8a2d\u5b9a"})}),(0,a.jsx)(Kt.Body,{children:(0,a.jsxs)(Wt,{children:[(0,a.jsxs)(Yt,{children:[(0,a.jsx)(U,{xs:2}),(0,a.jsxs)(U,{xs:3,className:"text-center",children:[(0,a.jsx)($t,{size:50,className:0===l?"bg-info":""}),(0,a.jsx)("p",{style:{fontSize:"10px"},children:o[0]})]}),(0,a.jsx)(U,{xs:1}),(0,a.jsxs)(U,{xs:3,className:"text-center",children:[(0,a.jsx)(yn,{size:30,className:4===l?"bg-info":""}),(0,a.jsx)("p",{style:{fontSize:"10px"},children:o[4]})]}),(0,a.jsxs)(U,{xs:3,className:"text-center",children:[(0,a.jsx)(En,{size:30,className:5===l?"bg-info":""}),(0,a.jsx)("p",{style:{fontSize:"10px"},children:o[5]})]})]}),(0,a.jsxs)(Yt,{children:[(0,a.jsxs)(U,{xs:3,className:"text-center",children:[(0,a.jsx)(tn,{size:50,className:1===l?"bg-info":""}),(0,a.jsx)("p",{style:{fontSize:"10px"},children:o[1]})]}),(0,a.jsx)(U,{xs:1}),(0,a.jsxs)(U,{xs:3,sm:3,md:3,lg:3,className:"text-center",children:[(0,a.jsx)(fn,{size:50,className:3===l?"bg-info":""}),(0,a.jsx)("p",{style:{fontSize:"10px"},children:o[3]})]})]}),(0,a.jsxs)(Yt,{children:[(0,a.jsx)(U,{xs:2}),(0,a.jsxs)(U,{xs:3,className:"text-center",children:[(0,a.jsx)(sn,{size:50,className:2===l?"bg-info":""}),(0,a.jsx)("p",{style:{fontSize:"10px"},children:o[2]})]}),(0,a.jsx)(U,{xs:1}),(0,a.jsxs)(U,{xs:3,className:"text-center",children:[(0,a.jsx)(Pn,{size:50,className:6===l?"bg-info":""}),(0,a.jsx)("p",{style:{fontSize:"10px"},children:o[6]})]})]})]})}),(0,a.jsxs)(Kt.Footer,{children:[(0,a.jsx)(x,{disabled:l>=0,variant:"success",onClick:()=>{if(p){const e=Wl;let t=e.getPadConfig();for(let n in Gl)t.buttons[Gl[n]]=parseInt(n);e.setPadConfig(t)}else{let e={};for(let t in Yl)e[t]=Ul[Yl[t]];Wl.setKeyConfig(e),h([...Hl])}i(!1)},children:"\u6c7a\u5b9a"}),(0,a.jsx)(x,{disabled:0===l,variant:"warning",onClick:()=>b(p),children:"\u518d\u8a2d\u5b9a"}),(0,a.jsx)(x,{variant:"danger",onClick:w,children:"\u30ad\u30e3\u30f3\u30bb\u30eb"})]})]})]})]})};const Vl=function(){return(0,a.jsx)("div",{className:"App",children:(0,a.jsx)(Xl,{})})},ql=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:a,getTTFB:o}=t;n(e),r(e),i(e),a(e),o(e)}))};t.createRoot(document.getElementById("root")).render((0,a.jsx)(e.StrictMode,{children:(0,a.jsx)(Vl,{})})),ql()})()})();
//# sourceMappingURL=main.1d96e045.js.map